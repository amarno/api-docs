




<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Drip API Reference</title>
    <link href="images/favicon.ico" rel="icon" type="image/ico" />

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WXZ7JQ');</script>
    <!-- End Google Tag Manager -->
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;ruby&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>

    <div class="toc-wrapper">
      <img src="images/logo.svg" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="ruby">Ruby</a>
              <a href="#" data-language-name="javascript">JavaScript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
              <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
              <p class="toc-section">REST API</p>
          </li>
          <li>
              <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#oauth" class="toc-h2 toc-link" data-title="OAuth">OAuth</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#rate-limiting" class="toc-h1 toc-link" data-title="Rate Limiting">Rate Limiting</a>
          </li>
          <li>
              <a href="#batch-api" class="toc-h1 toc-link" data-title="Batch API">Batch API</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#create-or-update-a-batch-of-subscribers" class="toc-h2 toc-link" data-title="Create or update a batch of subscribers">Create or update a batch of subscribers</a>
                    </li>
                    <li>
                      <a href="#unsubscribe-a-batch-of-subscribers" class="toc-h2 toc-link" data-title="Unsubscribe a batch of subscribers">Unsubscribe a batch of subscribers</a>
                    </li>
                    <li>
                      <a href="#record-a-batch-of-events" class="toc-h2 toc-link" data-title="Record a batch of events">Record a batch of events</a>
                    </li>
                    <li>
                      <a href="#create-or-update-a-batch-of-orders-legacy" class="toc-h2 toc-link" data-title="Create or update a batch of orders (Legacy)">Create or update a batch of orders (Legacy)</a>
                    </li>
                    <li>
                      <a href="#create-or-update-a-batch-of-orders" class="toc-h2 toc-link" data-title="Create or update a batch of orders">Create or update a batch of orders</a>
                    </li>
                    <li>
                      <a href="#create-or-update-a-batch-of-products" class="toc-h2 toc-link" data-title="Create or update a batch of products">Create or update a batch of products</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#pagination" class="toc-h1 toc-link" data-title="Pagination">Pagination</a>
          </li>
          <li>
              <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#validation-errors" class="toc-h2 toc-link" data-title="Validation Errors">Validation Errors</a>
                    </li>
                    <li>
                      <a href="#transition-errors" class="toc-h2 toc-link" data-title="Transition Errors">Transition Errors</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#accounts" class="toc-h1 toc-link" data-title="Accounts">Accounts</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#list-all-accounts" class="toc-h2 toc-link" data-title="List all accounts">List all accounts</a>
                    </li>
                    <li>
                      <a href="#fetch-an-account" class="toc-h2 toc-link" data-title="Fetch an account">Fetch an account</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#broadcasts" class="toc-h1 toc-link" data-title="Broadcasts">Broadcasts</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#list-all-broadcasts" class="toc-h2 toc-link" data-title="List all broadcasts">List all broadcasts</a>
                    </li>
                    <li>
                      <a href="#fetch-a-broadcast" class="toc-h2 toc-link" data-title="Fetch a broadcast">Fetch a broadcast</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#campaigns" class="toc-h1 toc-link" data-title="Campaigns">Campaigns</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#list-all-campaigns" class="toc-h2 toc-link" data-title="List all campaigns">List all campaigns</a>
                    </li>
                    <li>
                      <a href="#fetch-a-campaign" class="toc-h2 toc-link" data-title="Fetch a campaign">Fetch a campaign</a>
                    </li>
                    <li>
                      <a href="#activate-a-campaign" class="toc-h2 toc-link" data-title="Activate a campaign">Activate a campaign</a>
                    </li>
                    <li>
                      <a href="#pause-a-campaign" class="toc-h2 toc-link" data-title="Pause a campaign">Pause a campaign</a>
                    </li>
                    <li>
                      <a href="#list-all-subscribers-subscribed-to-a-campaign" class="toc-h2 toc-link" data-title="List all subscribers subscribed to a campaign">List all subscribers subscribed to a campaign</a>
                    </li>
                    <li>
                      <a href="#subscribe-someone-to-a-campaign" class="toc-h2 toc-link" data-title="Subscribe someone to a campaign">Subscribe someone to a campaign</a>
                    </li>
                    <li>
                      <a href="#list-all-of-a-subscriber-39-s-campaign-subscriptions" class="toc-h2 toc-link" data-title="List all of a subscriber's campaign subscriptions">List all of a subscriber's campaign subscriptions</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#custom-fields" class="toc-h1 toc-link" data-title="Custom Fields">Custom Fields</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#list-all-custom-field-identifiers-used-in-an-account" class="toc-h2 toc-link" data-title="List all custom field identifiers used in an account">List all custom field identifiers used in an account</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#conversions" class="toc-h1 toc-link" data-title="Conversions">Conversions</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#list-all-conversions" class="toc-h2 toc-link" data-title="List all conversions">List all conversions</a>
                    </li>
                    <li>
                      <a href="#fetch-a-conversion" class="toc-h2 toc-link" data-title="Fetch a conversion">Fetch a conversion</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#events" class="toc-h1 toc-link" data-title="Events">Events</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#record-an-event" class="toc-h2 toc-link" data-title="Record an event">Record an event</a>
                    </li>
                    <li>
                      <a href="#list-all-custom-events-actions-used-in-an-account" class="toc-h2 toc-link" data-title="List all custom events actions used in an account">List all custom events actions used in an account</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#forms" class="toc-h1 toc-link" data-title="Forms">Forms</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#list-all-forms" class="toc-h2 toc-link" data-title="List all forms">List all forms</a>
                    </li>
                    <li>
                      <a href="#fetch-a-form" class="toc-h2 toc-link" data-title="Fetch a form">Fetch a form</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#orders-legacy" class="toc-h1 toc-link" data-title="Orders (Legacy)">Orders (Legacy)</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#create-or-update-an-order" class="toc-h2 toc-link" data-title="Create or update an order">Create or update an order</a>
                    </li>
                    <li>
                      <a href="#create-or-update-a-refund" class="toc-h2 toc-link" data-title="Create or update a refund">Create or update a refund</a>
                    </li>
                    <li>
                      <a href="#order-events" class="toc-h2 toc-link" data-title="Order events">Order events</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#subscribers" class="toc-h1 toc-link" data-title="Subscribers">Subscribers</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#create-or-update-a-subscriber" class="toc-h2 toc-link" data-title="Create or update a subscriber">Create or update a subscriber</a>
                    </li>
                    <li>
                      <a href="#list-all-subscribers" class="toc-h2 toc-link" data-title="List all subscribers">List all subscribers</a>
                    </li>
                    <li>
                      <a href="#fetch-a-subscriber" class="toc-h2 toc-link" data-title="Fetch a subscriber">Fetch a subscriber</a>
                    </li>
                    <li>
                      <a href="#remove-a-subscriber-from-one-or-all-campaigns" class="toc-h2 toc-link" data-title="Remove a subscriber from one or all campaigns">Remove a subscriber from one or all campaigns</a>
                    </li>
                    <li>
                      <a href="#unsubscribe-from-all-mailings" class="toc-h2 toc-link" data-title="Unsubscribe from all mailings">Unsubscribe from all mailings</a>
                    </li>
                    <li>
                      <a href="#delete-a-subscriber" class="toc-h2 toc-link" data-title="Delete a subscriber">Delete a subscriber</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#tags" class="toc-h1 toc-link" data-title="Tags">Tags</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#list-all-tags-used-in-an-account" class="toc-h2 toc-link" data-title="List all tags used in an account">List all tags used in an account</a>
                    </li>
                    <li>
                      <a href="#apply-a-tag-to-a-subscriber" class="toc-h2 toc-link" data-title="Apply a tag to a subscriber">Apply a tag to a subscriber</a>
                    </li>
                    <li>
                      <a href="#remove-a-tag-from-a-subscriber" class="toc-h2 toc-link" data-title="Remove a tag from a subscriber">Remove a tag from a subscriber</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#users" class="toc-h1 toc-link" data-title="Users">Users</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#fetch-the-authenticated-user" class="toc-h2 toc-link" data-title="Fetch the authenticated user">Fetch the authenticated user</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#workflows" class="toc-h1 toc-link" data-title="Workflows">Workflows</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#list-all-workflows" class="toc-h2 toc-link" data-title="List all workflows">List all workflows</a>
                    </li>
                    <li>
                      <a href="#fetch-a-workflow" class="toc-h2 toc-link" data-title="Fetch a workflow">Fetch a workflow</a>
                    </li>
                    <li>
                      <a href="#activate-a-workflow" class="toc-h2 toc-link" data-title="Activate a workflow">Activate a workflow</a>
                    </li>
                    <li>
                      <a href="#pause-a-workflow" class="toc-h2 toc-link" data-title="Pause a workflow">Pause a workflow</a>
                    </li>
                    <li>
                      <a href="#start-someone-on-a-workflow" class="toc-h2 toc-link" data-title="Start someone on a workflow">Start someone on a workflow</a>
                    </li>
                    <li>
                      <a href="#remove-a-subscriber-from-a-workflow" class="toc-h2 toc-link" data-title="Remove a subscriber from a workflow">Remove a subscriber from a workflow</a>
                    </li>
                    <li>
                      <a href="#list-all-workflow-triggers" class="toc-h2 toc-link" data-title="List all workflow triggers">List all workflow triggers</a>
                    </li>
                    <li>
                      <a href="#create-a-workflow-trigger" class="toc-h2 toc-link" data-title="Create a workflow trigger">Create a workflow trigger</a>
                    </li>
                    <li>
                      <a href="#update-a-workflow-trigger" class="toc-h2 toc-link" data-title="Update a workflow trigger">Update a workflow trigger</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#webhooks" class="toc-h1 toc-link" data-title="Webhooks">Webhooks</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#list-all-webhooks" class="toc-h2 toc-link" data-title="List all webhooks">List all webhooks</a>
                    </li>
                    <li>
                      <a href="#fetch-a-webhook" class="toc-h2 toc-link" data-title="Fetch a webhook">Fetch a webhook</a>
                    </li>
                    <li>
                      <a href="#create-a-new-webhook" class="toc-h2 toc-link" data-title="Create a new webhook">Create a new webhook</a>
                    </li>
                    <li>
                      <a href="#destroy-a-webhook" class="toc-h2 toc-link" data-title="Destroy a webhook">Destroy a webhook</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#webhook-events" class="toc-h1 toc-link" data-title="Webhook Events">Webhook Events</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#setting-up" class="toc-h2 toc-link" data-title="Setting Up">Setting Up</a>
                    </li>
                    <li>
                      <a href="#resources" class="toc-h2 toc-link" data-title="Resources">Resources</a>
                    </li>
                    <li>
                      <a href="#subscriber-created" class="toc-h2 toc-link" data-title="subscriber.created">subscriber.created</a>
                    </li>
                    <li>
                      <a href="#subscriber-deleted" class="toc-h2 toc-link" data-title="subscriber.deleted">subscriber.deleted</a>
                    </li>
                    <li>
                      <a href="#subscriber-marked_as_deliverable" class="toc-h2 toc-link" data-title="subscriber.marked_as_deliverable">subscriber.marked_as_deliverable</a>
                    </li>
                    <li>
                      <a href="#subscriber-marked_as_undeliverable" class="toc-h2 toc-link" data-title="subscriber.marked_as_undeliverable">subscriber.marked_as_undeliverable</a>
                    </li>
                    <li>
                      <a href="#subscriber-subscribed_to_campaign" class="toc-h2 toc-link" data-title="subscriber.subscribed_to_campaign">subscriber.subscribed_to_campaign</a>
                    </li>
                    <li>
                      <a href="#subscriber-removed_from_campaign" class="toc-h2 toc-link" data-title="subscriber.removed_from_campaign">subscriber.removed_from_campaign</a>
                    </li>
                    <li>
                      <a href="#subscriber-unsubscribed_from_campaign" class="toc-h2 toc-link" data-title="subscriber.unsubscribed_from_campaign">subscriber.unsubscribed_from_campaign</a>
                    </li>
                    <li>
                      <a href="#subscriber-unsubscribed_all" class="toc-h2 toc-link" data-title="subscriber.unsubscribed_all">subscriber.unsubscribed_all</a>
                    </li>
                    <li>
                      <a href="#subscriber-reactivated" class="toc-h2 toc-link" data-title="subscriber.reactivated">subscriber.reactivated</a>
                    </li>
                    <li>
                      <a href="#subscriber-completed_campaign" class="toc-h2 toc-link" data-title="subscriber.completed_campaign">subscriber.completed_campaign</a>
                    </li>
                    <li>
                      <a href="#subscriber-applied_tag" class="toc-h2 toc-link" data-title="subscriber.applied_tag">subscriber.applied_tag</a>
                    </li>
                    <li>
                      <a href="#subscriber-removed_tag" class="toc-h2 toc-link" data-title="subscriber.removed_tag">subscriber.removed_tag</a>
                    </li>
                    <li>
                      <a href="#subscriber-updated_custom_field" class="toc-h2 toc-link" data-title="subscriber.updated_custom_field">subscriber.updated_custom_field</a>
                    </li>
                    <li>
                      <a href="#subscriber-updated_email_address" class="toc-h2 toc-link" data-title="subscriber.updated_email_address">subscriber.updated_email_address</a>
                    </li>
                    <li>
                      <a href="#subscriber-updated_lifetime_value" class="toc-h2 toc-link" data-title="subscriber.updated_lifetime_value">subscriber.updated_lifetime_value</a>
                    </li>
                    <li>
                      <a href="#subscriber-updated_time_zone" class="toc-h2 toc-link" data-title="subscriber.updated_time_zone">subscriber.updated_time_zone</a>
                    </li>
                    <li>
                      <a href="#subscriber-received_email" class="toc-h2 toc-link" data-title="subscriber.received_email">subscriber.received_email</a>
                    </li>
                    <li>
                      <a href="#subscriber-opened_email" class="toc-h2 toc-link" data-title="subscriber.opened_email">subscriber.opened_email</a>
                    </li>
                    <li>
                      <a href="#subscriber-clicked_email" class="toc-h2 toc-link" data-title="subscriber.clicked_email">subscriber.clicked_email</a>
                    </li>
                    <li>
                      <a href="#subscriber-bounced" class="toc-h2 toc-link" data-title="subscriber.bounced">subscriber.bounced</a>
                    </li>
                    <li>
                      <a href="#subscriber-complained" class="toc-h2 toc-link" data-title="subscriber.complained">subscriber.complained</a>
                    </li>
                    <li>
                      <a href="#subscriber-clicked_trigger_link" class="toc-h2 toc-link" data-title="subscriber.clicked_trigger_link">subscriber.clicked_trigger_link</a>
                    </li>
                    <li>
                      <a href="#subscriber-visited_page" class="toc-h2 toc-link" data-title="subscriber.visited_page">subscriber.visited_page</a>
                    </li>
                    <li>
                      <a href="#subscriber-became_lead" class="toc-h2 toc-link" data-title="subscriber.became_lead">subscriber.became_lead</a>
                    </li>
                    <li>
                      <a href="#subscriber-became_non_prospect" class="toc-h2 toc-link" data-title="subscriber.became_non_prospect">subscriber.became_non_prospect</a>
                    </li>
                    <li>
                      <a href="#subscriber-updated_lead_score" class="toc-h2 toc-link" data-title="subscriber.updated_lead_score">subscriber.updated_lead_score</a>
                    </li>
                    <li>
                      <a href="#subscriber-performed_custom_event" class="toc-h2 toc-link" data-title="subscriber.performed_custom_event">subscriber.performed_custom_event</a>
                    </li>
                    <li>
                      <a href="#subscriber-updated_alias" class="toc-h2 toc-link" data-title="subscriber.updated_alias">subscriber.updated_alias</a>
                    </li>
                </ul>
          </li>
          <li>
              <p class="toc-section">Shopper Activity</p>
          </li>
          <li>
              <a href="#shopper_activity_overview" class="toc-h1 toc-link" data-title="Overview">Overview</a>
          </li>
          <li>
              <a href="#cart-activity" class="toc-h1 toc-link" data-title="Cart Activity">Cart Activity</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#create-or-update-a-cart" class="toc-h2 toc-link" data-title="Create or update a cart">Create or update a cart</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#order-activity" class="toc-h1 toc-link" data-title="Order Activity">Order Activity</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#create-or-update-an-order" class="toc-h2 toc-link" data-title="Create or update an order">Create or update an order</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#product-activity" class="toc-h1 toc-link" data-title="Product Activity">Product Activity</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#create-or-update-a-product" class="toc-h2 toc-link" data-title="Create or update a product">Create or update a product</a>
                    </li>
                </ul>
          </li>
          <li>
              <p class="toc-section">JS API</p>
          </li>
          <li>
              <a href="#getting-started" class="toc-h1 toc-link" data-title="Getting Started">Getting Started</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#installing-your-javascript-snippet" class="toc-h2 toc-link" data-title="Installing Your JavaScript Snippet">Installing Your JavaScript Snippet</a>
                    </li>
                    <li>
                      <a href="#how-to-send-a-js-api-request" class="toc-h2 toc-link" data-title="How to Send a JS API Request">How to Send a JS API Request</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#identifying-visitors" class="toc-h1 toc-link" data-title="Identifying Visitors">Identifying Visitors</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#attach-identifying-data-to-visitors" class="toc-h2 toc-link" data-title="Attach Identifying Data to Visitors">Attach Identifying Data to Visitors</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#tracking-events" class="toc-h1 toc-link" data-title="Tracking Events">Tracking Events</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#tracking-events-and-conversions-for-subscribers" class="toc-h2 toc-link" data-title="Tracking Events and Conversions for subscribers">Tracking Events and Conversions for subscribers</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#tagging-via-query-string" class="toc-h1 toc-link" data-title="Tagging via Query String">Tagging via Query String</a>
          </li>
          <li>
              <a href="#campaign-subscriptions" class="toc-h1 toc-link" data-title="Campaign Subscriptions">Campaign Subscriptions</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#subscribe-to-a-campaign" class="toc-h2 toc-link" data-title="Subscribe to a Campaign">Subscribe to a Campaign</a>
                    </li>
                    <li>
                      <a href="#unsubscribe-a-subscriber" class="toc-h2 toc-link" data-title="Unsubscribe a Subscriber">Unsubscribe a Subscriber</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#handling-forms" class="toc-h1 toc-link" data-title="Handling Forms">Handling Forms</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#opening-and-closing-a-form" class="toc-h2 toc-link" data-title="Opening and closing a form">Opening and closing a form</a>
                    </li>
                    <li>
                      <a href="#form-submission-events" class="toc-h2 toc-link" data-title="Form Submission Events">Form Submission Events</a>
                    </li>
                </ul>
          </li>
          <li>
              <p class="toc-section">Custom Dynamic Content</p>
          </li>
          <li>
              <a href="#cdc_overview" class="toc-h1 toc-link" data-title="Overview">Overview</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#how-it-works" class="toc-h2 toc-link" data-title="How it works">How it works</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#api-requirements" class="toc-h1 toc-link" data-title="API Requirements">API Requirements</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#endpoint" class="toc-h2 toc-link" data-title="Endpoint">Endpoint</a>
                    </li>
                    <li>
                      <a href="#parameters" class="toc-h2 toc-link" data-title="Parameters">Parameters</a>
                    </li>
                    <li>
                      <a href="#cdc-requirements-response" class="toc-h2 toc-link" data-title="Response">Response</a>
                    </li>
                    <li>
                      <a href="#general" class="toc-h2 toc-link" data-title="General">General</a>
                    </li>
                </ul>
          </li>
          <li>
              <a href="#preview-test-mode" class="toc-h1 toc-link" data-title="Preview/Test Mode">Preview/Test Mode</a>
          </li>
          <li>
              <a href="#example" class="toc-h1 toc-link" data-title="Example">Example</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.drip.com/pricing' target='_blank'>Need a Drip Account? Sign Up</a></li>
        </ul>
    </div>
    <div id="hello" class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <div id="hello">
          <section class="page-banner page-banner-sky-to-green page-banner-animated">
            <div class="container-md">
              <h1>Drip API Documentation</h1>
            </div>
          </section>
        </div>
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Drip API! The REST API communicates exclusively in JSON over SSL (HTTPS).
All endpoint URLs begin with <code>https://api.getdrip.com/</code>. Additionally, the REST API requires the use of a client which supports <a href="https://en.wikipedia.org/wiki/Server_Name_Indication">SNI</a>.</p>

<p>Parameters must be serialized in JSON and passed in the request body (not in the query string or form parameters). You should use the media type designation of <code>application/json</code>.</p>
<h1 id='rest-section'>REST Section</h1><h1 id='authentication'>Authentication</h1>
<blockquote>
<p>For private integrations, you will need to use your personal API Token (found <a href="https://www.getdrip.com/user/edit">here</a>) via the <code>api_key</code> setting and must be Base64 encoded before use:</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip-ruby'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR_API_KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)(</span>
  <span class="p">{</span>
    <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span>
    <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s2">"api_endpoint_here"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Basic (YOUR_API_KEY)'</span>
</code></pre>
<blockquote>
<p>For public integrations, for example, when allowing your customers within your application to authorize access directly to their Drip accounts, pass in the user&#39;s OAuth token via the <code>access_token</code> setting or pass the <code>Bearer</code> token type when using the JS wrapper:</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">access_token</span> <span class="o">=</span> <span class="s2">"YOUR_ACCESS_TOKEN"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)(</span>
  <span class="p">{</span>
    <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span>
    <span class="na">tokenType</span><span class="p">:</span> <span class="s2">"Bearer"</span><span class="p">,</span>
    <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s2">"api_endpoint_here"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer YOUR_ACCESS_TOKEN'</span>
</code></pre>
<p>The REST API accepts both token-based authentication (intended for private integrations),
and full <a href="http://oauth.net/2/">OAuth 2</a> authentication (for public integrations).</p>

<aside class="notice">
You must replace <code>YOUR_API_KEY</code> / <code>YOUR_ACCESS_TOKEN</code> with your actual token.
</aside>
<h2 id='oauth'>OAuth</h2>
<p><strong>For public integrations with Drip, you must use OAuth based authentication. Here&#39;s a quick overview of how to get going.</strong></p>

<ol>
<li>Get your favorite <a href="http://oauth.net/code/" target="_blank">OAuth Library</a></li>
<li>Register your <a href="https://www.getdrip.com/user/applications" target="_blank">application with us</a>. We will then supply you with an client id and client secret. Please be aware that you must also enter a valid callback url before you will be able to activate your application.</li>
<li>Configure your OAuth client with the credentials supplied to you when you created your application. Request authorization at: <code>https://www.getdrip.com/oauth/authorize</code>. You should only have to do this once, as tokens do not expire.</li>
<li>Activate your application and you&#39;re on your way!</li>
</ol>

<p><strong>If you&#39;re not going to use a library and will be rolling your own OAuth 2 client, here&#39;s the long form of how you can get going.</strong></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"822bbf7cd12243df..."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<ol>
<li>First and foremost remember to register your app with us as outlined above.</li>
<li>Once you have registered your app, it will then need to request authorization by redirecting your user to the following url: <br><br><code>https://www.getdrip.com/oauth/authorize?response_type=code&amp;client_id=&lt;your_client_id&gt;&amp;redirect_uri=&lt;your_redirect_uri&gt;</code><br><br></li>
<li>We will then authenticate their Drip account and ask if it&#39;s ok to give access to your app.</li>
<li>The user will then be redirected back to your app with a verification code that will expire in 10 minutes.</li>
<li>Your app will then need to make a request to trade that verification code for an access token: <br><br><code>POST https://www.getdrip.com/oauth/token?response_type=token&amp;client_id=&lt;your_client_id&gt;&amp;client_secret=&lt;your_client_secret&gt;&amp;code=&lt;your_verification_code&gt;&amp;redirect_uri=&lt;your_redirect_uri&gt;&amp;grant_type=authorization_code</code><br><br></li>
<li>We will then authenticate your app and issue you an access token as shown on the right.</li>
<li>You can now use that access token in the header of your API requests as follows: <br><br><code>Authorization: Bearer 822bbf7cd12243df...</code></li>
</ol>
<h1 id='rate-limiting'>Rate Limiting</h1>
<blockquote>
<p>All API requests subject to rate limiting contain information regarding your current rate limit status in the response headers:</p>
</blockquote>
<pre class="highlight plaintext"><code>HTTP/1.1 200 OK
Status: 200 OK
X-RateLimit-Limit: 3600
X-RateLimit-Remaining: 3597
</code></pre>
<blockquote>
<p>If you exceed your rate limit, the API will returns a 429 status:</p>
</blockquote>
<pre class="highlight plaintext"><code>HTTP/1.1 429 Too Many Requests
Content-Type: application/json

{
  "message": "API rate limit exceeded. Please try again in an hour.",
  "documentation": "https://www.getdrip.com/docs/rest-api#rate-limting"
}
</code></pre>
<p>You can make up to 50 requests per hour for batch endpoints and 3,600 individual requests per hour for other API endpoints. Each batch request accommodates up to 1,000 records in the payload for a total of 50,000 updates per hour.</p>

<p>To minimize your API requests, use the <a href="#batch-api">Batch API</a>.</p>
<h1 id='batch-api'>Batch API</h1><h2 id='create-or-update-a-batch-of-subscribers'>Create or update a batch of subscribers</h2>
<blockquote>
<p>To create or update a batch of subscribers:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/subscribers/batches"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "batches": [{
      "subscribers": [
        {
          "email": "john@acme.com",
          "time_zone": "America/Los_Angeles",
          "tags": ["Customer", "SEO"],
          "custom_fields": {
            "shirt_size": "Medium"
          }
        },
        {
          "email": "joe@acme.com",
          "time_zone": "America/Los_Angeles",
          "tags": ["Prospect"],
          "custom_fields": {
            "shirt_size": "Medium"
          }
        }
      ]
    }]
  }
  EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="c1"># An array of subscribers</span>
<span class="n">subscribers</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john@acme.com"</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"jane@acme.com"</span>
  <span class="p">}</span>
  <span class="c1"># ...</span>
<span class="p">]</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">create_or_update_subscribers</span><span class="p">(</span><span class="n">subscribers</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">batch</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"batches"</span><span class="p">:</span> <span class="p">[{</span>
    <span class="s2">"subscribers"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john@acme.com"</span><span class="p">,</span>
        <span class="s2">"tags"</span><span class="p">:</span> <span class="s2">"Dog Person"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"jane@acme.com"</span><span class="p">,</span>
        <span class="s2">"tags"</span><span class="p">:</span> <span class="s2">"Cat Person"</span>
      <span class="p">}</span>
      <span class="c1">// Lots more subscribers...</span>
    <span class="p">]</span>
  <span class="p">}]</span>
<span class="p">};</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">updateBatchSubscribers</span><span class="p">(</span><span class="nx">batch</span><span class="p">,</span> <span class="p">(</span><span class="nx">errors</span><span class="p">,</span> <span class="nx">responses</span><span class="p">,</span> <span class="nx">bodies</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Do stuff</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre>
<blockquote>
<p>Responds with a <code>201 Created</code> response and an empty JSON response if successful:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<p>We recommend using this API endpoint when you need to create or update a collection of subscribers at once.</p>

<p>Note: Since our batch APIs process requests in the background, there may be a delay between the time you submit your
request and the time your data appears in the user interface.</p>
<h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/subscribers/batches</code></p>
<h3 id='arguments'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>subscribers</code></td>
      <td>Required. An Array with between 1 and 1000 objects containing subscriber data.</td>
    </tr>
  </tbody>
</table>
<h2 id='unsubscribe-a-batch-of-subscribers'>Unsubscribe a batch of subscribers</h2>
<blockquote>
<p>To globally unsubscribe a batch of subscribers:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/unsubscribes/batches"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "batches": [{
      "subscribers": [
        {
          "email": "john@acme.com"
        },
        {
          "email": "jane@acme.com"
        }
      ]
    }]
  }
  EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="c1"># An array of subscribers</span>
<span class="n">subscribers</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john@acme.com"</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"jane@acme.com"</span>
  <span class="p">}</span>
  <span class="c1"># ...</span>
<span class="p">]</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">unsubscribe_subscribers</span><span class="p">(</span><span class="n">subscribers</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">batches</span><span class="p">:</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">subscribers</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="na">email</span><span class="p">:</span> <span class="s1">'someone@example.com'</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">};</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">unsubscribeBatchSubscribers</span><span class="p">(</span><span class="nx">payload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Responds with a <code>204 No Content</code> response if successful.</p>
</blockquote>
<h3 id='http-endpoint-2'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/unsubscribes/batches</code></p>
<h3 id='arguments-2'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>subscribers</code></td>
      <td>Required. An Array with between 1 and 1000 objects containing subscriber data.</td>
    </tr>
  </tbody>
</table>
<h2 id='record-a-batch-of-events'>Record a batch of events</h2>
<blockquote>
<p>To record a batch of events:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/subscribers/batches"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "batches": [{
      "events": [
        {
          "email": "john@acme.com",
          "action": "Opened a door"
        },
        {
          "email": "joe@acme.com",
          "action": "Closed a door"
        }
      ]
    }]
  }
  EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="c1"># An array of events</span>
<span class="n">events</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john@acme.com"</span><span class="p">,</span>
    <span class="s2">"action"</span><span class="p">:</span> <span class="s2">"Opened a door"</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"joe@acme.com"</span><span class="p">,</span>
    <span class="s2">"action"</span><span class="p">:</span> <span class="s2">"Closed a door"</span>
  <span class="p">}</span>
  <span class="c1"># ...</span>
<span class="p">]</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">track_events</span><span class="p">(</span><span class="n">events</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">batches</span><span class="p">:</span> <span class="p">[{</span>
    <span class="na">events</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="na">email</span><span class="p">:</span> <span class="s2">"john@acme.com"</span><span class="p">,</span>
        <span class="na">action</span><span class="p">:</span> <span class="s2">"Opened a door"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="na">email</span><span class="p">:</span> <span class="s2">"joe@acme.com"</span><span class="p">,</span>
        <span class="na">action</span><span class="p">:</span> <span class="s2">"Closed a door"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}]</span>
<span class="p">};</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">recordBatchEvents</span><span class="p">(</span><span class="nx">payload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Responds with a <code>201 Created</code> response and an empty JSON response if successful:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<p>We recommend using this API endpoint when you need to record a collection of events at once that will likely exceed the regular rate limit of 3,600 requests per hour.</p>

<p>Note: Since our batch APIs process requests in the background, there may be a delay between the time you submit your
request and the time your data appears in the user interface.</p>
<h3 id='http-endpoint-3'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/events/batches</code></p>
<h3 id='arguments-3'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>events</code></td>
      <td>Required. An Array with between 1 and 1000 objects containing event data.</td>
    </tr>
  </tbody>
</table>
<h2 id='create-or-update-a-batch-of-orders-legacy'>Create or update a batch of orders (Legacy)</h2>
<blockquote>
<p>To create or update a batch of orders:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/orders/batches"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "batches": [{
      "orders": [
        {
          "email": "john@acme.com",
          "provider": "shopify",
          "upstream_id": "abcdef",
          "identifier": "Order_123456",
          "amount": 4900,
          "tax": 100,
          "fees": 0,
          "discount": 0,
          "permalink": "http://myorders.com/orders/123456",
          "currency_code": "USD",
          "properties": {
            "shirt_size": "Medium",
            "color": "red"
          },
          "occurred_at": "2013-06-21T10:31:58Z",
          "closed_at": "2013-06-21T10:35:58Z",
          "cancelled_at": null,
          "financial_state": "paid",
          "fulfillment_state": "fulfilled",
          "billing_address": {
            "name": "Bill Billington",
            "first_name": "Bill",
            "last_name": "Billington",
            "company": "Bills R US",
            "address_1": "123 Bill St.",
            "address_2": "Apt. B",
            "city": "Billtown",
            "state": "CA",
            "zip": "01234",
            "country": "United States",
            "phone": "555-555-5555",
            "email": "bill@bills.com"
          },
          "shipping_address": {
            "name": "Ship Shippington",
            "first_name": "Ship",
            "last_name": "Shipington",
            "company": "Shipping 4 Less",
            "address_1": "123 Ship St.",
            "address_2": "null",
            "city": "Shipville",
            "state": "CA",
            "zip": "01234",
            "country": "United States",
            "phone": "555-555-5555",
            "email": "ship@shipping.com"
          },
          "items": [{
            "id": "8888888",
            "product_id": "765432",
            "sku": "4444",
            "amount": 4900,
            "name": "Canoe",
            "quantity": 1,
            "upstream_id": "hijkl",
            "upstream_product_id": "opqrs",
            "upstream_product_variant_id": "zyxwv",
            "price": 4900,
            "tax": 100,
            "fees": 0,
            "discount": 100,
            "taxable": true,
            "properties": {
              "color": "black"
            }
          }]
        },
        {
          "email": "joe@acme.com",
          "provider": "shopify",
          "upstream_id": "fedcba",
          "identifier": "Order_654321",
          "amount": 4900,
          "tax": 100,
          "fees": 0,
          "discount": 0,
          "permalink": "http://myorders.com/orders/654321",
          "currency_code": "USD",
          "properties": {
            "size": "small",
            "color": "blue"
          },
          "occurred_at": "2013-05-18T10:31:58Z",
          "closed_at": "2013-05-18T10:35:58Z",
          "cancelled_at": null,
          "financial_state": "paid",
          "fulfillment_state": "fulfilled",
          "billing_address": {
            "name": "Bill Billington",
            "first_name": "Bill",
            "last_name": "Billington",
            "company": "Bills R US",
            "address_1": "123 Bill St.",
            "address_2": "Apt. B",
            "city": "Billtown",
            "state": "CA",
            "zip": "01234",
            "country": "United States",
            "phone": "555-555-5555",
            "email": "bill@bills.com"
          },
          "shipping_address": {
            "name": "Ship Shippington",
            "first_name": "Ship",
            "last_name": "Shipington",
            "company": "Shipping 4 Less",
            "address_1": "123 Ship St.",
            "address_2": "null",
            "city": "Shipville",
            "state": "CA",
            "zip": "01234",
            "country": "United States",
            "phone": "555-555-5555",
            "email": "ship@shipping.com"
          },
          "items": [{
            "id": "8888888",
            "product_id": "765432",
            "sku": "4444",
            "amount": 4900,
            "name": "Canoe",
            "quantity": 1,
            "upstream_id": "hijkl",
            "upstream_product_id": "opqrs",
            "upstream_product_variant_id": "zyxwv",
            "price": 4900,
            "tax": 100,
            "fees": 0,
            "discount": 100,
            "taxable": true,
            "properties": {
              "color": "black"
            }
          }]
        }
      ]
    }]
  }
  EOF
</span></code></pre>
<blockquote>
<p>Responds with a <code>202 Accepted</code> response and an empty JSON response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<aside class="notice color-notice">
Weve released a new and improved batch endpoint for Orders functionality! Check it out <a href="#create-or-update-a-batch-of-orders">here</a>.

<br>
<br>
Note that the legacy Orders endpoint will continue to function. We will give fair notice before we retire it in the future.
</aside>

<p>We recommend using this API endpoint when you need to create a collection of orders and subscribers at once that will likely exceed the regular rate limit of 3,600 requests per hour.</p>

<p>Note: Since our batch APIs process requests in the background, there may be a delay between the time you submit your
request and the time your data appears in the user interface.</p>
<h3 id='http-endpoint-4'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/orders/batches</code></p>
<h3 id='arguments-4'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>orders</code></td>
      <td>Required. An Array with between 1 and 1000 objects containing <a href="#orders">order data</a>.</td>
    </tr>
  </tbody>
</table>
<h2 id='create-or-update-a-batch-of-orders'>Create or update a batch of orders</h2>
<blockquote>
<p>To create or update a batch of orders:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v3/YOUR_ACCOUNT_ID/shopper_activity/order/batch"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "orders": [
      {
        "provider": "my_custom_platform",
        "email": "john@acme.com",
        "action": "placed",
        "occurred_at": "2019-03-12T15:31:58Z",
        "order_id": "63754763",
        "order_public_id": "#4",
        "grand_total": 54.00,
        "total_discounts": 1.00,
        "total_taxes": 1.00,
        "total_fees": 0,
        "total_shipping": 5.00,
        "currency": "USD",
        "order_url": "http://myorders.com/orders/4",
        "items": [{
          "product_id": "B01F9AQ99M",
          "product_variant_id": "B01F9AQ99M-YEL-BT",
          "sku": "JDT-4321",
          "name": "Yellow Boots of Might",
          "brand": "Drip",
          "categories": [
            "Of Might",
            "Outdoors"
          ],
          "price": 49.00,
          "quantity": 1,
          "discounts": 1.00,
          "taxes": 1.00,
          "fees": 0,
          "shipping": 5.00,
          "total": 54.00,
          "color": "black",
          "product_url": "https://mysuperstore.com/dp/B01F9AQ99M",
          "image_url": "https://www.getdrip.com/images/example_products/boots.png"
        }],
        "billing_address": {
          "label": "Primary Billing",
          "first_name": "Bill",
          "last_name": "Billington",
          "company": "Bills R US",
          "address_1": "123 Bill St.",
          "address_2": "Apt. B",
          "city": "Billtown",
          "state": "CA",
          "postal_code": "01234",
          "country": "United States",
          "phone": "555-555-5555"
        },
        "shipping_address": {
          "label": "Downtown Office",
          "first_name": "Ship",
          "last_name": "Shipington",
          "company": "Shipping 4 Less",
          "address_1": "123 Ship St.",
          "address_2": "null",
          "city": "Shipville",
          "state": "CA",
          "postal_code": "01234",
          "country": "United States",
          "phone": "555-555-5555"
        }
      },
      {
        "provider": "my_custom_platform",
        "email": "user@gmail.com",
        "action": "updated",
        "occurred_at": "2019-03-12T15:27:16Z",
        "order_id": "456445746",
        "order_public_id": "#5",
        "grand_total": 21.48,
        "total_discounts": 5.34,
        "total_taxes": 1.00,
        "total_fees": 2.00,
        "total_shipping": 5.00,
        "currency": "USD",
        "order_url": "https://mysuperstore.com/order/5",
        "items": [
          {
            "product_id": "B01J4SWO1G",
            "product_variant_id": "B01J4SWO1G-CW-BOTT",
            "sku": "XHB-1234",
            "name": "The Coolest Water Bottle",
            "brand": "Drip",
            "categories": [
              "Accessories"
            ],
            "price": 11.16,
            "sale_price": 10.16,
            "quantity": 2,
            "discounts": 5.34,
            "taxes": 1.00,
            "fees": 0.50,
            "shipping": 5.00,
            "total": 21.48,
            "product_url": "https://mysuperstore.com/dp/B01J4SWO1G",
            "image_url": "https://www.getdrip.com/images/example_products/water_bottle.png",
            "product_tag": "Best Seller"
          }
        ],
        "billing_address": {
          "label": "Primary Billing",
          "first_name": "Bill",
          "last_name": "Billington",
          "company": "Bills R US",
          "address_1": "123 Bill St.",
          "address_2": "Apt. B",
          "city": "Billtown",
          "state": "CA",
          "postal_code": "01234",
          "country": "United States",
          "phone": "555-555-5555"
        },
        "shipping_address": {
          "label": "Downtown Office",
          "first_name": "Ship",
          "last_name": "Shipington",
          "company": "Shipping 4 Less",
          "address_1": "123 Ship St.",
          "city": "Shipville",
          "state": "CA",
          "postal_code": "01234",
          "country": "United States",
          "phone": "555-555-5555"
        }
      }
    ]
  }
  EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">create_order_activity_events</span><span class="p">(</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="ss">provider: </span><span class="s2">"my_custom_platform"</span><span class="p">,</span>
      <span class="ss">email: </span><span class="s2">"john@acme.com"</span><span class="p">,</span>
      <span class="ss">action: </span><span class="s2">"placed"</span><span class="p">,</span>
      <span class="ss">occurred_at: </span><span class="s2">"2019-03-12T15:31:58Z"</span><span class="p">,</span>
      <span class="ss">order_id: </span><span class="s2">"63754763"</span><span class="p">,</span>
      <span class="ss">order_public_id: </span><span class="s2">"#4"</span><span class="p">,</span>
      <span class="ss">grand_total: </span><span class="mi">54</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
      <span class="ss">total_discounts: </span><span class="mi">1</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
      <span class="ss">total_taxes: </span><span class="mi">1</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
      <span class="ss">total_fees: </span><span class="mi">0</span><span class="p">,</span>
      <span class="ss">total_shipping: </span><span class="mi">5</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
      <span class="ss">currency: </span><span class="s2">"USD"</span><span class="p">,</span>
      <span class="ss">order_url: </span><span class="s2">"http://myorders.com/orders/4"</span><span class="p">,</span>
      <span class="ss">items: </span><span class="p">[{</span>
        <span class="ss">product_id: </span><span class="s2">"B01F9AQ99M"</span><span class="p">,</span>
        <span class="ss">product_variant_id: </span><span class="s2">"B01F9AQ99M-YEL-BT"</span><span class="p">,</span>
        <span class="ss">sku: </span><span class="s2">"JDT-4321"</span><span class="p">,</span>
        <span class="ss">name: </span><span class="s2">"Yellow Boots of Might"</span><span class="p">,</span>
        <span class="ss">brand: </span><span class="s2">"Drip"</span><span class="p">,</span>
        <span class="ss">categories: </span><span class="p">[</span>
          <span class="s2">"Of Might"</span><span class="p">,</span>
          <span class="s2">"Outdoors"</span>
        <span class="p">],</span>
        <span class="ss">price: </span><span class="mi">49</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
        <span class="ss">quantity: </span><span class="mi">1</span><span class="p">,</span>
        <span class="ss">discounts: </span><span class="mi">1</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
        <span class="ss">taxes: </span><span class="mi">1</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
        <span class="ss">fees: </span><span class="mi">0</span><span class="p">,</span>
        <span class="ss">shipping: </span><span class="mi">5</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
        <span class="ss">total: </span><span class="mi">54</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
        <span class="ss">color: </span><span class="s2">"black"</span><span class="p">,</span>
        <span class="ss">product_url: </span><span class="s2">"https://mysuperstore.com/dp/B01F9AQ99M"</span><span class="p">,</span>
        <span class="ss">image_url: </span><span class="s2">"https://www.getdrip.com/images/example_products/boots.png"</span>
      <span class="p">}],</span>
      <span class="ss">billing_address: </span><span class="p">{</span>
        <span class="ss">label: </span><span class="s2">"Primary Billing"</span><span class="p">,</span>
        <span class="ss">first_name: </span><span class="s2">"Bill"</span><span class="p">,</span>
        <span class="ss">last_name: </span><span class="s2">"Billington"</span><span class="p">,</span>
        <span class="ss">company: </span><span class="s2">"Bills R US"</span><span class="p">,</span>
        <span class="ss">address_1: </span><span class="s2">"123 Bill St."</span><span class="p">,</span>
        <span class="ss">address_2: </span><span class="s2">"Apt. B"</span><span class="p">,</span>
        <span class="ss">city: </span><span class="s2">"Billtown"</span><span class="p">,</span>
        <span class="ss">state: </span><span class="s2">"CA"</span><span class="p">,</span>
        <span class="ss">postal_code: </span><span class="s2">"01234"</span><span class="p">,</span>
        <span class="ss">country: </span><span class="s2">"United States"</span><span class="p">,</span>
        <span class="ss">phone: </span><span class="s2">"555-555-5555"</span>
      <span class="p">},</span>
      <span class="ss">shipping_address: </span><span class="p">{</span>
        <span class="ss">label: </span><span class="s2">"Downtown Office"</span><span class="p">,</span>
        <span class="ss">first_name: </span><span class="s2">"Ship"</span><span class="p">,</span>
        <span class="ss">last_name: </span><span class="s2">"Shipington"</span><span class="p">,</span>
        <span class="ss">company: </span><span class="s2">"Shipping 4 Less"</span><span class="p">,</span>
        <span class="ss">address_1: </span><span class="s2">"123 Ship St."</span><span class="p">,</span>
        <span class="ss">address_2: </span><span class="s2">"null"</span><span class="p">,</span>
        <span class="ss">city: </span><span class="s2">"Shipville"</span><span class="p">,</span>
        <span class="ss">state: </span><span class="s2">"CA"</span><span class="p">,</span>
        <span class="ss">postal_code: </span><span class="s2">"01234"</span><span class="p">,</span>
        <span class="ss">country: </span><span class="s2">"United States"</span><span class="p">,</span>
        <span class="ss">phone: </span><span class="s2">"555-555-5555"</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="ss">provider: </span><span class="s2">"my_custom_platform"</span><span class="p">,</span>
      <span class="ss">email: </span><span class="s2">"user@gmail.com"</span><span class="p">,</span>
      <span class="ss">action: </span><span class="s2">"updated"</span><span class="p">,</span>
      <span class="ss">occurred_at: </span><span class="s2">"2019-03-12T15:27:16Z"</span><span class="p">,</span>
      <span class="ss">order_id: </span><span class="s2">"456445746"</span><span class="p">,</span>
      <span class="ss">order_public_id: </span><span class="s2">"#5"</span><span class="p">,</span>
      <span class="ss">grand_total: </span><span class="mi">21</span><span class="o">.</span><span class="mi">48</span><span class="p">,</span>
      <span class="ss">total_discounts: </span><span class="mi">5</span><span class="o">.</span><span class="mi">34</span><span class="p">,</span>
      <span class="ss">total_taxes: </span><span class="mi">1</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
      <span class="ss">total_fees: </span><span class="mi">2</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
      <span class="ss">total_shipping: </span><span class="mi">5</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
      <span class="ss">currency: </span><span class="s2">"USD"</span><span class="p">,</span>
      <span class="ss">order_url: </span><span class="s2">"https://mysuperstore.com/order/5"</span><span class="p">,</span>
      <span class="ss">items: </span><span class="p">[</span>
        <span class="p">{</span>
          <span class="ss">product_id: </span><span class="s2">"B01J4SWO1G"</span><span class="p">,</span>
          <span class="ss">product_variant_id: </span><span class="s2">"B01J4SWO1G-CW-BOTT"</span><span class="p">,</span>
          <span class="ss">sku: </span><span class="s2">"XHB-1234"</span><span class="p">,</span>
          <span class="ss">name: </span><span class="s2">"The Coolest Water Bottle"</span><span class="p">,</span>
          <span class="ss">brand: </span><span class="s2">"Drip"</span><span class="p">,</span>
          <span class="ss">categories: </span><span class="p">[</span>
            <span class="s2">"Accessories"</span>
          <span class="p">],</span>
          <span class="ss">price: </span><span class="mi">11</span><span class="o">.</span><span class="mi">16</span><span class="p">,</span>
          <span class="ss">sale_price: </span><span class="mi">10</span><span class="o">.</span><span class="mi">16</span><span class="p">,</span>
          <span class="ss">quantity: </span><span class="mi">2</span><span class="p">,</span>
          <span class="ss">discounts: </span><span class="mi">5</span><span class="o">.</span><span class="mi">34</span><span class="p">,</span>
          <span class="ss">taxes: </span><span class="mi">1</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
          <span class="ss">fees: </span><span class="mi">0</span><span class="o">.</span><span class="mi">50</span><span class="p">,</span>
          <span class="ss">shipping: </span><span class="mi">5</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
          <span class="ss">total: </span><span class="mi">21</span><span class="o">.</span><span class="mi">48</span><span class="p">,</span>
          <span class="ss">product_url: </span><span class="s2">"https://mysuperstore.com/dp/B01J4SWO1G"</span><span class="p">,</span>
          <span class="ss">image_url: </span><span class="s2">"https://www.getdrip.com/images/example_products/water_bottle.png"</span><span class="p">,</span>
          <span class="ss">product_tag: </span><span class="s2">"Best Seller"</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="ss">billing_address: </span><span class="p">{</span>
        <span class="ss">label: </span><span class="s2">"Primary Billing"</span><span class="p">,</span>
        <span class="ss">first_name: </span><span class="s2">"Bill"</span><span class="p">,</span>
        <span class="ss">last_name: </span><span class="s2">"Billington"</span><span class="p">,</span>
        <span class="ss">company: </span><span class="s2">"Bills R US"</span><span class="p">,</span>
        <span class="ss">address_1: </span><span class="s2">"123 Bill St."</span><span class="p">,</span>
        <span class="ss">address_2: </span><span class="s2">"Apt. B"</span><span class="p">,</span>
        <span class="ss">city: </span><span class="s2">"Billtown"</span><span class="p">,</span>
        <span class="ss">state: </span><span class="s2">"CA"</span><span class="p">,</span>
        <span class="ss">postal_code: </span><span class="s2">"01234"</span><span class="p">,</span>
        <span class="ss">country: </span><span class="s2">"United States"</span><span class="p">,</span>
        <span class="ss">phone: </span><span class="s2">"555-555-5555"</span>
      <span class="p">},</span>
      <span class="ss">shipping_address: </span><span class="p">{</span>
        <span class="ss">label: </span><span class="s2">"Downtown Office"</span><span class="p">,</span>
        <span class="ss">first_name: </span><span class="s2">"Ship"</span><span class="p">,</span>
        <span class="ss">last_name: </span><span class="s2">"Shipington"</span><span class="p">,</span>
        <span class="ss">company: </span><span class="s2">"Shipping 4 Less"</span><span class="p">,</span>
        <span class="ss">address_1: </span><span class="s2">"123 Ship St."</span><span class="p">,</span>
        <span class="ss">city: </span><span class="s2">"Shipville"</span><span class="p">,</span>
        <span class="ss">state: </span><span class="s2">"CA"</span><span class="p">,</span>
        <span class="ss">postal_code: </span><span class="s2">"01234"</span><span class="p">,</span>
        <span class="ss">country: </span><span class="s2">"United States"</span><span class="p">,</span>
        <span class="ss">phone: </span><span class="s2">"555-555-5555"</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="s2">"Request accepted"</span>
<span class="k">else</span>
  <span class="nb">puts</span> <span class="s2">"Error occurred"</span>
<span class="k">end</span>
</code></pre>
<blockquote>
<p>Responds with a <code>202 Accepted</code> if successful. That means the server accepted the request and queued it for processing. The response includes a list of unique request_ids that can be used to check the status of the request later on:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"request_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"db8a7b16-32dd-4863-8b6e-818e3eaab99a"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"002048e9-3692-4f0a-8bbf-80a077acf642"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p></aside></p>

<p>We recommend using this API endpoint when you need to import a collection of orders that will likely exceed the regular rate limit of 3,600 requests per hour.</p>

<p>Note: Since our batch APIs process requests in the background, there may be a delay between the time you submit your
request and the time your data appears in the user interface.</p>
<h3 id='http-endpoint-5'>HTTP Endpoint</h3>
<p><code>POST /v3/:account_id/shopper_activity/order/batch</code></p>
<h3 id='arguments-5'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>orders</code></td>
      <td>Required. An Array with between 1 and 1000 objects containing <a href="#order-activity">order activity</a>.</td>
    </tr>
  </tbody>
</table>
<h2 id='create-or-update-a-batch-of-products'>Create or update a batch of products</h2>
<blockquote>
<p>To create or update a batch of products:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v3/YOUR_ACCOUNT_ID/shopper_activity/product/batch"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "products": [
      {
        "provider": "my_custom_platform",
        "action": "created",
        "occurred_at": "2019-01-28T12:15:23Z",
        "product_id": "B01J4SWO1G",
        "product_variant_id": "B01J4SWO1G-CW-BOTT",
        "sku": "XHB-1234",
        "name": "The Coolest Water Bottle",
        "brand": "Drip",
        "categories": [
          "Accessories"
        ],
        "price": 11.16,
        "inventory": 42,
        "product_url": "https://mysuperstore.com/dp/B01J4SWO1G",
        "image_url": "https://www.getdrip.com/images/example_products/water_bottle.png"
      },
      {
        "provider": "my_custom_platform",
        "action": "created",
        "occurred_at": "2019-01-28T12:15:23Z",
        "product_id": "B01J4SWO1G2",
        "product_variant_id": "B01J4SWO1G-CW-BOTT2",
        "sku": "XHB-1235",
        "name": "The Coolest Water Bottle",
        "brand": "Drip",
        "categories": [
          "Accessories"
        ],
        "price": 11.16,
        "inventory": 42,
        "product_url": "https://mysuperstore.com/dp/B01J4SWO1G2",
        "image_url": "https://www.getdrip.com/images/example_products/water_bottle.png"
      },
      {
        "provider": "my_custom_platform",
        "action": "created",
        "occurred_at": "2019-01-28T12:15:23Z",
        "product_id": "B01J4SWO1G3",
        "product_variant_id": "B01J4SWO1G-CW-BOTT3",
        "sku": "XHB-1236",
        "name": "The Coolest Water Bottle",
        "brand": "Drip",
        "categories": [
          "Accessories"
        ],
        "price": 11.16,
        "inventory": 42,
        "product_url": "https://mysuperstore.com/dp/B01J4SWO1G3",
        "image_url": "https://www.getdrip.com/images/example_products/water_bottle.png"
      }
    ]
  }
  EOF
</span></code></pre>
<blockquote>
<p>Responds with a <code>202 Accepted</code> if successful. That means the server accepted the request and queued it for processing. The response includes a list of unique request_ids that can be used to check the status of the request later on:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"request_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"db8a7b16-32dd-4863-8b6e-818e3eaab99a"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"002048e9-3692-4f0a-8bbf-80a077acf642"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p></aside></p>

<p>We recommend using this API endpoint when you need to import a collection of products that will likely exceed the regular rate limit of 3,600 requests per hour.</p>

<p>Note: Since our batch APIs process requests in the background, there may be a delay between the time you submit your
request and the time your data appears in the user interface.</p>
<h3 id='http-endpoint-6'>HTTP Endpoint</h3>
<p><code>POST /v3/:account_id/shopper_activity/product/batch</code></p>
<h3 id='arguments-6'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>products</code></td>
      <td>Required. An Array with between 1 and 1000 products containing <a href="#product-activity">product activity</a>.</td>
    </tr>
  </tbody>
</table>
<h1 id='pagination'>Pagination</h1>
<blockquote>
<p>An example <code>meta</code> payload:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Some endpoints that return collections are paginated. For these endpoints,
the <code>meta</code> object will tell you the current page, count,
total number of pages, and total count of the collection.</p>

<p>By default, the API will return the first page of results. Each page contains
a maximum of 100 items, unless otherwise noted below. To fetch a particular page,
use the <code>page</code> query parameter.</p>
<h1 id='errors'>Errors</h1>
<blockquote>
<p>If you are authenticated but attempt to access a resource for which you do not have sufficient permissions, you will receive a <code>403 Forbidden</code> response.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"authorization_error"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You are not authorized to access this resource"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If the resource is not found, you will receive a <code>404 Not Found</code> response.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not_found_error"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The resource you requested was not found"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Drip responds to invalid requests in a number of different ways. Exceptions to these rules will be noted for any applicable endpoints. Assume authentication is required on all endpoints unless otherwise noted.</p>

<p>If you attempt to anonymously access a resource that requires authentication, you will receive a <code>401 Unauthorized</code> response.</p>
<h2 id='validation-errors'>Validation Errors</h2>
<blockquote>
<p>An example response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"presence_error"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attribute"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email is required"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"length_error"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attribute"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Name must be between 2 and 20 characters"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If validation errors occur while attempting to create or update a resource, you will receive a <code>422 Unprocessable Entity</code> response with an errors object detailing which attributes are invalid. One of the following codes will assigned to each error object:</p>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>presence_error</code></td>
      <td>The attribute is required.</td>
    </tr>
    <tr>
      <td><code>length_error</code></td>
      <td>The length of the attribute is out of bounds.</td>
    </tr>
    <tr>
      <td><code>uniqueness_error</code></td>
      <td>The attribute must be unique.</td>
    </tr>
    <tr>
      <td><code>email_error</code></td>
      <td>The attribute must be a valid email address.</td>
    </tr>
    <tr>
      <td><code>url_error</code></td>
      <td>The attribute must be a valid URL.</td>
    </tr>
    <tr>
      <td><code>domain_error</code></td>
      <td>The attribute must be a valid domain name.</td>
    </tr>
    <tr>
      <td><code>time_error</code></td>
      <td>The attribute must be a valid time in ISO-8601 format.</td>
    </tr>
    <tr>
      <td><code>email_address_list_error</code></td>
      <td>The attribute must be a valid comma-separated list of email addresses.</td>
    </tr>
    <tr>
      <td><code>days_of_the_week_error</code></td>
      <td>The attribute must be a valid days of the week mask of the format <br><code>/\A(0|1){7}\z/</code> (excluding <code>0000000</code>).</td>
    </tr>
    <tr>
      <td><code>unavailable_error</code></td>
      <td>A resource has been disabled or deleted.</td>
    </tr>
    <tr>
      <td><code>format_error</code></td>
      <td>A resource identifier or object is not formatted correctly.</td>
    </tr>
    <tr>
      <td><code>range_error</code></td>
      <td>A numeric value is out of range.</td>
    </tr>
  </tbody>
</table>
<h2 id='transition-errors'>Transition Errors</h2>
<blockquote>
<p>An example response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no_postal_address_error"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>State transition endpoints will respond with a <code>403 Forbidden</code> and an errors object if the transition is not allowed.</p>
<h1 id='accounts'>Accounts</h1>
<blockquote>
<p>Accounts are represented as follows:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Acme, Inc."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"www.acme.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"default_from_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"default_from_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@acme.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"default_postal_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Anywhere St</span><span class="se">\n</span><span class="s2">Fresno, CA 99999"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"primary_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@acme.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"enable_third_party_cookies"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"999-999-9999"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/accounts/9999999"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>All responses containing account data also include the following top-level link data:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"accounts.broadcasts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/{accounts.id}/broadcasts"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accounts.campaigns"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/{accounts.id}/campaigns"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accounts.goals"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/{accounts.id}/goals"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Properties</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>id</code></td>
      <td>A read-only Drip generated unique id used to identify each subscriber record.</td>
    </tr>
    <tr>
      <td><code>name</code></td>
      <td>The name assigned to each account. Defaults to the account's website URL.</td>
    </tr>
    <tr>
      <td><code>url</code></td>
      <td>The account's website URL.</td>
    </tr>
    <tr>
      <td><code>default_from_name</code></td>
      <td>A default "from name" that appears in your sent emails and can be changed on a per email basis.</td>
    </tr>
    <tr>
      <td><code>default_from_email</code></td>
      <td>A default "from email" that appears in your sent emails and can be changed on a per email basis.</td>
    </tr>
    <tr>
      <td><code>default_postal_address</code></td>
      <td>As required by the <a href="http://1.usa.gov/YgrzFP" target="_blank">CAN-SPAM Act</a>, this is a default postal address used for all sent emails and can be changed on a per email basis.</td>
    </tr>
    <tr>
      <td><code>primary_email</code></td>
      <td>The account owner's email address.</td>
    </tr>
    <tr>
      <td><code>enable_third_party_cookies</code></td>
      <td>When enabled allows tracking visitors across multiple domains (e.g. you use a shopping cart system hosted on a different site).</td>
    </tr>
    <tr>
      <td><code>phone_number</code></td>
      <td>The account's primary contact number.</td>
    </tr>
    <tr>
      <td><code>created_at</code></td>
      <td>A read-only Drip generated timestamp for when the account was first created.</td>
    </tr>
    <tr>
      <td><code>href</code></td>
      <td>The url designated for retrieving the account record via the REST API.</td>
    </tr>
    <tr>
      <td><code>links</code></td>
      <td>An object containing URLs for campaign, broadcast and conversion resources. Note, conversions are represented as "Goals".</td>
    </tr>
  </tbody>
</table>
<h2 id='list-all-accounts'>List all accounts</h2>
<blockquote>
<p>To list all accounts the authenticated user has access to:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/accounts"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">accounts</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"accounts"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">listAccounts</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">accounts</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">account</span><span class="w"> </span><span class="err">objects.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"accounts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>GET /v2/accounts</code></p>
<h3 id='arguments'>Arguments</h3>
<p>None.</p>
<h2 id='fetch-an-account'>Fetch an account</h2>
<blockquote>
<p>To fetch a specific account:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/accounts/ACCOUNT_ID"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">account_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">account</span><span class="p">(</span><span class="n">account_id</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">fetchAccount</span><span class="p">(</span><span class="nx">accountId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">accounts</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">account</span><span class="w"> </span><span class="err">object.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"accounts"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-2'>HTTP Endpoint</h3>
<p><code>GET /v2/accounts/:account_id</code></p>
<h3 id='arguments-2'>Arguments</h3>
<p>None.</p>
<h1 id='broadcasts'>Broadcasts</h1>
<blockquote>
<p>Broadcasts are represented as follows:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sent"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4 Marketing Automation Trends for 2015"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"from_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"from_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"postal_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Anywhere St</span><span class="se">\n</span><span class="s2">Fresno, CA 99999"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"localize_sending_time"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"send_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-07-01T10:00:00Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bcc"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-06-21T10:31:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/9999999/broadcast/123456"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4 Marketing Automation Trends for 2015"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"html_body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HTML body"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"text_body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Text body"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>All responses containing broadcast data also include the following top-level link data:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"broadcasts.account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/accounts/{broadcasts.account}"</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Properties</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>id</code></td>
      <td>A read-only Drip generated unique id used to identify each broadcast record.</td>
    </tr>
    <tr>
      <td><code>status</code></td>
      <td>Returns whether the broadcast is draft, canceled, scheduled, sent or sending.</td>
    </tr>
    <tr>
      <td><code>name</code></td>
      <td>The private name given to the broadcast.</td>
    </tr>
    <tr>
      <td><code>from_name</code></td>
      <td>A "from name" that appears in your sent emails and can be changed on a per email basis. This setting overrides the account's default from name.</td>
    </tr>
    <tr>
      <td><code>from_email</code></td>
      <td>A "from email" that appears in your sent emails and can be changed on a per email basis. This setting overrides the account's default from email.</td>
    </tr>
    <tr>
      <td><code>postal_address</code></td>
      <td>As required by the <a href="http://1.usa.gov/YgrzFP" target="_blank">CAN-SPAM Act</a>, this is a postal address used for all sent emails and can be changed on a per email basis.</td>
    </tr>
    <tr>
      <td><code>localize_sending_time</code></td>
      <td>The scheduled send_at time if set to be sent in the subscriber's time zone.</td>
    </tr>
    <tr>
      <td><code>send_at</code></td>
      <td>The timestamp representing when the broadcast will be delivered.</td>
    </tr>
    <tr>
      <td><code>bcc</code></td>
      <td>A list of emails designated to receive a blind copy of the broadcast.</td>
    </tr>
    <tr>
      <td><code>created_at</code></td>
      <td>A read-only Drip generated timestamp for when the broadcast was first created.</td>
    </tr>
    <tr>
      <td><code>href</code></td>
      <td>The url designated for retrieving the account record via the REST API.</td>
    </tr>
    <tr>
      <td><code>subject</code></td>
      <td>The broadcast email's subject.</td>
    </tr>
    <tr>
      <td><code>html_body</code></td>
      <td>The HTML content used in the email's body.</td>
    </tr>
    <tr>
      <td><code>text_body</code></td>
      <td>The plain text content used in the email's body.</td>
    </tr>
    <tr>
      <td><code>links</code></td>
      <td>An object containing the account's REST API URL.</td>
    </tr>
  </tbody>
</table>
<h2 id='list-all-broadcasts'>List all broadcasts</h2>
<blockquote>
<p>To list broadcasts in an account:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/broadcasts"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">broadcasts</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"broadcasts"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="s2">"sent"</span> <span class="p">};</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">listBroadcasts</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">broadcasts</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">broadcast</span><span class="w"> </span><span class="err">objects.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sort"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created_at"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"broadcasts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/broadcasts</code></p>
<h3 id='arguments'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>status</code></td>
      <td>Optional. Filter by one of the following statuses: <code>draft</code>, <code>scheduled</code>, or <code>sent</code>. Defaults to <code>all</code>.</td>
    </tr>
    <tr>
      <td><code>sort</code></td>
      <td>Optional. Sort results by one of these fields: <code>created_at</code>, <code>send_at</code>, or <code>name</code>. Defaults to <code>created_at</code>.</td>
    </tr>
    <tr>
      <td><code>direction</code></td>
      <td>Optional. Filter sort direction with: <code>asc</code> or <code>desc</code>. Defaults to <code>asc</code>.</td>
    </tr>
  </tbody>
</table>
<h2 id='fetch-a-broadcast'>Fetch a broadcast</h2>
<blockquote>
<p>To fetch a specific broadcast:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/broadcasts/BROADCAST_ID"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">broadcast_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">broadcast</span><span class="p">(</span><span class="n">broadcast_id</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">broadcastId</span> <span class="o">=</span> <span class="mi">9998888</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">fetchBroadcast</span><span class="p">(</span><span class="nx">broadcastId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">broadcasts</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">broadcast</span><span class="w"> </span><span class="err">object.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"broadcasts"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-2'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/broadcasts/:broadcast_id</code></p>
<h3 id='arguments-2'>Arguments</h3>
<p>None.</p>
<h1 id='campaigns'>Campaigns</h1>
<blockquote>
<p>Campaigns are represented as follows:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SEO Email Course"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"from_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"from_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"postal_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Anywhere St</span><span class="se">\n</span><span class="s2">Fresno, CA 99999"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"minutes_from_midnight"</span><span class="p">:</span><span class="w"> </span><span class="mi">440</span><span class="p">,</span><span class="w">
  </span><span class="s2">"localize_sending_time"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"days_of_the_week_mask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0111110"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_immediately"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"double_optin"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"send_to_confirmation_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"use_custom_confirmation_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"confirmation_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"notify_subscribe_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"derrick@getdrip.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"notify_unsubscribe_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"derrick@getdrip.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bcc"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="s2">"active_subscriber_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">320</span><span class="p">,</span><span class="w">
  </span><span class="s2">"unsubscribed_subscriber_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/9999999/campaigns/123456"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"forms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"888"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>All responses containing campaign data also include the following top-level link data:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"campaigns.account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/accounts/{campaigns.account}"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"campaigns.form"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/{campaigns.account}/forms/{campaigns.forms}"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"campaigns.subscribers"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/{campaigns.account}/campaigns/{campaigns.id}/subscribers"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Properties</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>id</code></td>
      <td>A read-only Drip generated unique id used to identify each campaign record.</td>
    </tr>
    <tr>
      <td><code>status</code></td>
      <td>Returns whether the campaign is active, paused or in draft.</td>
    </tr>
    <tr>
      <td><code>name</code></td>
      <td>The private name given to the campaign.</td>
    </tr>
    <tr>
      <td><code>from_name</code></td>
      <td>A "from name" that appears in your sent emails. This setting overrides the account's default from name.</td>
    </tr>
    <tr>
      <td><code>from_email</code></td>
      <td>A "from email" that appears in your sent emails. This setting overrides the account's default from email.</td>
    </tr>
    <tr>
      <td><code>postal_address</code></td>
      <td>As required by the <a href="http://1.usa.gov/YgrzFP" target="_blank">CAN-SPAM Act</a>, this is a postal address used for all sent emails.</td>
    </tr>
    <tr>
      <td><code>minutes_from_midnight</code></td>
      <td>The number of minutes after midnight for the time of day set for email sending.</td>
    </tr>
    <tr>
      <td><code>localize_sending_time</code></td>
      <td>The scheduled send_at time if set to be sent in the subscriber's time zone.</td>
    </tr>
    <tr>
      <td><code>days_of_the_week_mask</code></td>
      <td>A representation of the days of week when emails are set to be sent. For example, <code>1111100</code> represents sending enabled only for Mondays to Fridays while <code>1111111</code> represents sending enabled for all days of the week.</td>
    </tr>
    <tr>
      <td><code>start_immediately</code></td>
      <td>Returns true if the first email in the campaign is set to be delivered immediately after a campaign subscription.</td>
    </tr>
    <tr>
      <td><code>double_optin</code></td>
      <td>Returns true if double opt-in is enabled for the campaign.</td>
    </tr>
    <tr>
      <td><code>send_to_confirmation_page</code></td>
      <td>Deprecated</td>
    </tr>
    <tr>
      <td><code>use_custom_confirmation_page</code></td>
      <td>Deprecated</td>
    </tr>
    <tr>
      <td><code>post_confirmation_url</code></td>
      <td>Deprecated</td>
    </tr>
    <tr>
      <td><code>notify_subscribe_email</code></td>
      <td>An email address set that receives a notification whenever a subscriber subscribes via a form submission.</td>
    </tr>
    <tr>
      <td><code>notify_unsubscribe_email</code></td>
      <td>An email address set that receives a notification whenever a subscriber unsubscribes via their subscription management page.</td>
    </tr>
    <tr>
      <td><code>bcc</code></td>
      <td>A blind copy email address set for all campaign email deliveries.</td>
    </tr>
    <tr>
      <td><code>email_count</code></td>
      <td>Returns a count of all emails associated with the campaign. Includes all email statuses.</td>
    </tr>
    <tr>
      <td><code>active_subscriber_count</code></td>
      <td>Returns a count of all subscribers who are actively subscribed to the campaign.</td>
    </tr>
    <tr>
      <td><code>unsubscribed_subscriber_count</code></td>
      <td>Returns a count of all subscribers who unsubscribed from the campaign via a delivered email.</td>
    </tr>
    <tr>
      <td><code>created_at</code></td>
      <td>A timestamp representing when the campaign was first created.</td>
    </tr>
    <tr>
      <td><code>href</code></td>
      <td>The url designated for retrieving the campaign record via the REST API.</td>
    </tr>
    <tr>
      <td><code>links</code></td>
      <td>An object containing the REST API URL for the account, any associated campaign forms and subscribers subscribed to the campaign.</td>
    </tr>
    <tr>
      <td><code>forms</code></td>
      <td>An object containing the associated form created for the campaign. This is only populated if a form is created for the campaign. <a href="#forms">Refer to Forms</a> for an overview of the properties returned here.</td>
    </tr>
  </tbody>
</table>
<h2 id='list-all-campaigns'>List all campaigns</h2>
<blockquote>
<p>To list all campaigns:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/campaigns"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">campaigns</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"campaigns"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="s2">"active"</span> <span class="p">};</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">listCampaigns</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">campaigns</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">campaign</span><span class="w"> </span><span class="err">objects.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sort"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created_at"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"campaigns"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/campaigns</code></p>
<h3 id='arguments'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>status</code></td>
      <td>Optional. Filter by one of the following statuses: <code>draft</code>, <code>active</code>, or <code>paused</code>. Defaults to <code>all</code>.</td>
    </tr>
    <tr>
      <td><code>sort</code></td>
      <td>Optional. Sort results by one of these fields: <code>created_at</code> or <code>name</code>. Defaults to <code>created_at</code>.</td>
    </tr>
    <tr>
      <td><code>direction</code></td>
      <td>Optional. Filter sort direction with: <code>asc</code> or <code>desc</code>. Defaults to <code>asc</code>.</td>
    </tr>
  </tbody>
</table>
<h2 id='fetch-a-campaign'>Fetch a campaign</h2>
<blockquote>
<p>To fetch a specific campaign:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/campaigns/CAMPAIGN_ID"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">campaign_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">campaign</span><span class="p">(</span><span class="n">campaign_id</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">campaignId</span> <span class="o">=</span> <span class="mi">9998888</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">fetchCampaign</span><span class="p">(</span><span class="nx">campaignId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">campaigns</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">campaign</span><span class="w"> </span><span class="err">objects.</span><span class="w">
</span><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">forms</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">forms</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">feed</span><span class="w"> </span><span class="err">directly</span><span class="w"> </span><span class="err">into</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">campaign.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"campaigns"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}],</span><span class="w">
  </span><span class="s2">"linked"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"forms"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-2'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/campaigns/:campaign_id</code></p>
<h3 id='arguments-2'>Arguments</h3>
<p>None.</p>
<h2 id='activate-a-campaign'>Activate a campaign</h2>
<blockquote>
<p>To activate a campaign:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/campaigns/CAMPAIGN_ID/activate"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">campaign_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">activate_campaign</span><span class="p">(</span><span class="n">campaign_id</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">campaignId</span> <span class="o">=</span> <span class="mi">9998888</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">activateCampaign</span><span class="p">(</span><span class="nx">campaignId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Responds with a <code>204 No Content</code> if successful. If the campaign cannot be activated, returns a <code>422 Unprocessable Entity</code>.</p>
</blockquote>
<h3 id='http-endpoint-3'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/campaigns/:campaign_id/activate</code></p>
<h3 id='arguments-3'>Arguments</h3>
<p>None.</p>
<h2 id='pause-a-campaign'>Pause a campaign</h2>
<blockquote>
<p>To pause a campaign:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/campaigns/CAMPAIGN_ID/pause"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">campaign_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">pause_campaign</span><span class="p">(</span><span class="n">campaign_id</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">campaignId</span> <span class="o">=</span> <span class="mi">9998888</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">pauseCampaign</span><span class="p">(</span><span class="nx">campaignId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Responds with a <code>204 No Content</code> if successful. If the campaign cannot be paused, returns a <code>422 Unprocessable Entity</code>.</p>
</blockquote>
<h3 id='http-endpoint-4'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/campaigns/:campaign_id/pause</code></p>
<h3 id='arguments-4'>Arguments</h3>
<p>None.</p>
<h2 id='list-all-subscribers-subscribed-to-a-campaign'>List all subscribers subscribed to a campaign</h2>
<blockquote>
<p>To list subscribers on a campaign:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/campaigns/CAMPAIGN_ID/subscribers"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">campaign_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">campaign_subscribers</span><span class="p">(</span><span class="n">campaign_id</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"subscribers]
end
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">campaignId</span> <span class="o">=</span> <span class="mi">9998888</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">listAllSubscribesToCampaign</span><span class="p">(</span><span class="nx">campaignId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">subscribers</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">subscriber</span><span class="w"> </span><span class="err">objects.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sort"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created_at"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"desc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"subscribers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-5'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/campaigns/:campaign_id/subscribers</code></p>
<h3 id='arguments-5'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>status</code></td>
      <td>Optional. The status to filter by: <code>active</code>, <code>unsubscribed</code>, or <code>removed</code>. Defaults to <code>active</code>.</td>
    </tr>
    <tr>
      <td><code>page</code></td>
      <td>Optional. The page number. Defaults to <code>1</code>.</td>
    </tr>
    <tr>
      <td><code>sort</code></td>
      <td>Optional. The attribute by which to sort the results: <code>id</code> or <code>created_at</code>. Defaults to <code>created_at</code>.</td>
    </tr>
    <tr>
      <td><code>direction</code></td>
      <td>Optional. The direction to sort the results: <code>asc</code> or <code>desc</code>. Defaults to <code>desc</code>.</td>
    </tr>
    <tr>
      <td><code>per_page</code></td>
      <td>Optional. The number of records to be returned on each page. Defaults to <code>100</code>. Maximum <code>1000</code>.</td>
    </tr>
  </tbody>
</table>
<h2 id='subscribe-someone-to-a-campaign'>Subscribe someone to a campaign</h2>
<blockquote>
<p>To start a subscriber on a campaign:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/campaigns/CAMPAIGN_ID/subscribers"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "subscribers": [{
      "email": "john@acme.com",
      "utc_offset": 660,
      "double_optin": true,
      "starting_email_index": 0,
      "reactivate_if_removed": true,
      "custom_fields": {
        "shirt_size": "Medium"
      }
    }]
  }
  EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">campaign_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">email</span> <span class="o">=</span> <span class="s2">"someone@example.com"</span>
<span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">time_zone: </span><span class="s2">"America/Los_Angeles"</span><span class="p">,</span>
  <span class="ss">custom_fields: </span><span class="p">{</span>
    <span class="ss">name: </span><span class="s2">"Jane Doe"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="n">campaign_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">campaignId</span> <span class="o">=</span> <span class="mi">9998888</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">subscribers</span><span class="p">:</span> <span class="p">[{</span>
    <span class="na">email</span><span class="p">:</span> <span class="s2">"someone@example.com"</span><span class="p">,</span>
    <span class="na">time_zone</span><span class="p">:</span> <span class="s2">"Asia/Kuala_Lumpur"</span><span class="p">,</span>
    <span class="na">custom_fields</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="s2">"Jane Doe"</span>
    <span class="p">}</span>
  <span class="p">}]</span>
<span class="p">}</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">subscribeToCampaign</span><span class="p">(</span><span class="nx">campaignId</span><span class="p">,</span> <span class="nx">payload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">subscribers</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">object.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"subscribers"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-6'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/campaigns/:campaign_id/subscribers</code></p>
<h3 id='arguments-6'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>email</code></td>
      <td>Required. The subscriber's email address.</td>
    </tr>
    <tr>
      <td><code>user_id</code></td>
      <td>Optional. A unique identifier for the user in your database, such as a primary key.</td>
    </tr>
    <tr>
      <td><code>time_zone</code></td>
      <td>Optional. The subscriber's time zone (in Olson format). Defaults to <code>Etc/UTC</code></td>
    </tr>
    <tr>
      <td><code>double_optin</code></td>
      <td>Optional. If <code>true</code>, the double opt-in confirmation email is sent; if <code>false</code>, the confirmation email is skipped. Defaults to the value set on the campaign.</td>
    </tr>
    <tr>
      <td><code>starting_email_index</code></td>
      <td>Optional. The index (zero-based) of the email to send first. Defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td><code>custom_fields</code></td>
      <td>Optional. An Object containing custom field data. E.g. <code>{ "shirt_size": "Medium" }</code>.</td>
    </tr>
    <tr>
      <td><code>tags</code></td>
      <td>Optional. An Array containing one or more tags. E.g. <code>["Customer", "SEO"]</code>.</td>
    </tr>
    <tr>
      <td><code>reactivate_if_removed</code></td>
      <td>Optional. If <code>true</code>, re-subscribe the subscriber to the campaign if there is a removed subscriber in Drip with the same email address; otherwise, respond with <code>422 Unprocessable Entity</code>. Defaults to <code>true</code>.</td>
    </tr>
    <tr>
      <td><code>prospect</code></td>
      <td>Optional. A Boolean specifiying whether we should attach a lead score to the subscriber (when lead scoring is enabled). Defaults to <code>true</code>.
        <strong>Note:</strong> This flag used to be called <code>potential_lead</code>, which we will continue to accept for backwards compatibility.</td>
    </tr>
    <tr>
      <td><code>base_lead_score</code></td>
      <td>Optional. An Integer specifying the starting value for lead score calculation for this subscriber. Defaults to <code>30</code>.</td>
    </tr>
    <tr>
      <td><code>eu_consent</code></td>
      <td>Optional. A String specifying whether the subscriber <code>granted</code> or <code>denied</code> GDPR consent.</td>
    </tr>
    <tr>
      <td><code>eu_consent_message</code></td>
      <td>Optional. A String containing the message the subscriber granted or denied their consent to.</td>
    </tr>
  </tbody>
</table>
<h2 id='list-all-of-a-subscriber-39-s-campaign-subscriptions'>List all of a subscriber&#39;s campaign subscriptions</h2>
<blockquote>
<p>To list campaign subscriptions for a subscriber:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/subscribers/SUBSCRIBER_ID/campaign_subscription"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">subscriber_id</span> <span class="o">=</span> <span class="s2">"bihfwo84teh35dgt99"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">campaign_subscriptions</span><span class="p">(</span><span class="n">subscriber_id</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"campaign_subscriptions"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">subscriberId</span> <span class="o">=</span> <span class="s2">"iuyfgfweufgr9hvrugegff"</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">subscriberCampaignSubscriptions</span><span class="p">(</span><span class="nx">subscriberId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">campaign</span><span class="w"> </span><span class="err">subscriptions</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">campaign</span><span class="w"> </span><span class="err">subscription</span><span class="w"> </span><span class="err">objects.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"campaign_subscriptions.account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/accounts/{campaign_subscriptions.account}"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"campaign_subscriptions.subscriber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/subscribers/{campaign_subscriptions.subscriber}"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"campaign_subscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"campaign_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"is_complete"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lap"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_sent_email_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_sent_email_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-25T11:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"z1togz2hcjrkpp5treip"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-7'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/subscribers/:subscriber_id/campaign_subscriptions</code></p>
<h3 id='arguments-7'>Arguments</h3>
<p>None.</p>
<h1 id='custom-fields'>Custom Fields</h1><h2 id='list-all-custom-field-identifiers-used-in-an-account'>List all custom field identifiers used in an account</h2>
<blockquote>
<p>To list all custom fields:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/custom_field_identifiers"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">custom_fields</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"custom_field_identifiers"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">listAllCustomFields</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"custom_field_identifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"first_name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"last_name"</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Properties</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>custom_field_identifiers</code></td>
      <td>Returns a list of all active custom field identifiers used in the target account.</td>
    </tr>
  </tbody>
</table>
<h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/custom_field_identifiers</code></p>
<h3 id='arguments'>Arguments</h3>
<p>None.</p>
<h1 id='conversions'>Conversions</h1>
<blockquote>
<p>Conversions are represented as follows:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99999"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Trial Signup"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/receipt"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"default_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"counting_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"one_per_visitor"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/9999999/goals/99999"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>All responses containing conversion data also include the following top-level link data:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"goals.account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/accounts/{goals.account}"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Properties</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>id</code></td>
      <td>A read-only Drip generated unique id used to identify each conversion record.</td>
    </tr>
    <tr>
      <td><code>status</code></td>
      <td>Returns whether the conversion is enabled or disabled.</td>
    </tr>
    <tr>
      <td><code>name</code></td>
      <td>The private name given to the conversion.</td>
    </tr>
    <tr>
      <td><code>url</code></td>
      <td>A URL used for detecting and recording conversions.</td>
    </tr>
    <tr>
      <td><code>default_value</code></td>
      <td>A default value assigned to a tracked conversion.
      Conversion values must be less than 2,147,483,647.
      </td>
    </tr>
    <tr>
      <td><code>counting_method</code></td>
      <td>Set either as <code>one_per_visitor</code> or <code>all</code> and determines whether a maximum of one conversion is counted per person or all.</td>
    </tr>
    <tr>
      <td><code>created_at</code></td>
      <td>A timestamp representing when the conversion was first created.</td>
    </tr>
    <tr>
      <td><code>href</code></td>
      <td>The url designated for retrieving the conversion record via the REST API.</td>
    </tr>
    <tr>
      <td><code>links</code></td>
      <td>An object containing the REST API URL for the account.</td>
    </tr>
  </tbody>
</table>

<p>See the Events API for recording conversion events.</p>
<h2 id='list-all-conversions'>List all conversions</h2>
<blockquote>
<p>To list all conversions in an account:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/goals"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">conversions</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"goals"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="s2">"active"</span> <span class="p">};</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">listConversions</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">goals</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">conversion</span><span class="w"> </span><span class="err">goal</span><span class="w"> </span><span class="err">objects.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"goals"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/goals</code></p>
<h3 id='arguments'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>status</code></td>
      <td>Optional. The status to filter by: <code>active</code>, <code>disabled</code>, or <code>all</code>. Defaults to <code>all</code>.</td>
    </tr>
    <tr>
      <td><code>sort</code></td>
      <td>Optional. Sort results by one of these fields: <code>created_at</code> or <code>name</code>. Defaults to <code>created_at</code>.</td>
    </tr>
    <tr>
      <td><code>direction</code></td>
      <td>Optional. Filter sort direction with: <code>asc</code> or <code>desc</code>. Defaults to <code>asc</code>.</td>
    </tr>
  </tbody>
</table>
<h2 id='fetch-a-conversion'>Fetch a conversion</h2>
<blockquote>
<p>To fetch a conversion:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/goals/CONVERSION_ID"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">conversion_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">conversion</span><span class="p">(</span><span class="n">conversion_id</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"goals"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">conversionId</span> <span class="o">=</span> <span class="mi">8889999</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">fetchConversion</span><span class="p">(</span><span class="nx">conversionId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">goals</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">conversion</span><span class="w"> </span><span class="err">goal</span><span class="w"> </span><span class="err">object.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"goals"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-2'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/goals/:conversion_id</code></p>
<h3 id='arguments-2'>Arguments</h3>
<p>None.</p>
<h1 id='events'>Events</h1><h2 id='record-an-event'>Record an event</h2>
<blockquote>
<p>To create or update a subscriber:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/events"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "events": [{
      "email": "john@acme.com",
      "action": "Logged in",
      "properties": {
        "affiliate_code": "XYZ"
      },
      "occurred_at": "2014-03-22T03:00:00Z"
    }]
  }
  EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">email</span> <span class="o">=</span> <span class="s2">"someone@example.com"</span>
<span class="n">action</span> <span class="o">=</span> <span class="s2">"Docked with space station"</span>
<span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">station: </span><span class="s2">"Mars Endeavor"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">track_event</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">properties</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">events</span><span class="p">:</span> <span class="p">[{</span>
    <span class="na">email</span><span class="p">:</span> <span class="s2">"john@acme.com"</span><span class="p">,</span>
    <span class="na">action</span><span class="p">:</span> <span class="s2">"Logged in"</span><span class="p">,</span>
    <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">affiliate_code</span><span class="p">:</span> <span class="s2">"XYZ"</span>
    <span class="p">}</span>
  <span class="p">}]</span>
<span class="p">};</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">recordEvent</span><span class="p">(</span><span class="nx">payload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Responds with a <code>204 No Content</code> if successful.</p>
</blockquote>

<p>If you need to create or update a collection of events at once, use the Batch API instead.</p>
<h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/events</code></p>
<h3 id='arguments'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>email</code></td>
      <td>Optional. The subscriber's email address. Either <code>email</code> or <code>id</code> must be included.</td>
    </tr>
    <tr>
      <td><code>id</code></td>
      <td>Optional. The subscriber's Drip <code>id</code>. Either <code>email</code> or <code>id</code> must be included.</td>
    </tr>
    <tr>
      <td><code>action</code></td>
      <td>Required. The name of the action taken. E.g. "Logged in"</td>
    </tr>
    <tr>
      <td><code>prospect</code></td>
      <td>Optional. A Boolean specifiying whether we should attach a lead score to the subscriber (when lead scoring is enabled). Defaults to <code>true</code>.
        <strong>Note:</strong> This flag used to be called <code>potential_lead</code>, which we will continue to accept for backwards compatibility.</td>
    </tr>
    <tr>
      <td><code>properties</code></td>
      <td>Optional. An Object containing custom event properties. If this event is a conversion, include the value (in cents) in the in the properties with a <code>value</code> key.
      Conversion values must be less than 2,147,483,647.
      </td>
    </tr>
    <tr>
      <td><code>occurred_at</code></td>
      <td>Optional. The String time at which the event occurred in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO-8601</a> format. Defaults to the current time.</td>
    </tr>
  </tbody>
</table>
<h2 id='list-all-custom-events-actions-used-in-an-account'>List all custom events actions used in an account</h2>
<blockquote>
<p>To list custom event actions:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/event_actions"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">event_actions</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">[</span><span class="s2">"event_actions"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">per_page</span><span class="p">:</span> <span class="mi">200</span> <span class="p">};</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">listEventActions</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"event_actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Ate a sandwich"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Started a trial"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-2'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/event_actions</code></p>
<h3 id='arguments-2'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>page</code></td>
      <td>Optional. The page number. Defaults to <code>1</code>.</td>
    </tr>

    <tr>
      <td><code>per_page</code></td>
      <td>Optional. The number of records to be returned on each page. Defaults to <code>100</code>. Maximum <code>1000</code>.</td>
    </tr>
  </tbody>
</table>
<h1 id='forms'>Forms</h1>
<blockquote>
<p>Forms are represented as follows:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"77777"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/9999999/forms/77777"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"headline"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Long Tail SEO Course"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Get our FREE email course"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"button_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sign Up!"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"confirmation_heading"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Thank you for subscribing"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"confirmation_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Please click the link in your email"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"send_ga_event"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"seconds_before_popup"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="s2">"days_between_popup"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="s2">"days_between_popup_after_close"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="s2">"orientation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bottom_right_tab"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"opacity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w">
  </span><span class="s2">"show_labels"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"primary_color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#333333"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secondary_color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#d8ab93"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_widget_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"whitelist"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"/landing"</span><span class="p">,</span><span class="w"> </span><span class="s2">"/public"</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="s2">"blacklist"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"is_whitelist_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_blacklist_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"hide_on_mobile"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_embeddable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>All responses containing form data also include the following top-level link data:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"forms.account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/accounts/{forms.account}"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Properties</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>id</code></td>
      <td>A read-only Drip generated unique id used to identify each form record.</td>
    </tr>
    <tr>
      <td><code>href</code></td>
      <td>The url designated for retrieving the form record via the REST API.</td>
    </tr>
    <tr>
      <td><code>headline</code></td>
      <td>The visible headline on the form widget or embedded form.</td>
    </tr>
    <tr>
      <td><code>description</code></td>
      <td>A description shown in the body of the form widget or in the embedded form.</td>
    </tr>
    <tr>
      <td><code>button_text</code></td>
      <td>The text shown on the submission button for the form.</td>
    </tr>
    <tr>
      <td><code>confirmation_heading</code></td>
      <td>A heading shown after a subscriber submits the form.</td>
    </tr>
    <tr>
      <td><code>confirmation_text</code></td>
      <td>The text shown after a subscriber submits the form.</td>
    </tr>
    <tr>
      <td><code>send_ga_event</code></td>
      <td>Returns true if an event is sent to Google Analytics upon submission.</td>
    </tr>
    <tr>
      <td><code>seconds_before_popup</code></td>
      <td>A delay in seconds before the form widget is displayed.</td>
    </tr>
    <tr>
      <td><code>days_between_popup</code></td>
      <td>A delay in days between each appearance of the form widget.</td>
    </tr>
    <tr>
      <td><code>days_between_popup_after_close</code></td>
      <td>A delay in days between each appearance of the form widget after a visitor closes the form.</td>
    </tr>
    <tr>
      <td><code>orientation</code></td>
      <td>The position on the page where the form widget is displayed. Possible values are <code>bottom_left_tab</code>, <code>bottom_right_tab</code>, <code>side_left_tab</code>, <code>side_right_tab</code>, <code>embedded</code> or <code>lightbox</code>.</td>
    </tr>
    <tr>
      <td><code>opacity</code></td>
      <td>The opacity set for form field labels.</td>
    </tr>
    <tr>
      <td><code>show_labels</code></td>
      <td>Returns true if form field labels are shown above text boxes.</td>
    </tr>
    <tr>
      <td><code>primary_color</code></td>
      <td>The tab color for the form.</td>
    </tr>
    <tr>
      <td><code>secondary_color</code></td>
      <td>The headline color for the form.</td>
    </tr>
    <tr>
      <td><code>is_widget_enabled</code></td>
      <td>Returns true if the form widget is enabled and shown.</td>
    </tr>
    <tr>
      <td><code>whitelist</code></td>
      <td>An array of URL paths where the form is shown.</td>
    </tr>
    <tr>
      <td><code>blacklist</code></td>
      <td>An array of URL paths where the form is hidden.</td>
    </tr>
    <tr>
      <td><code>is_whitelist_enabled</code></td>
      <td>Returns true if whitelisted URLs are set.</td>
    </tr>
    <tr>
      <td><code>is_blacklist_enabled</code></td>
      <td>Returns true if blacklisted URLs are set.</td>
    </tr>
    <tr>
      <td><code>hide_on_mobile</code></td>
      <td>Returns true if the form widget is disabled for mobile devices.</td>
    </tr>
    <tr>
      <td><code>is_embeddable</code></td>
      <td>Deprecated</td>
    </tr>
    <tr>
      <td><code>created_at</code></td>
      <td>A timestamp representing when the form was first created.</td>
    </tr>
    <tr>
      <td><code>links</code></td>
      <td>An object containing the REST API URL for the account.</td>
    </tr>
  </tbody>
</table>
<h2 id='list-all-forms'>List all forms</h2>
<blockquote>
<p>To list all forms in an account:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/forms"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">forms</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"forms"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">listForms</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">forms</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">form</span><span class="w"> </span><span class="err">objects.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"forms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/forms</code></p>
<h3 id='arguments'>Arguments</h3>
<p>None.</p>
<h2 id='fetch-a-form'>Fetch a form</h2>
<blockquote>
<p>To fetch a specific form:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/forms/FORM_ID"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">form_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">form</span><span class="p">(</span><span class="n">form_id</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"forms"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">formId</span> <span class="o">=</span> <span class="mi">9998888</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">fetchForm</span><span class="p">(</span><span class="nx">formId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">forms</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">form</span><span class="w"> </span><span class="err">object.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"forms"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-2'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/forms/:form_id</code></p>
<h3 id='arguments-2'>Arguments</h3>
<p>None.</p>
<h1 id='orders-legacy'>Orders (Legacy)</h1>
<aside class="notice color-notice">
Weve released a new and improved endpoint for Orders functionality! This new endpoint will allow you to trigger automations and segment people based on the items contained in their orders. Check it out <a href="#order-activity">here</a>.

<br>
<br>
Note that the legacy Orders endpoint will continue to function. We will give fair notice before we retire it in the future.
</aside>

<blockquote>
<p>Orders are represented as follows:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopify"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"upstream_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Order_123456"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">4900</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fees"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"permalink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://myorders.com/orders/123456"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"shirt_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Medium"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"red"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">2013-06-21</span><span class="err">T</span><span class="mi">10</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">58</span><span class="err">Z</span><span class="p">,</span><span class="w">
  </span><span class="s2">"closed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">2013-06-21</span><span class="err">T</span><span class="mi">10</span><span class="p">:</span><span class="mi">35</span><span class="p">:</span><span class="mi">58</span><span class="err">Z</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cancelled_at"</span><span class="p">:</span><span class="w"> </span><span class="err">nil</span><span class="p">,</span><span class="w">
  </span><span class="s2">"financial_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fulfillment_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fulfilled"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billing_address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bill Billington"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bill"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Billington"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bills R US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Bill St."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address_2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apt. B"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Billtown"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01234"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United States"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555-555-5555"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill@bills.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"shipping_address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ship Shippington"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ship"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shipington"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shipping 4 Less"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address_1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Ship St."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address_2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"null"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shipville"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01234"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United States"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555-555-5555"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ship@shipping.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8888888"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"product_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"765432"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4444"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">4900</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Canoe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"upstream_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hijkl"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"upstream_product_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"opqrs"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"upstream_product_variant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zyxwv"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">4900</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fees"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"taxable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5555555"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Properties</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>id</code></td>
      <td>A read-only Drip generated unique id used to identify each order record.</td>
    </tr>
    <tr>
      <td><code>provider</code></td>
      <td>The identifier for the provider from which the order data was received in lower snake cased form. For example, <code>shopify</code> or <code>my_store</code></td>
    </tr>
    <tr>
      <td><code>amount</code></td>
      <td>The total amount of the order in cents (e.g. if the order was $49.99, set the amount to <code>4999</code>).</td>
    </tr>
    <tr>
      <td><code>tax</code></td>
      <td>The tax on the order in cents (e.g. if the order was $1.00, set the tax to <code>100</code>).</td>
    </tr>
    <tr>
      <td><code>fees</code></td>
      <td>The fees on the order in cents (e.g. if the order was $1.00, set the fees to <code>100</code>).</td>
    </tr>
    <tr>
      <td><code>discount</code></td>
      <td>The discount on the order in cents (e.g. if the order was $5.00, set the discount to <code>500</code>).</td>
    </tr>
    <tr>
      <td><code>permalink</code></td>
      <td>A URL for the human-readable interface to view the order details.</td>
    </tr>
    <tr>
      <td><code>currency_code</code></td>
      <td>The alphabetic <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217</a> code for the currency of the purchase.</td>
    </tr>
    <tr>
      <td><code>upstream_id</code></td>
      <td>A unique, internal id for the order (generally the primary key generated by the order management system).</td>
    </tr>
    <tr>
      <td><code>identifier</code></td>
      <td>A unique, external identifier for the order. This will be displayed in the Drip UI and should correspond to what a customer sees on
      invoices, email confirmations, etc.</td>
    </tr>
    <tr>
      <td><code>properties</code></td>
      <td>An Object containing properties about the order. E.g. <code>{ "size": "large" }</code></td>
    </tr>
    <tr>
      <td><code>occurred_at</code></td>
      <td>The String time at which the order occurred in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO-8601</a> format. Defaults to the current time.</td>
    </tr>
    <tr>
      <td><code>closed_at</code></td>
      <td>The String time at which the order closed in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO-8601</a> format.</td>
    </tr>
    <tr>
      <td><code>cancelled_at</code></td>
      <td>The String time at which the order was cancelled in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO-8601</a> format. For an order that was not cancelled, this will be <code>nil</code>.</td>
    </tr>
    <tr>
      <td><code>financial_state</code></td>
      <td>The financial status of the order. One of the following values: <code>pending</code>, <code>authorized</code>, <code>partially_paid</code>, <code>paid</code>, <code>partially_refunded</code>, <code>refunded</code>, <code>voided</code>.</td>
    </tr>
      <td><code>fulfillment_state</code></td>
      <td>The fulfillment status of the order. One of the following values: <code>not_fulfilled</code>, <code>partially_fulfilled</code>, <code>fulfilled</code>.</td>
    </tr>
    <tr>
      <td><code>billing_address</code></td>
      <td>
        An object containing billing address information.
        <br><br>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>name</code></td>
              <td>The full name on the billing address</td>
            </tr>
            <tr>
              <td><code>first_name</code></td>
              <td>The first name on the billing address</td>
            </tr>
            <tr>
              <td><code>last_name</code></td>
              <td>The last name on the billing address</td>
            </tr>
            <tr>
              <td><code>company</code></td>
              <td>The company on the billing address</td>
            </tr>
            <tr>
              <td><code>address_1</code></td>
              <td>The billing street address</td>
            </tr>
            <tr>
              <td><code>address_2</code></td>
              <td>Additional line of the billing street address</td>
            </tr>
            <tr>
              <td><code>city</code></td>
              <td>The billing address city</td>
            </tr>
            <tr>
              <td><code>state</code></td>
              <td>The billing address state</td>
            </tr>
            <tr>
              <td><code>zip</code></td>
              <td>The billing address zip code</td>
            </tr>
            <tr>
              <td><code>country</code></td>
              <td>The billing address country</td>
            </tr>
            <tr>
              <td><code>phone</code></td>
              <td>The phone number associated with the billing address</td>
            </tr>
            <tr>
              <td><code>email</code></td>
              <td>The email associated with the billing address</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <td><code>shipping_address</code></td>
      <td>
        An object containing shipping address information.
        <br><br>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>name</code></td>
              <td>The full name on the shipping address</td>
            </tr>
            <tr>
              <td><code>first_name</code></td>
              <td>The first name on the shipping address</td>
            </tr>
            <tr>
              <td><code>last_name</code></td>
              <td>The last name on the shipping address</td>
            </tr>
            <tr>
              <td><code>company</code></td>
              <td>The company on the shipping address</td>
            </tr>
            <tr>
              <td><code>address_1</code></td>
              <td>The shipping street address</td>
            </tr>
            <tr>
              <td><code>address_2</code></td>
              <td>Additional line of the shipping street address</td>
            </tr>
            <tr>
              <td><code>city</code></td>
              <td>The shipping address city</td>
            </tr>
            <tr>
              <td><code>state</code></td>
              <td>The shipping address state</td>
            </tr>
            <tr>
              <td><code>zip</code></td>
              <td>The shipping address zip code</td>
            </tr>
            <tr>
              <td><code>country</code></td>
              <td>The shipping address country</td>
            </tr>
            <tr>
              <td><code>phone</code></td>
              <td>The phone number associated with the shipping address</td>
            </tr>
            <tr>
              <td><code>email</code></td>
              <td>The email associated with the shipping address</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <td><code>items</code></td>
      <td>
        An Array of objects containing information about specific order items.
        <br><br>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>name</code></td>
              <td>The product name</td>
            </tr>
            <tr>
              <td><code>amount</code></td>
              <td>The line total (in cents).</td>
            </tr>
            <tr>
              <td><code>price</code></td>
              <td>The item price (in cents).</td>
            </tr>
            <tr>
              <td><code>tax</code></td>
              <td>The item tax (in cents).</td>
            </tr>
            <tr>
              <td><code>fees</code></td>
              <td>The item fees (in cents).</td>
            </tr>
            <tr>
              <td><code>discount</code></td>
              <td>The item discount (in cents).</td>
            </tr>
            <tr>
              <td><code>quantity</code></td>
              <td>The quantity of the item ordered (if omitted, defaults to 1).</td>
            </tr>
            <tr>
              <td><code>product_id</code></td>
              <td>A unique identifier for the specific product.</td>
            </tr>
            <tr>
              <td><code>upstream_id</code></td>
              <td>A unique identifier for the item from the provider.</td>
            </tr>
            <tr>
              <td><code>upstream_product_id</code></td>
              <td>A unique identifier for the specific product from the provider.</td>
            </tr>
            <tr>
              <td><code>upstream_product_variant_id</code></td>
              <td>A unique identifier for the specific product variant from the provider.</td>
            </tr>
            <tr>
              <td><code>sku</code></td>
              <td>The product SKU number.</td>
            </tr>
            <tr>
              <td><code>taxable</code></td>
              <td>Boolean indicating whether the item is taxable.</td>
            </tr>
            <tr>
              <td><code>properties</code></td>
              <td>An Object containing properties about the line item.</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <td><code>links</code></td>
      <td>An object containing the REST API URL for the account.</td>
    </tr>
  </tbody>
</table>
<h2 id='create-or-update-an-order'>Create or update an order</h2>
<blockquote>
<p>To create or update an order for a subscriber:</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">order</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">provider: </span><span class="s2">"shopify"</span><span class="p">,</span>
  <span class="ss">upstream_id: </span><span class="s2">"abcdef"</span><span class="p">,</span>
  <span class="ss">identifier: </span><span class="s2">"Order_123456"</span><span class="p">,</span>
  <span class="ss">amount: </span><span class="mi">4900</span><span class="p">,</span>
  <span class="ss">tax: </span><span class="mi">100</span><span class="p">,</span>
  <span class="ss">fees: </span><span class="mi">0</span><span class="p">,</span>
  <span class="ss">discount: </span><span class="mi">0</span><span class="p">,</span>
  <span class="ss">permalink: </span><span class="s2">"http://myorders.com/orders/123456"</span><span class="p">,</span>
  <span class="ss">currency_code: </span><span class="s2">"USD"</span><span class="p">,</span>
  <span class="ss">properties: </span><span class="p">{</span>
    <span class="ss">shirt_size: </span><span class="s2">"Medium"</span><span class="p">,</span>
    <span class="ss">color: </span><span class="s2">"red"</span>
  <span class="p">},</span>
  <span class="ss">occurred_at: </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="p">,</span>
  <span class="ss">closed_at: </span><span class="s2">"2013-06-21T10:35:58Z"</span><span class="p">,</span>
  <span class="ss">financial_state: </span><span class="s2">"paid"</span><span class="p">,</span>
  <span class="ss">fulfillment_state: </span><span class="s2">"fulfilled"</span><span class="p">,</span>
  <span class="ss">billing_address: </span><span class="p">{</span>
    <span class="ss">name: </span><span class="s2">"Bill Billington"</span><span class="p">,</span>
    <span class="ss">first_name: </span><span class="s2">"Bill"</span><span class="p">,</span>
    <span class="ss">last_name: </span><span class="s2">"Billington"</span><span class="p">,</span>
    <span class="ss">company: </span><span class="s2">"Bills R US"</span><span class="p">,</span>
    <span class="ss">address_1: </span><span class="s2">"123 Bill St."</span><span class="p">,</span>
    <span class="ss">address_2: </span><span class="s2">"Apt. B"</span><span class="p">,</span>
    <span class="ss">city: </span><span class="s2">"Billtown"</span><span class="p">,</span>
    <span class="ss">state: </span><span class="s2">"CA"</span><span class="p">,</span>
    <span class="ss">zip: </span><span class="s2">"01234"</span><span class="p">,</span>
    <span class="ss">country: </span><span class="s2">"United States"</span><span class="p">,</span>
    <span class="ss">phone: </span><span class="s2">"555-555-5555"</span><span class="p">,</span>
    <span class="ss">email: </span><span class="s2">"bill@bills.com"</span>
  <span class="p">},</span>
  <span class="ss">shipping_address: </span><span class="p">{</span>
    <span class="ss">name: </span><span class="s2">"Ship Shippington"</span><span class="p">,</span>
    <span class="ss">first_name: </span><span class="s2">"Ship"</span><span class="p">,</span>
    <span class="ss">last_name: </span><span class="s2">"Shipington"</span><span class="p">,</span>
    <span class="ss">company: </span><span class="s2">"Shipping 4 Less"</span><span class="p">,</span>
    <span class="ss">address_1: </span><span class="s2">"123 Ship St."</span><span class="p">,</span>
    <span class="ss">address_2: </span><span class="s2">"null"</span><span class="p">,</span>
    <span class="ss">city: </span><span class="s2">"Shipville"</span><span class="p">,</span>
    <span class="ss">state: </span><span class="s2">"CA"</span><span class="p">,</span>
    <span class="ss">zip: </span><span class="s2">"01234"</span><span class="p">,</span>
    <span class="ss">country: </span><span class="s2">"United States"</span><span class="p">,</span>
    <span class="ss">phone: </span><span class="s2">"555-555-5555"</span><span class="p">,</span>
    <span class="ss">email: </span><span class="s2">"ship@shipping.com"</span>
  <span class="p">},</span>
  <span class="ss">items: </span><span class="p">[{</span>
    <span class="ss">id: </span><span class="s2">"8888888"</span><span class="p">,</span>
    <span class="ss">product_id: </span><span class="s2">"765432"</span><span class="p">,</span>
    <span class="ss">sku: </span><span class="s2">"4444"</span><span class="p">,</span>
    <span class="ss">amount: </span><span class="mi">4900</span><span class="p">,</span>
    <span class="ss">name: </span><span class="s2">"Canoe"</span><span class="p">,</span>
    <span class="ss">quantity: </span><span class="mi">1</span><span class="p">,</span>
    <span class="ss">upstream_id: </span><span class="s2">"hijkl"</span><span class="p">,</span>
    <span class="ss">upstream_product_id: </span><span class="s2">"opqrs"</span><span class="p">,</span>
    <span class="ss">upstream_product_variant_id: </span><span class="s2">"zyxwv"</span><span class="p">,</span>
    <span class="ss">price: </span><span class="mi">4900</span><span class="p">,</span>
    <span class="ss">tax: </span><span class="mi">100</span><span class="p">,</span>
    <span class="ss">fees: </span><span class="mi">0</span><span class="p">,</span>
    <span class="ss">discount: </span><span class="mi">100</span><span class="p">,</span>
    <span class="ss">taxable: </span><span class="kp">true</span><span class="p">,</span>
    <span class="ss">properties: </span><span class="p">{</span>
      <span class="ss">color: </span><span class="s2">"black"</span>
    <span class="p">}</span>
  <span class="p">}]</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">create_or_update_order</span><span class="p">(</span><span class="s2">"john@acme.com"</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/orders"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "orders": [{
      "email": "john@acme.com",
      "provider": "shopify",
      "upstream_id": "abcdef",
      "identifier": "Order_123456",
      "amount": 4900,
      "tax": 100,
      "fees": 0,
      "discount": 0,
      "permalink": "http://myorders.com/orders/123456",
      "currency_code": "USD",
      "properties": {
        "shirt_size": "Medium",
        "color": "red"
      },
      "occurred_at": "2013-06-21T10:31:58Z",
      "closed_at": "2013-06-21T10:35:58Z",
      "financial_state": "paid",
      "fulfillment_state": "fulfilled",
      "billing_address": {
        "name": "Bill Billington",
        "first_name": "Bill",
        "last_name": "Billington",
        "company": "Bills R US",
        "address_1": "123 Bill St.",
        "address_2": "Apt. B",
        "city": "Billtown",
        "state": "CA",
        "zip": "01234",
        "country": "United States",
        "phone": "555-555-5555",
        "email": "bill@bills.com"
      },
      "shipping_address": {
        "name": "Ship Shippington",
        "first_name": "Ship",
        "last_name": "Shipington",
        "company": "Shipping 4 Less",
        "address_1": "123 Ship St.",
        "address_2": "null",
        "city": "Shipville",
        "state": "CA",
        "zip": "01234",
        "country": "United States",
        "phone": "555-555-5555",
        "email": "ship@shipping.com"
      },
      "items": [{
          "id": "8888888",
          "product_id": "765432",
          "sku": "4444",
          "amount": 4900,
          "name": "Canoe",
          "quantity": 1,
          "upstream_id": "hijkl",
          "upstream_product_id": "opqrs",
          "upstream_product_variant_id": "zyxwv",
          "price": 4900,
          "tax": 100,
          "fees": 0,
          "discount": 100,
          "taxable": true,
          "properties": {
            "color": "black"
          }
        }]
    }]
  }
  EOF
</span></code></pre>
<blockquote>
<p>Responds with a <code>202 Accepted</code> and an empty JSON response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<p>When an order is created, the subscriber&#39;s <code>lifetime_value</code> attribute
will be automatically incremented by the total amount of the order.</p>

<p>To update an existing order, include the <code>provider</code> and <code>upstream_id</code> for that order in the payload.</p>

<p><strong>Note</strong>: A matching subscriber record must already be present in Drip before an order can be created.</p>
<h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/orders</code></p>
<h3 id='arguments'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>email</code></td>
      <td>Optional. The email address of the order's subscriber. Either <code>email</code> or <code>id</code> must be included.</td>
    </tr>
    <tr>
      <td><code>id</code></td>
      <td>Optional. The Drip <code>id</code> of the order's subscriber. Either <code>email</code> or <code>id</code> must be included.</td>
    </tr>
    <tr>
      <td><code>amount</code></td>
      <td>Required. The total amount of the order in cents (e.g. if the order was $49.99, set the amount to <code>4999</code>).</td>
    </tr>
    <tr>
      <td><code>provider</code></td>
      <td>Optional. Required for updates. The identifier for the provider from which the order data was received in lower snake cased form. For example, <code>shopify</code> or <code>my_store</code>. Used to identify the order for updates.</td>
    </tr>
    <tr>
      <td><code>tax</code></td>
      <td>Optional. The tax on the order in cents (e.g. if the order was $1.00, set the tax to <code>100</code>).</td>
    </tr>
    <tr>
      <td><code>fees</code></td>
      <td>Optional. The fees on the order in cents (e.g. if the order was $1.00, set the fees to <code>100</code>).</td>
    </tr>
    <tr>
      <td><code>discount</code></td>
      <td>Optional. The discount on the order in cents (e.g. if the order was $5.00, set the discount to <code>500</code>).</td>
    </tr>
    <tr>
      <td><code>permalink</code></td>
      <td>Optional. A URL for the human-readable interface to view the order details.</td>
    </tr>
    <tr>
      <td><code>currency_code</code></td>
      <td>Optional. The alphabetic <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217</a> code for the currency of the purchase.</td>
    </tr>
    <tr>
      <td><code>upstream_id</code></td>
      <td>Optional. Required for updates. A unique, internal id for the order (generally the primary key generated by the order management system).
      Used to identify the order for updates.</td>
    </tr>
    <tr>
      <td><code>identifier</code></td>
      <td>Optional. A unique, external identifier for the order. This will be displayed in the Drip UI and should correspond to what a customer sees on
      invoices, email confirmations, etc.</td>
    </tr>
    <tr>
      <td><code>properties</code></td>
      <td>Optional. An Object containing properties about the order. E.g. <code>{ "size": "large" }</code></td>
    </tr>
    <tr>
      <td><code>occurred_at</code></td>
      <td>Optional. The String time at which the order occurred in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO-8601</a> format. Defaults to the current time.</td>
    </tr>
    <tr>
      <td><code>closed_at</code></td>
      <td>Optional. The String time at which the order closed in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO-8601</a> format.</td>
    </tr>
    <tr>
      <td><code>cancelled_at</code></td>
      <td>Optional. The String time at which the order was cancelled in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO-8601</a> format. For an order that was not cancelled, this will be <code>nil</code>.</td>
    </tr>
    <tr>
      <td><code>financial_state</code></td>
      <td>Optional. The financial status of the order. One of the following values: <code>pending</code>, <code>authorized</code>, <code>partially_paid</code>, <code>paid</code>, <code>partially_refunded</code>, <code>refunded</code>, <code>voided</code>.</td>
    </tr>
      <td><code>fulfillment_state</code></td>
      <td>Optional. The fulfillment status of the order. One of the following values: <code>not_fulfilled</code>, <code>partially_fulfilled</code>, <code>fulfilled</code>.</td>
    </tr>
    <tr>
      <td><code>billing_address</code></td>
      <td>
        Optional. An object containing billing address information.
        <br><br>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>name</code></td>
              <td>The full name on the billing address</td>
            </tr>
            <tr>
              <td><code>first_name</code></td>
              <td>The first name on the billing address</td>
            </tr>
            <tr>
              <td><code>last_name</code></td>
              <td>The last name on the billing address</td>
            </tr>
            <tr>
              <td><code>company</code></td>
              <td>The company on the billing address</td>
            </tr>
            <tr>
              <td><code>address_1</code></td>
              <td>The billing street address</td>
            </tr>
            <tr>
              <td><code>address_2</code></td>
              <td>Additional line of the billing street address</td>
            </tr>
            <tr>
              <td><code>city</code></td>
              <td>The billing address city</td>
            </tr>
            <tr>
              <td><code>state</code></td>
              <td>The billing address state</td>
            </tr>
            <tr>
              <td><code>zip</code></td>
              <td>The billing address zip code</td>
            </tr>
            <tr>
              <td><code>country</code></td>
              <td>The billing address country</td>
            </tr>
            <tr>
              <td><code>phone</code></td>
              <td>The phone number associated with the billing address</td>
            </tr>
            <tr>
              <td><code>email</code></td>
              <td>The email associated with the billing address</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <td><code>shipping_address</code></td>
      <td>
        Optional. An object containing shipping address information.
        <br><br>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>name</code></td>
              <td>The full name on the shipping address</td>
            </tr>
            <tr>
              <td><code>first_name</code></td>
              <td>The first name on the shipping address</td>
            </tr>
            <tr>
              <td><code>last_name</code></td>
              <td>The last name on the shipping address</td>
            </tr>
            <tr>
              <td><code>company</code></td>
              <td>The company on the shipping address</td>
            </tr>
            <tr>
              <td><code>address_1</code></td>
              <td>The shipping street address</td>
            </tr>
            <tr>
              <td><code>address_2</code></td>
              <td>Additional line of the shipping street address</td>
            </tr>
            <tr>
              <td><code>city</code></td>
              <td>The shipping address city</td>
            </tr>
            <tr>
              <td><code>state</code></td>
              <td>The shipping address state</td>
            </tr>
            <tr>
              <td><code>zip</code></td>
              <td>The shipping address zip code</td>
            </tr>
            <tr>
              <td><code>country</code></td>
              <td>The shipping address country</td>
            </tr>
            <tr>
              <td><code>phone</code></td>
              <td>The phone number associated with the shipping address</td>
            </tr>
            <tr>
              <td><code>email</code></td>
              <td>The email associated with the shipping address</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <td><code>items</code></td>
      <td>
        Optional. An Array of objects containing information about specific order items.
        <br><br>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>name</code></td>
              <td>Required. The product name</td>
            </tr>
            <tr>
              <td><code>amount</code></td>
              <td>Required. The line total (in cents).</td>
            </tr>
            <tr>
              <td><code>price</code></td>
              <td>The item price (in cents).</td>
            </tr>
            <tr>
              <td><code>tax</code></td>
              <td>The item tax (in cents).</td>
            </tr>
            <tr>
              <td><code>fees</code></td>
              <td>The item fees (in cents).</td>
            </tr>
            <tr>
              <td><code>discount</code></td>
              <td>The item discount (in cents).</td>
            </tr>
            <tr>
              <td><code>quantity</code></td>
              <td>The quantity of the item ordered (if omitted, defaults to 1).</td>
            </tr>
            <tr>
              <td><code>product_id</code></td>
              <td>A unique identifier for the specific product.</td>
            </tr>
            <tr>
              <td><code>upstream_id</code></td>
              <td>A unique identifier for the item from the provider.</td>
            </tr>
            <tr>
              <td><code>upstream_product_id</code></td>
              <td>A unique identifier for the specific product from the provider.</td>
            </tr>
            <tr>
              <td><code>upstream_product_variant_id</code></td>
              <td>A unique identifier for the specific product variant from the provider.</td>
            </tr>
            <tr>
              <td><code>sku</code></td>
              <td>The product SKU number.</td>
            </tr>
            <tr>
              <td><code>taxable</code></td>
              <td>Boolean indicating whether the item is taxable.</td>
            </tr>
            <tr>
              <td><code>properties</code></td>
              <td>An Object containing properties about the line item.</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>
<h2 id='create-or-update-a-refund'>Create or update a refund</h2>
<blockquote>
<p>To create or update a refund for an order:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/refunds"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "refunds": [{
        "provider": "shopify",
        "order_upstream_id": "abcdef",
        "upstream_id": "tuvwx",
        "amount": 2000,
        "note": "Incorrect size",
        "processed_at": "2013-06-22T10:41:11Z"
      }]
  }
  EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">refund</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">provider: </span><span class="s2">"shopify"</span><span class="p">,</span>
  <span class="ss">order_upstream_id: </span><span class="s2">"abcdef"</span><span class="p">,</span>
  <span class="ss">upstream_id: </span><span class="s2">"tuvwx"</span><span class="p">,</span>
  <span class="ss">amount: </span><span class="mi">2000</span><span class="p">,</span>
  <span class="ss">note: </span><span class="s2">"Incorrect size"</span><span class="p">,</span>
  <span class="ss">processed_at: </span><span class="s2">"2013-06-22T10:41:11Z"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">create_or_update_refund</span><span class="p">(</span><span class="n">refund</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre>
<blockquote>
<p>Responds with a <code>202 Accepted</code> and an empty JSON response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<p>When a refund is created, the subscriber&#39;s <code>lifetime_value</code> attribute
will be automatically decremented by the total amount of the refund.</p>

<p>To update an existing refund, include the <code>upstream_id</code> for that refund in the payload.</p>
<h3 id='http-endpoint-2'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/refunds</code></p>
<h3 id='arguments-2'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>provider</code></td>
      <td>Required. The provider for the Order being refunded.</td>
    </tr>
    <tr>
      <td><code>order_upstream_id</code></td>
      <td>Required. The <code>upstream_id</code> for the Order being refunded.</td>
    </tr>
    <tr>
      <td><code>amount</code></td>
      <td>Required. The amount of the refund.</td>
    </tr>
    <tr>
      <td><code>upstream_id</code></td>
      <td>Optional. Required for updates. The unique id of refund in the order management system. Used to identify the refund for updates.</td>
    </tr>
    <tr>
      <td><code>note</code></td>
      <td>Optional. A note about the refund.</td>
    </tr>
    <tr>
      <td><code>processed_at</code></td>
      <td>Optional. The String time at which the refund was processed in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO-8601</a> format.</td>
    </tr>
  </tbody>
</table>
<h2 id='order-events'>Order events</h2>
<p>Drip automatically records a number of events in the life cycle of an order. You can find
triggers for these events by selecting <code>Drip Order API</code> from the provider dropdown in your Drip automation.</p>

<table>
  <thead>
    <tr>
      <th>Event</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Placed an order</code></td>
      <td>This event is fired when an order is created.</td>
    </tr>
    <tr>
      <td><code>Updated an order</code></td>
      <td>This event is fired when an existing order is updated.</td>
    </tr>
    <tr>
      <td><code>Paid an order</code></td>
      <td>This event is fired when the <code>financial_state</code> on an order is set to <code>paid</code>.</td>
    </tr>
    <tr>
      <td><code>Fulfilled an order</code></td>
      <td>This event is fired when the <code>fulfillment_state</code> on an order is set to <code>fulfilled</code>.</td>
    </tr>
    <tr>
      <td><code>Canceled an order</code></td>
      <td>This event is fired when the <code>cancelled_at</code> time on an order is set.</td>
    </tr>
    <tr>
      <td><code>Refunded an order</code></td>
      <td>This event is fired when a refund is created for an order.</td>
    </tr>
  </tbody>
</table>
<h1 id='subscribers'>Subscribers</h1>
<blockquote>
<p>Subscribers are represented as follows:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"z1togz2hcjrkpp5treip"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@acme.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Main St."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Suite 200"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Los Angeles"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90210"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555-555-5555"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"eu_consent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"granted"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"time_zone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"utc_offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">-440</span><span class="p">,</span><span class="w">
  </span><span class="s2">"visitor_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sa8f7sdf78sdsdahf788d7asf8sd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"custom_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"shirt_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Medium"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Customer"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SEO"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"ip_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"111.111.111.11"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Chrome/36.0.1985.143"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"original_referrer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.getdrip.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"landing_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.getdrip.com/docs/rest-api"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"prospect"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lead_score"</span><span class="p">:</span><span class="w"> </span><span class="mi">72</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lifetime_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/9999999/subscribers/12345"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"base_lead_score"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>All responses containing subscriber data also include the following top-level link data:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"subscribers.account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/accounts/{subscribers.account}"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>On January 7, 2019 we renamed Subscribers to People to better represent who youre talking to. Right now this is a small wording change but represents something bigger in the way we all think about our customers. To keep things simple nothing in the API is changing at the moment. There is no need to update existing integrations, for new ones continue to reference the developer docs as outlined here.</p>

<p><strong>Properties</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>id</code></td>
      <td>A read-only Drip generated unique id used to identify each subscriber record.</td>
    </tr>
    <tr>
      <td><code>status</code></td>
      <td>The subscriber's status whether <code>active</code> or <code>unsubscribed</code>.</td>
    </tr>
    <tr>
      <td><code>email</code></td>
      <td>The subscriber's email address.</td>
    </tr>
    <tr>
      <td><code>first_name</code></td>
      <td>The subscriber's first name.</td>
    </tr>
    <tr>
      <td><code>last_name</code></td>
      <td>The subscriber's last name.</td>
    </tr>
    <tr>
      <td><code>address1</code></td>
      <td>The subscriber's mailing address.</td>
    </tr>
    <tr>
      <td><code>address2</code></td>
      <td>An additional field for the subscribers's mailing address.</td>
    </tr>
    <tr>
      <td><code>city</code></td>
      <td>The city, town, or village in which the subscriber resides.</td>
    </tr>
    <tr>
      <td><code>state</code></td>
      <td>The region in which the subscriber resides. Typically a province, a state, or a prefecture.</td>
    </tr>
    <tr>
      <td><code>zip</code></td>
      <td>The postal code in which the subscriber resides, also known as zip, postcode, Eircode, etc.</td>
    </tr>
    <tr>
      <td><code>country</code></td>
      <td>The country in which the subscriber resides.</td>
    </tr>
    <tr>
      <td><code>phone</code></td>
      <td>The subscriber's primary phone number.</td>
    </tr>
    <tr>
      <td><code>eu_consent</code></td>
      <td>A string describing whether the subscriber GDPR consent is <code>granted</code>, <code>denied</code>, or <code>unknown</code>.</td>
    </tr>
    <tr>
      <td><code>time_zone</code></td>
      <td>The subscriber's time zone (in Olson format).</td>
    </tr>
    <tr>
      <td><code>utc_offset</code></td>
      <td>The UTC offset in minutes relative to UTC/GMT.</td>
    </tr>
    <tr>
      <td><code>visitor_uuid</code></td>
      <td>A read-only Drip generated unique id used to identify each subscriber's visitor record if available.</td>
    </tr>
    <tr>
      <td><code>custom_fields</code></td>
      <td>An Object containing custom field data. E.g. <code>{ "shirt_size": "Medium" }</code>.</td>
    </tr>
    <tr>
      <td><code>tags</code></td>
      <td>An Array containing one or more tags. E.g. <code>["Customer", "SEO"]</code>.</td>
    </tr>
    <tr>
      <td><code>ip_address</code></td>
      <td>The subscriber's IP address if available.</td>
    </tr>
    <tr>
      <td><code>user_agent</code></td>
      <td>The subscriber's browser User Agent if available.</td>
    </tr>
    <tr>
      <td><code>original_referrer</code></td>
      <td>The initial referral URL when the subscriber first visited your site if available.</td>
    </tr>
    <tr>
      <td><code>landing_url</code></td>
      <td>The first page visited by the subscriber if available.</td>
    </tr>
    <tr>
      <td><code>prospect</code></td>
      <td>Returns true if the subscriber is marked as a lead.</td>
    </tr>
    <tr>
      <td><code>lead_score</code></td>
      <td>The subscriber's lead score.</td>
    </tr>
    <tr>
      <td><code>lifetime_value</code></td>
      <td>The subscriber's lifetime value in cents.</td>
    </tr>
    <tr>
      <td><code>created_at</code></td>
      <td>A timestamp representing when the subscriber record was first created.</td>
    </tr>
    <tr>
      <td><code>href</code></td>
      <td>The url designated for retrieving the subscriber record via the REST API.</td>
    </tr>
    <tr>
      <td><code>user_id</code></td>
      <td>A unique identifier for the user in your database, such as a primary key.</td>
    </tr>
    <tr>
      <td><code>base_lead_score</code></td>
      <td>An Integer specifying the starting value for lead score calculation for this subscriber. Defaults to <code>30</code>.</td>
    </tr>
    <tr>
      <td><code>links</code></td>
      <td>An object containing the REST API URL for the account.</td>
    </tr>
  </tbody>
</table>
<h2 id='create-or-update-a-subscriber'>Create or update a subscriber</h2>
<blockquote>
<p>To create or update a subscriber:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/subscribers"</span> <span class="se">\</span>
-H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
-H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
-u YOUR_API_KEY: <span class="se">\</span>
-d @- <span class="sh">&lt;&lt; EOF
{
  "subscribers": [{
    "email": "john@acme.com",
    "time_zone": "America/Los_Angeles",
    "custom_fields": {
      "shirt_size": "Medium"
    }
  }]
}
EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">subscriber_email</span> <span class="o">=</span> <span class="s2">"john@acme.com"</span>
<span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">time_zone: </span><span class="s2">"America/Los_Angeles"</span><span class="p">,</span>
  <span class="ss">custom_fields: </span><span class="p">{</span>
    <span class="ss">shirt_size: </span><span class="s2">"Medium"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">create_or_update_subscriber</span><span class="p">(</span><span class="n">subscriber_email</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"subscribers"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">subscribers</span><span class="p">:</span> <span class="p">[{</span>
    <span class="na">email</span><span class="p">:</span> <span class="s2">"john@acme.com"</span><span class="p">,</span>
    <span class="na">time_zone</span><span class="p">:</span> <span class="s2">"America/Los_Angeles"</span><span class="p">,</span>
    <span class="na">custom_fields</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">shirt_size</span><span class="p">:</span> <span class="s2">"Medium"</span>
    <span class="p">}</span>
  <span class="p">}]</span>
<span class="p">};</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">createUpdateSubscriber</span><span class="p">(</span><span class="nx">payload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">subscribers</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">object.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"subscribers"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/subscribers</code></p>

<p>If you need to create or update a collection of subscribers at once, use our <a href="/">batch API</a> instead.</p>
<h3 id='arguments'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>email</code></td>
      <td>Optional. The subscriber's email address. Either <code>email</code> or <code>id</code> or <code>visitor_uuid</code> must be included.</td>
    </tr>
    <tr>
      <td><code>id</code></td>
      <td>Optional. The subscriber's Drip <code>id</code>. Either <code>email</code> or <code>id</code> or <code>visitor_uuid</code> must be included.</td>
    </tr>
    <tr>
      <td><code>visitor_uuid</code></td>
      <td>Optional. The <code>uuid</code> for a subscriber's visitor record. Either <code>email</code> or <code>id</code> or <code>visitor_uuid</code> must be included.</td>
    </tr>
    <tr>
      <td><code>new_email</code></td>
      <td>Optional. A new email address for the subscriber. If provided and a subscriber with the <code>email</code> above does not exist, this address will be used to create a new subscriber.</td>
    </tr>
    <tr>
      <td><code>first_name</code></td>
      <td>Optional. The subscriber's first name.</td>
    </tr>
    <tr>
      <td><code>last_name</code></td>
      <td>Optional. The subscriber's last name.</td>
    </tr>
    <tr>
      <td><code>address1</code></td>
      <td>Optional. The subscriber's mailing address.</td>
    </tr>
    <tr>
      <td><code>address2</code></td>
      <td>Optional. An additional field for the subscribers's mailing address.</td>
    </tr>
    <tr>
      <td><code>city</code></td>
      <td>Optional. The city, town, or village in which the subscriber resides.</td>
    </tr>
    <tr>
      <td><code>state</code></td>
      <td>Optional. The region in which the subscriber resides. Typically a province, a state, or a prefecture.</td>
    </tr>
    <tr>
      <td><code>zip</code></td>
      <td>Optional. The postal code in which the subscriber resides, also known as zip, postcode, Eircode, etc.</td>
    </tr>
    <tr>
      <td><code>country</code></td>
      <td>Optional. The country in which the subscriber resides.</td>
    </tr>
    <tr>
      <td><code>phone</code></td>
      <td>Optional. The subscriber's primary phone number.</td>
    </tr>
    <tr>
      <td><code>user_id</code></td>
      <td>Optional. A unique identifier for the user in your database, such as a primary key.</td>
    </tr>
    <tr>
      <td><code>time_zone</code></td>
      <td>Optional. The subscriber's time zone (in Olson format). Defaults to <code>Etc/UTC</code></td>
    </tr>
    <tr>
      <td><code>lifetime_value</code></td>
      <td>Optional. The lifetime value of the subscriber (in cents).</td>
    </tr>
    <tr>
      <td><code>ip_address</code></td>
      <td>Optional. The subscriber's ip address E.g. <code>"111.111.111.11"</code></td>
    </tr>
    <tr>
      <td><code>custom_fields</code></td>
      <td>Optional. An Object containing custom field data. E.g. <code>{ "shirt_size": "Medium" }</code>.</td>
    </tr>
    <tr>
      <td><code>tags</code></td>
      <td>Optional. An Array containing one or more tags. E.g. <code>["Customer", "SEO"]</code>.</td>
    </tr>
    <tr>
      <td><code>remove_tags</code></td>
      <td>Optional. An Array containing one or more tags to be removed from the subscriber. E.g. <code>["Customer", "SEO"]</code>.</td>
    </tr>
    <tr>
      <td><code>prospect</code></td>
      <td>Optional. A Boolean specifiying whether we should attach a lead score to the subscriber (when lead scoring is enabled). Defaults to <code>true</code>.
        <strong>Note:</strong> This flag used to be called <code>potential_lead</code>, which we will continue to accept for backwards compatibility.</td>
    </tr>
    <tr>
      <td><code>base_lead_score</code></td>
      <td>Optional. An Integer specifying the starting value for lead score calculation for this subscriber. Defaults to <code>30</code>.</td>
    </tr>
    <tr>
      <td><code>eu_consent</code></td>
      <td>Optional. A String specifying whether the subscriber <code>granted</code> or <code>denied</code> GDPR consent.</td>
    </tr>
    <tr>
      <td><code>eu_consent_message</code></td>
      <td>Optional. A String containing the message the subscriber granted or denied their consent to.</td>
    </tr>
  </tbody>
</table>
<h2 id='list-all-subscribers'>List all subscribers</h2>
<blockquote>
<p>To list subscribers:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/subscribers"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">subscribers</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"subscribers"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="s2">"active"</span><span class="p">,</span> <span class="na">subscribed_before</span><span class="p">:</span> <span class="s2">"2017-01-01T00:00:00Z"</span> <span class="p">};</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">listSubscribers</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">subscribers</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">subscriber</span><span class="w"> </span><span class="err">objects.</span><span class="w">
</span><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">meta</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">contains</span><span class="w"> </span><span class="err">pagination</span><span class="w"> </span><span class="err">information.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"subscribers"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-2'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/subscribers</code></p>
<h3 id='arguments-2'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>status</code></td>
      <td>Optional. Filter by one of the following statuses: <code>all</code>, <code>active</code>, <code>unsubscribed</code>, <code>active_or_unsubscribed</code> or <code>undeliverable</code>. Defaults to <code>active</code>.</td>
    </tr>

    <tr>
      <td><code>tags</code></td>
      <td>Optional. A comma separated list of tags. When included, returns only subscribers who have at least one of the listed tags.</td>
    </tr>

    <tr>
      <td><code>subscribed_before</code></td>
      <td>Optional. A <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO-8601</a> datetime. When included, returns only subscribers who were created before the date. Eg. <code>"2017-01-01T00:00:00Z"</code></td>
    </tr>

    <tr>
      <td><code>subscribed_after</code></td>
      <td>Optional. A <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO-8601</a> datetime. When included, returns only subscribers who were created after the date. Eg. <code>"2016-01-01T00:00:00Z"</code></td>
    </tr>

    <tr>
      <td><code>page</code></td>
      <td>Optional. The page number. Defaults to <code>1</code>.</td>
    </tr>

    <tr>
      <td><code>per_page</code></td>
      <td>Optional. The number of records to be returned on each page. Defaults to <code>100</code>. Maximum <code>1000</code>.</td>
    </tr>
  </tbody>
</table>
<h2 id='fetch-a-subscriber'>Fetch a subscriber</h2>
<blockquote>
<p>To fetch a subscriber:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/subscribers/ID_OR_EMAIL_OR_VISITOR_UUID"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">subscriber_email</span> <span class="o">=</span> <span class="s2">"john@acme.com"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">subscriber</span><span class="p">(</span><span class="n">subscriber_email</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"subscribers"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">idOrEmail</span> <span class="o">=</span> <span class="s2">"someone@example.com"</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">fetchSubscriber</span><span class="p">(</span><span class="nx">idOrEmail</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">subscribers</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">object.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"subscribers"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-3'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/subscribers/:id_or_email_or_visitor_uuid</code></p>
<h3 id='arguments-3'>Arguments</h3>
<p>None.</p>
<h2 id='remove-a-subscriber-from-one-or-all-campaigns'>Remove a subscriber from one or all campaigns</h2>
<blockquote>
<p>To remove a subscriber from all campaigns:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/subscribers/ID_OR_EMAIL/remove"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="c1">##</span>
<span class="c1"># To remove a subscriber from all campaigns:</span>
<span class="c1">##</span>

<span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">subscriber_email</span> <span class="o">=</span> <span class="s2">"john@acme.com"</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">unsubscribe</span><span class="p">(</span><span class="n">subscriber_email</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"subscribers"</span><span class="p">]</span>
<span class="k">end</span>

<span class="c1">##</span>
<span class="c1"># To remove a subscriber from a specific campaign:</span>
<span class="c1">##</span>

<span class="n">subscriber_email</span> <span class="o">=</span> <span class="s2">"john@acme.com"</span>
<span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">campaign_id: </span><span class="mi">9999999</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">unsubscribe</span><span class="p">(</span><span class="n">subscriber_email</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"subscribers"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">idOrEmail</span> <span class="o">=</span> <span class="s2">"someone@example.com"</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">campaignId</span> <span class="o">=</span> <span class="mi">9998888</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">unsubscribeFromCampaign</span><span class="p">(</span><span class="nx">idOrEmail</span><span class="p">,</span> <span class="nx">campaignId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>To remove a subscriber from a specific campaign:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/subscribers/ID_OR_EMAIL/remove?campaign_id=CAMPAIGN_ID"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">subscribers</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">object.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"subscribers"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-4'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/subscribers/:id_or_email/remove</code></p>

<p>This endpoint was previously labeled <code>unsubscribe</code>.</p>
<h3 id='arguments-4'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>campaign_id</code></td>
      <td>Optional. The campaign from which to remove the subscriber. Defaults to all.</td>
    </tr>
  </tbody>
</table>
<h2 id='unsubscribe-from-all-mailings'>Unsubscribe from all mailings</h2>
<blockquote>
<p>To unsubscribe a subscriber from all mailings:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/subscribers/ID_OR_EMAIL/unsubscribe_all"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">subscriber_email</span> <span class="o">=</span> <span class="s2">"john@acme.com"</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">unsubscribe_from_all</span><span class="p">(</span><span class="n">subscriber_email</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"subscribers"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">idOrEmail</span> <span class="o">=</span> <span class="s2">"someone@example.com"</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">unsubscribeFromAllMailings</span><span class="p">(</span><span class="nx">idOrEmail</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">subscribers</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">object.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"subscribers"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-5'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/subscribers/:id_or_email/unsubscribe_all</code></p>
<h3 id='arguments-5'>Arguments</h3>
<p>None.</p>
<h2 id='delete-a-subscriber'>Delete a subscriber</h2>
<blockquote>
<p>To delete a subscriber:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X DELETE <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/subscribers/ID_OR_EMAIL"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">subscriber_email</span> <span class="o">=</span> <span class="s2">"john@acme.com"</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">delete_subscriber</span><span class="p">(</span><span class="n">subscriber_email</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">idOrEmail</span> <span class="o">=</span> <span class="s2">"someone@example.com"</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">deleteSubscriber</span><span class="p">(</span><span class="nx">idOrEmail</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Responds with <code>204 No Content</code> if successful.</p>
</blockquote>
<h3 id='http-endpoint-6'>HTTP Endpoint</h3>
<p><code>DELETE /:account_id/subscribers/:id_or_email</code></p>
<h3 id='arguments-6'>Arguments</h3>
<p>None.</p>
<h1 id='tags'>Tags</h1><h2 id='list-all-tags-used-in-an-account'>List all tags used in an account</h2>
<blockquote>
<p>To list all tags:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/tags"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">tags</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"tags"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">listAllTags</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"Customer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"SEO"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Properties</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>email</code></td>
      <td>The subscriber's email address.</td>
    </tr>
    <tr>
      <td><code>tag</code></td>
      <td>The String tag to apply. E.g. "Customer".</td>
    </tr>
  </tbody>
</table>
<h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/tags</code></p>
<h3 id='arguments'>Arguments</h3>
<p>None.</p>
<h2 id='apply-a-tag-to-a-subscriber'>Apply a tag to a subscriber</h2>
<blockquote>
<p>To apply a tag to a specific subscriber:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/tags"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "tags": [{
      "email": "john@acme.com",
      "tag": "Customer"
    }]
  }
  EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">subscriber_email</span> <span class="o">=</span> <span class="s2">"john@acme.com"</span>
<span class="n">tag</span> <span class="o">=</span> <span class="s2">"Customer"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">apply_tag</span><span class="p">(</span><span class="n">subscriber_email</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">tags</span><span class="p">:</span> <span class="p">[{</span>
    <span class="na">email</span><span class="p">:</span> <span class="s2">"john@acme.com"</span><span class="p">,</span>
    <span class="na">tag</span><span class="p">:</span> <span class="s2">"Customer"</span>
  <span class="p">}]</span>
<span class="p">};</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">tagSubscriber</span><span class="p">(</span><span class="nx">payload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Responds with a <code>201 Created</code> and an empty JSON response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-2'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/tags</code></p>
<h3 id='arguments-2'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>email</code></td>
      <td>The subscriber's email address.</td>
    </tr>
    <tr>
      <td><code>tag</code></td>
      <td>The String tag to apply. E.g. "Customer"</td>
    </tr>
  </tbody>
</table>
<h2 id='remove-a-tag-from-a-subscriber'>Remove a tag from a subscriber</h2>
<blockquote>
<p>To apply a tag to a specific subscriber:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X DELETE <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/subscribers/ID_OR_EMAIL/tags/TAG"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">subscriber_email</span> <span class="o">=</span> <span class="s2">"john@acme.com"</span>
<span class="n">tag</span> <span class="o">=</span> <span class="s2">"Customer"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">remove_tag</span><span class="p">(</span><span class="n">subscriber_email</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">email</span> <span class="o">=</span> <span class="s2">"john@acme.com"</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">tag</span> <span class="o">=</span> <span class="s2">"Customer"</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">removeSubscriberTag</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="nx">tag</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Responds with a <code>204 No Content</code> if successful.</p>
</blockquote>
<h3 id='http-endpoint-3'>HTTP Endpoint</h3>
<p><code>DELETE /:account_id/subscribers/:email/tags/:tag</code></p>
<h3 id='arguments-3'>Arguments</h3>
<p>None.</p>
<h1 id='users'>Users</h1>
<blockquote>
<p>Users are represented as follows:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@acme.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"time_zone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='fetch-the-authenticated-user'>Fetch the authenticated user</h2>
<blockquote>
<p>To fetch the current user:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/user"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">fetchUser</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"users"</span><span class="p">:[{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@acme.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time_zone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>GET /v2/user</code></p>
<h3 id='arguments'>Arguments</h3>
<p>None.</p>
<h1 id='workflows'>Workflows</h1>
<blockquote>
<p>Workflows are represented as follows:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/9999999/workflows/123456"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Main Funnel"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-07-01T10:00:00Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>All responses containing workflow data also include the following top-level link data:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"workflows.account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/accounts/{workflows.account}"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Properties</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>id</code></td>
      <td>A read-only Drip generated unique id used to identify each workflow record.</td>
    </tr>
    <tr>
      <td><code>href</code></td>
      <td>The url designated for retrieving the workflow record via the REST API.</td>
    </tr>
    <tr>
      <td><code>name</code></td>
      <td>The name assigned to the workflow.</td>
    </tr>
    <tr>
      <td><code>status</code></td>
      <td>The workflow's status whether <code>draft</code>, <code>active</code>, or <code>paused</code>.</td>
    </tr>
    <tr>
      <td><code>created_at</code></td>
      <td>A timestamp representing when the workflow record was first created.</td>
    </tr>
    <tr>
      <td><code>links</code></td>
      <td>An object containing the REST API URL for the account.</td>
    </tr>
  </tbody>
</table>
<h2 id='list-all-workflows'>List all workflows</h2>
<blockquote>
<p>To list all workflows:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/workflows"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">workflows</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"workflows"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="s2">"active"</span> <span class="p">};</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">listAllWorkflows</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">workflows</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">workflow</span><span class="w"> </span><span class="err">objects.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sort"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sort_order"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"desc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"workflows"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/workflows</code></p>
<h3 id='arguments'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>status</code></td>
      <td>Optional. Filter by one of the following statuses: <code>draft</code>, <code>active</code>, or <code>paused</code>. Defaults to <code>all</code>.</td>
    </tr>
    <tr>
      <td><code>sort</code></td>
      <td>Optional. Sort results by one of these fields: <code>created_at</code> or <code>name</code>. Defaults to <code>created_at</code>.</td>
    </tr>
    <tr>
      <td><code>direction</code></td>
      <td>Optional. Filter sort direction with: <code>asc</code> or <code>desc</code>. Defaults to <code>asc</code>.</td>
    </tr>
  </tbody>
</table>
<h2 id='fetch-a-workflow'>Fetch a workflow</h2>
<blockquote>
<p>To fetch a workflow:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/workflows/WORKFLOW_ID"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">workflow_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">workflow</span><span class="p">(</span><span class="n">workflow_id</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"workflows"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">workflowId</span> <span class="o">=</span> <span class="mi">222333</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">fetchWorkflow</span><span class="p">(</span><span class="nx">workflowId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">workflows</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">workflow</span><span class="w"> </span><span class="err">object.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"workflows"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-2'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/workflows/:workflow_id</code></p>
<h3 id='arguments-2'>Arguments</h3>
<p>None.</p>
<h2 id='activate-a-workflow'>Activate a workflow</h2>
<blockquote>
<p>To activate a workflow:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/workflows/WORKFLOW_ID/activate"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">workflow_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">activate_workflow</span><span class="p">(</span><span class="n">workflow_id</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">workflowId</span> <span class="o">=</span> <span class="mi">222333</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">activateWorkflow</span><span class="p">(</span><span class="nx">workflowId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Responds with a <code>204 No Content</code> if successful.</p>
</blockquote>
<h3 id='http-endpoint-3'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/workflows/:workflow_id/activate</code></p>
<h3 id='arguments-3'>Arguments</h3>
<p>None.</p>
<h2 id='pause-a-workflow'>Pause a workflow</h2>
<blockquote>
<p>To pause a workflow:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/workflows/WORKFLOW_ID/pause"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">workflow_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">pause_workflow</span><span class="p">(</span><span class="n">workflow_id</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">workflowId</span> <span class="o">=</span> <span class="mi">222333</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">pauseWorkflow</span><span class="p">(</span><span class="nx">workflowId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Responds with a <code>204 No Content</code> if successful.</p>
</blockquote>
<h3 id='http-endpoint-4'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/workflows/:workflow_id/pause</code></p>
<h3 id='arguments-4'>Arguments</h3>
<p>None.</p>
<h2 id='start-someone-on-a-workflow'>Start someone on a workflow</h2>
<blockquote>
<p>To start a someone on a workflow:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/workflows/WORKFLOW_ID/subscribers"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "subscribers": [{
      "email": "john@acme.com",
      "time_zone": "America/Los_Angeles",
      "custom_fields": {
        "shirt_size": "Medium"
      }
    }]
  }
  EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">workflow_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">email: </span><span class="s2">"john@acme.com"</span><span class="p">,</span>
  <span class="ss">time_zone: </span><span class="s2">"America/Los_Angeles"</span><span class="p">,</span>
  <span class="ss">custom_fields: </span><span class="p">{</span>
    <span class="ss">shirt_size: </span><span class="s2">"Medium"</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">start_subscriber_workflow</span><span class="p">(</span><span class="n">workflow_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"subscribers"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">workflowId</span> <span class="o">=</span> <span class="mi">222333</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">email</span><span class="p">:</span> <span class="s2">"john@acme.com"</span><span class="p">,</span>
  <span class="na">time_zone</span><span class="p">:</span> <span class="s2">"America/Los_Angeles"</span><span class="p">,</span>
  <span class="na">custom_fields</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">shirt_size</span><span class="p">:</span> <span class="s2">"Medium"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">startOnWorkflow</span><span class="p">(</span><span class="nx">workflowId</span><span class="p">,</span> <span class="nx">payload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">subscribers</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">object.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"subscribers"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If the workflow is not active, the subscriber will not be added to the workflow.</p>
<h3 id='http-endpoint-5'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/workflows/:workflow_id/subscribers</code></p>
<h3 id='arguments-5'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>email</code></td>
      <td>Optional. The subscriber's email address. Either <code>email</code> or <code>id</code> must be included.</td>
    </tr>
    <tr>
      <td><code>id</code></td>
      <td>Optional. The subscriber's Drip <code>id</code>. Either <code>email</code> or <code>id</code> must be included.</td>
    </tr>
    <tr>
      <td><code>first_name</code></td>
      <td>Optional. The subscriber's first name.</td>
    </tr>
    <tr>
      <td><code>last_name</code></td>
      <td>Optional. The subscriber's last name.</td>
    </tr>
    <tr>
      <td><code>address1</code></td>
      <td>Optional. The subscriber's mailing address.</td>
    </tr>
    <tr>
      <td><code>address2</code></td>
      <td>Optional. An additional field for the subscribers's mailing address.</td>
    </tr>
    <tr>
      <td><code>city</code></td>
      <td>Optional. The city, town, or village in which the subscriber resides.</td>
    </tr>
    <tr>
      <td><code>state</code></td>
      <td>Optional. The region in which the subscriber resides. Typically a province, a state, or a prefecture.</td>
    </tr>
    <tr>
      <td><code>zip</code></td>
      <td>Optional. The postal code in which the subscriber resides, also known as zip, postcode, Eircode, etc.</td>
    </tr>
    <tr>
      <td><code>country</code></td>
      <td>Optional. The country in which the subscriber resides.</td>
    </tr>
    <tr>
      <td><code>phone</code></td>
      <td>Optional. The subscriber's primary phone number.</td>
    </tr>
    <tr>
      <td><code>user_id</code></td>
      <td>Optional. A unique identifier for the user in your database, such as a primary key.</td>
    </tr>
    <tr>
      <td><code>time_zone</code></td>
      <td>Optional. The subscriber's time zone (in Olson format). Defaults to <code>Etc/UTC</code></td>
    </tr>
    <tr>
      <td><code>custom_fields</code></td>
      <td>Optional. An Object containing custom field data. E.g. <code>{ "shirt_size": "Medium" }</code>.</td>
    </tr>
    <tr>
      <td><code>tags</code></td>
      <td>Optional. An Array containing one or more tags. E.g. <code>["Customer", "SEO"]</code>.</td>
    </tr>
    <tr>
      <td><code>prospect</code></td>
      <td>Optional. A Boolean specifiying whether we should attach a lead score to the subscriber (when lead scoring is enabled). Defaults to <code>true</code>.
        <strong>Note:</strong> This flag used to be called <code>potential_lead</code>, which we will continue to accept for backwards compatibility.</td>
    </tr>
    <tr>
      <td><code>eu_consent</code></td>
      <td>Optional. A String specifying whether the subscriber <code>granted</code> or <code>denied</code> GDPR consent.</td>
    </tr>
    <tr>
      <td><code>eu_consent_message</code></td>
      <td>Optional. A String containing the message the subscriber granted or denied their consent to.</td>
    </tr>
  </tbody>
</table>
<h2 id='remove-a-subscriber-from-a-workflow'>Remove a subscriber from a workflow</h2>
<blockquote>
<p>To remove someone from a workflow:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X DELETE <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/workflows/WORKFLOW_ID/subscribers/ID_OR_EMAIL"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">workflow_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">subscriber_email</span> <span class="o">=</span> <span class="s2">"john@acme.com"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">remove_subscriber_workflow</span><span class="p">(</span><span class="n">workflow_id</span><span class="p">,</span> <span class="n">subscriber_email</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">workflowId</span> <span class="o">=</span> <span class="mi">222333</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">idOrEmail</span> <span class="o">=</span> <span class="s2">"someone@example.com"</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">removeFromWorkflow</span><span class="p">(</span><span class="nx">workflowId</span><span class="p">,</span> <span class="nx">idOrEmail</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Responds with a <code>204 No Content</code> if successful.</p>
</blockquote>

<p>If the subscriber is not already on the workflow, nothing will happen.</p>
<h3 id='http-endpoint-6'>HTTP Endpoint</h3>
<p><code>DELETE /:account_id/workflows/:workflow_id/subscribers/:id_or_email</code></p>
<h3 id='arguments-6'>Arguments</h3>
<p>None.</p>
<h2 id='list-all-workflow-triggers'>List all workflow triggers</h2>
<blockquote>
<p>To list all triggers on a workflow:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/workflows/WORKFLOW_ID/triggers"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">workflow_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">workflow_triggers</span><span class="p">(</span><span class="n">workflow_id</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"triggers"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">workflowId</span> <span class="o">=</span> <span class="mi">222333</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">listTriggers</span><span class="p">(</span><span class="nx">workflowId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"triggers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f7gysdf7gyd7"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trigger"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"trigger_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"submitted_landing_page"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"leadpages"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"landing_page"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Landing Page"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"actions_required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"configure_provider"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Configure your LeadPages connection"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-7'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/workflows/:workflow_id/triggers</code></p>
<h3 id='arguments-7'>Arguments</h3>
<p>None.</p>
<h2 id='create-a-workflow-trigger'>Create a workflow trigger</h2>
<blockquote>
<p>To create a workflow trigger:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/workflows/WORKFLOW_ID/triggers"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "triggers": [
      {
        "provider": "leadpages",
        "trigger_type": "submitted_landing_page",
        "properties": {
          "landing_page": "My Landing Page"
        }
      }
    ]
  }
  EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">workflow_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">provider: </span><span class="s2">"leadpages"</span><span class="p">,</span>
  <span class="ss">trigger_type: </span><span class="s2">"submitted_landing_page"</span><span class="p">,</span>
  <span class="ss">properties: </span><span class="p">{</span>
    <span class="ss">landing_page: </span><span class="s2">"My Landing Page"</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">create_workflow_trigger</span><span class="p">(</span><span class="n">workflow_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"triggers"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">workflowId</span> <span class="o">=</span> <span class="mi">222333</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">provider</span><span class="p">:</span> <span class="s2">"leadpages"</span><span class="p">,</span>
  <span class="na">trigger_type</span><span class="p">:</span> <span class="s2">"submitted_landing_page"</span><span class="p">,</span>
  <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">landing_page</span><span class="p">:</span> <span class="s2">"My Landing Page"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">createTrigger</span><span class="p">(</span><span class="nx">workflowId</span><span class="p">,</span> <span class="nx">payload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"triggers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f7gysdf7gyd7"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trigger"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"leadpages"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"trigger_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"submitted_landing_page"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"landing_page"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Landing Page"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"actions_required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"configure_provider"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Configure your LeadPages connection"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-8'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/workflows/:workflow_id/triggers</code></p>
<h3 id='arguments-8'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>provider</code></td>
      <td>Required. A String indicating a provider.</td>
    </tr>
    <tr>
      <td><code>trigger_type</code></td>
      <td>Required. A String indicating the automation trigger type.</td>
    </tr>
    <tr>
      <td><code>properties</code></td>
      <td>Optional. An Object containing properties for the given trigger.</td>
    </tr>
  </tbody>
</table>
<h2 id='update-a-workflow-trigger'>Update a workflow trigger</h2>
<blockquote>
<p>To update a workflow trigger:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/workflows/WORKFLOW_ID/triggers/TRIGGER_ID"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "triggers": [
      {
        "provider": "leadpages",
        "trigger_type": "submitted_landing_page",
        "properties": {
          "landing_page": "My Landing Page"
        }
      }
    ]
  }
  EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">workflow_id</span> <span class="o">=</span> <span class="mi">9999999</span>
<span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">provider: </span><span class="s2">"leadpages"</span><span class="p">,</span>
  <span class="ss">trigger_type: </span><span class="s2">"submitted_landing_page"</span><span class="p">,</span>
  <span class="ss">properties: </span><span class="p">{</span>
    <span class="ss">landing_page: </span><span class="s2">"My Landing Page"</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">update_workflow_trigger</span><span class="p">(</span><span class="n">workflow_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"triggers"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">workflowId</span> <span class="o">=</span> <span class="mi">222333</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">triggerId</span> <span class="o">=</span> <span class="s2">"abc123"</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">provider</span><span class="p">:</span> <span class="s2">"leadpages"</span><span class="p">,</span>
  <span class="na">trigger_type</span><span class="p">:</span> <span class="s2">"submitted_landing_page"</span><span class="p">,</span>
  <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">landing_page</span><span class="p">:</span> <span class="s2">"My Landing Page"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">updateTrigger</span><span class="p">(</span><span class="nx">workflowId</span><span class="p">,</span> <span class="nx">triggerId</span><span class="p">,</span> <span class="nx">payload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"triggers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f7gysdf7gyd7"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trigger"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"leadpages"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"trigger_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"submitted_landing_page"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"landing_page"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Landing Page"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"actions_required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"configure_provider"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Configure your LeadPages connection"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-9'>HTTP Endpoint</h3>
<p><code>PUT /:account_id/workflows/:workflow_id/triggers/:trigger_id</code></p>
<h3 id='arguments-9'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>provider</code></td>
      <td>Required. A String indicating a provider.</td>
    </tr>
    <tr>
      <td><code>trigger_type</code></td>
      <td>Required. A String indicating the automation trigger type.</td>
    </tr>
    <tr>
      <td><code>properties</code></td>
      <td>Optional. An Object containing properties for the given trigger.</td>
    </tr>
  </tbody>
</table>
<h1 id='webhooks'>Webhooks</h1>
<blockquote>
<p>Webhooks are represented as follows:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"77777"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/9999999/webhooks/77777"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"post_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.mysite.com/my-webhook-endpoint"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"include_received_email"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"subscriber.created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber.subscribed_to_campaign"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>All responses containing webhook data also include the following top-level link data:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"webhooks.account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/accounts/{webhooks.account}"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Properties</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>id</code></td>
      <td>A read-only Drip generated unique id used to identify each webhook record.</td>
    </tr>
    <tr>
      <td><code>href</code></td>
      <td>The url designated for retrieving the webhook record via the REST API.</td>
    </tr>
    <tr>
      <td><code>post_url</code></td>
      <td>The url that the webhook will post to.</td>
    </tr>
    <tr>
      <td><code>version</code></td>
      <td>The webhook version. The current stable version is 2.</td>
    </tr>
    <tr>
      <td><code>include_received_email</code></td>
      <td>Returns true if a notification is sent whenever a subscriber receives an email.</td>
    </tr>
    <tr>
      <td><code>created_at</code></td>
      <td>A timestamp representing when the webhook record was first created.</td>
    </tr>
     <tr>
      <td><code>events</code></td>
      <td>An array specifying which events are enabled for webhook notifications.</td>
    </tr>
     <tr>
      <td><code>links</code></td>
      <td>An object containing the REST API URL for the account.</td>
    </tr>
  </tbody>
</table>
<h2 id='list-all-webhooks'>List all webhooks</h2>
<blockquote>
<p>To list all webhooks in an account:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/webhooks"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">webhooks</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"webhooks"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">listWebhooks</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">webhooks</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">webhook</span><span class="w"> </span><span class="err">objects.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"webhooks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/webhooks</code></p>
<h3 id='arguments'>Arguments</h3>
<p>None.</p>
<h2 id='fetch-a-webhook'>Fetch a webhook</h2>
<blockquote>
<p>To fetch a specific webhook:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/webhooks/WEBHOOK_ID"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">webhook_id</span> <span class="o">=</span> <span class="mi">999999</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">webhook</span><span class="p">(</span><span class="n">webhook_id</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"webhooks"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">webhookId</span> <span class="o">=</span> <span class="mi">111222</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">fetchWebhook</span><span class="p">(</span><span class="nx">webhookId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>The response looks like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">webhooks</span><span class="w"> </span><span class="err">property</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">webhook</span><span class="w"> </span><span class="err">object.</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"webhooks"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-2'>HTTP Endpoint</h3>
<p><code>GET /v2/:account_id/webhooks/:webhook_id</code></p>
<h3 id='arguments-2'>Arguments</h3>
<p>None.</p>
<h2 id='create-a-new-webhook'>Create a new webhook</h2>
<blockquote>
<p>To create a webhook:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/webhooks"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "webhooks": [{
      "post_url": "http://www.mysite.com/my-webhook-endpoint",
      "events": [
        "subscriber.created",
        "subscriber.subscribed_to_campaign"
      ]
    }]
  }
  EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">pot_url</span> <span class="o">=</span> <span class="s2">"https://www.mylistener.com/receieve"</span>
<span class="n">include_received_email</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">events</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s2">"subscriber.created"</span><span class="p">,</span>
  <span class="s2">"subscriber.subscribed_to_campaign"</span>
<span class="p">]</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">create_webhook</span><span class="p">(</span><span class="n">post_url</span><span class="p">,</span> <span class="n">include_received_email</span><span class="p">,</span> <span class="n">events</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">[</span><span class="s2">"webhooks"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">webhooks</span><span class="p">:</span> <span class="p">[{</span>
    <span class="na">post_url</span><span class="p">:</span> <span class="s2">"http://www.mysite.com/my-webhook-endpoint"</span><span class="p">,</span>
    <span class="na">events</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">"subscriber.created"</span><span class="p">,</span>
      <span class="s2">"subscriber.subscribed_to_campaign"</span>
    <span class="p">]</span>
  <span class="p">}]</span>
<span class="p">}</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">createWebhook</span><span class="p">(</span><span class="nx">payload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Responds with a <code>201 Created</code> like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"webhooks"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"77777"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.getdrip.com/v2/9999999/webhooks/77777"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"post_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.example.com/api/v2/form"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"include_received_email"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"subscriber.created"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subscriber.subscribed_to_campaign"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint-3'>HTTP Endpoint</h3>
<p><code>POST /v2/:account_id/webhooks</code></p>
<h3 id='arguments-3'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>post_url</code></td>
      <td>The url that the webhook will post to.</td>
    </tr>
    <tr>
      <td><code>include_received_email</code></td>
      <td>Optional. A Boolean specifying whether we should send a notification whenever a subscriber receives an email. Defaults to <code>false</code>.</td>
    </tr>
    <tr>
      <td><code>events</code></td>
      <td>Optional. An Array specifiying which events we should send notifications for. Eligible events can be found in the <a href="#webhook-events">webhooks documentation</a>. By default, we will send notifications for all events except <code>subscrber.received_email</code>.</td>
    </tr>
  </tbody>
</table>
<h2 id='destroy-a-webhook'>Destroy a webhook</h2>
<blockquote>
<p>To destroy an existing webhook:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X DELETE <span class="s2">"https://api.getdrip.com/v2/YOUR_ACCOUNT_ID/webhooks/WEBHOOK_ID"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY:
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">webhook_id</span> <span class="o">=</span> <span class="mi">999999</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">delete_webhook</span><span class="p">(</span><span class="n">webhook_id</span><span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// npm install drip-nodejs --save</span>

<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'drip-nodejs'</span><span class="p">)({</span> <span class="na">token</span><span class="p">:</span> <span class="nx">YOUR_API_KEY</span><span class="p">,</span> <span class="na">accountId</span><span class="p">:</span> <span class="nx">YOUR_ACCOUNT_ID</span> <span class="p">});</span>
<span class="kr">const</span> <span class="nx">webhookId</span> <span class="o">=</span> <span class="mi">111222</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">destroyWebhook</span><span class="p">(</span><span class="nx">webhookId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle `response.body`</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Handle errors</span>
  <span class="p">});</span>
</code></pre>
<blockquote>
<p>Responds with a <code>204 No Content</code> if successful.</p>
</blockquote>
<h3 id='http-endpoint-4'>HTTP Endpoint</h3>
<p><code>DELETE /:account_id/webhooks/:webhook_id</code></p>
<h3 id='arguments-4'>Arguments</h3>
<p>None.</p>
<h1 id='webhook-events'>Webhook Events</h1>
<p><a href="http://en.wikipedia.org/wiki/Webhook">Webhooks</a> allow you to
receive an HTTP POST to the URL(s) of your choosing anytime certain events occur
in your Drip account. All our webhook events contain data serialized as JSON.
If you&#39;d like to be notified (with data) everytime a visitor subscribes,
you&#39;ll want to use webhooks.</p>
<h2 id='setting-up'>Setting Up</h2>
<p>Adding a webhook URL is dead simple. Head over the <a href="https://www.getdrip.com/webhooks">Webhooks</a>
settings page, enter your URL, and hit &quot;Create Webhook&quot;. That&#39;s it!</p>

<p>Because of the potential for high volume, we will not send notifications for
<code>subscriber.received_email</code> events by default. To receive a post every time a subscriber
receives an email, enable these events using the checkbox on the webhook&#39;s settings.</p>

<p>Please note that some webhook endpoints may implement rate limiting, especially for entry-level or free accounts.
We will attempt to re-send webhooks for up to 3 days if they are rate limited.
In addition, you will be notified and your webhook will be temporarily disabled if its endpoint generates any other error for 3 days.</p>
<h2 id='resources'>Resources</h2><h3 id='subscriber'>Subscriber</h3><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"z1togz2hcjrkpp5treip"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@acme.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"custom_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"shirt_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Medium"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Customer"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SEO"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"time_zone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"utc_offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">-440</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
  </span><span class="s2">"ip_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123.123.123.123"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mozilla/5.0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lifetime_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"original_referrer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://google.com/search"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"landing_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.drip.co/landing"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"prospect"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"base_lead_score"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lead_score"</span><span class="p">:</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>An example of the fields you can expect when you see <code>&quot;subscriber&quot;: { ... }</code> is on the right. You may also refer to the Subscribers docs <a href="#subscribers">here</a>.</p>

<p><strong>Properties</strong></p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>event</code></td>
      <td>The webhook notification's event name. For example, <code>subscrber.received_email</code>.</td>
    </tr>
    <tr>
      <td><code>data</code></td>
      <td>An object containing the subscriber's properties. Refer to <a href="#subscribers">Subscribers</a> for what's included in this object.</td>
    </tr>
    <tr>
      <td><code>account_id</code></td>
      <td>The id for the account that sent the notification.</td>
    </tr>
    <tr>
      <td><code>occurred_at</code></td>
      <td>The String time at which the event occurred in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO-8601</a> format.</td>
    </tr>
  </tbody>
</table>
<h2 id='subscriber-created'>subscriber.created</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber is created in your Drip account.</p>
<h2 id='subscriber-deleted'>subscriber.deleted</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.deleted"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber is deleted in your Drip account.</p>
<h2 id='subscriber-marked_as_deliverable'>subscriber.marked_as_deliverable</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.marked_as_deliverable"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"drip"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber transitions from being &quot;undeliverable&quot;
(due to a hard bounce or spam complaint) to being deliverable once again.</p>
<h2 id='subscriber-marked_as_undeliverable'>subscriber.marked_as_undeliverable</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.marked_as_undeliverable"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"drip"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber transitions to being &quot;undeliverable&quot;
due to a hard bounce or spam complaint.</p>
<h2 id='subscriber-subscribed_to_campaign'>subscriber.subscribed_to_campaign</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.subscribed_to_campaign"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"campaign_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"campaign_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email course"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber subscribes to a campaign.</p>
<h2 id='subscriber-removed_from_campaign'>subscriber.removed_from_campaign</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.removed_from_campaign"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"campaign_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"campaign_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email course"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber is removed from a campaign.</p>
<h2 id='subscriber-unsubscribed_from_campaign'>subscriber.unsubscribed_from_campaign</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.unsubscribed_from_campaign"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"campaign_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"campaign_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email course"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber unsubscribes from a campaign.</p>
<h2 id='subscriber-unsubscribed_all'>subscriber.unsubscribed_all</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.unsubscribed_all"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber is unsubscribed from all mailings.</p>
<h2 id='subscriber-reactivated'>subscriber.reactivated</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.reactivated"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscription is reactivated.</p>
<h2 id='subscriber-completed_campaign'>subscriber.completed_campaign</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.completed_campaign"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"campaign_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"campaign_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email course"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber completes a campaign.</p>
<h2 id='subscriber-applied_tag'>subscriber.applied_tag</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.applied_tag"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber is applied a tag.</p>
<h2 id='subscriber-removed_tag'>subscriber.removed_tag</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.removed_tag"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a tag is removed from a subscriber.</p>
<h2 id='subscriber-updated_custom_field'>subscriber.updated_custom_field</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.updated_custom_field"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first_name"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"previous_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"drip"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber&#39;s custom fields are updated.</p>
<h2 id='subscriber-updated_email_address'>subscriber.updated_email_address</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.updated_email_address"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jdoe@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"previous_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"johndoe@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"drip"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber&#39;s email address is updated.</p>
<h2 id='subscriber-updated_lifetime_value'>subscriber.updated_lifetime_value</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.updated_lifetime_value"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"previous_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">9500</span><span class="p">,</span><span class="w">
      </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"drip"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber&#39;s lifetime value is updated.</p>
<h2 id='subscriber-updated_time_zone'>subscriber.updated_time_zone</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.updated_time_zone"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Chicago"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"previous_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber&#39;s time zone is updated.</p>
<h2 id='subscriber-received_email'>subscriber.received_email</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.received_email"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"delivery_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99999"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88888"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email_subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email Course: Day 1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber receives an email.</p>

<p>Note that because of their potentially high volume, notifications for this event are optional. See <a href="#setting-up">Setting up</a> above.</p>
<h2 id='subscriber-opened_email'>subscriber.opened_email</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.opened_email"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"delivery_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99999"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88888"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email_subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email Course: Day 1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber opens an email.</p>
<h2 id='subscriber-clicked_email'>subscriber.clicked_email</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.clicked_email"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"delivery_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99999"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88888"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.89 Safari/537.36"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ip_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"111.111.111.11"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email_subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email Course: Day 1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber clicks a link in an email.</p>
<h2 id='subscriber-bounced'>subscriber.bounced</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.bounced"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"delivery_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99999"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88888"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email_subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email Course: Day 1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when an email to a subscriber bounces.</p>
<h2 id='subscriber-complained'>subscriber.complained</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.complained"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"delivery_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99999"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88888"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email_subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email Course: Day 1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber issues a spam complaint about an email.</p>
<h2 id='subscriber-clicked_trigger_link'>subscriber.clicked_trigger_link</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.clicked_trigger_link"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ip_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"128.1.1.1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"trigger_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">99999999</span><span class="p">,</span><span class="w">
      </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"drip"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8888888"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-15T13:52:25Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber clicks a tracking link.</p>
<h2 id='subscriber-visited_page'>subscriber.visited_page</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.visited_page"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/blog/1234-hello-world"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber visits a page that is configured to trigger a rule.</p>
<h2 id='subscriber-became_lead'>subscriber.became_lead</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.became_lead"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"lead_score"</span><span class="p">:</span><span class="w"> </span><span class="mi">68</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber becomes a lead (i.e. when the subscriber&#39;s
lead score surpasses the threshold set in your lead settings). <strong>This event
only fires when lead scoring is enabled for your account.</strong></p>
<h2 id='subscriber-became_non_prospect'>subscriber.became_non_prospect</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.became_non_prospect"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber becomes a non-prospect (i.e. when
the subscriber is no longer subject to lead scoring). <strong>This event
only fires when lead scoring is enabled for your account.</strong></p>
<h2 id='subscriber-updated_lead_score'>subscriber.updated_lead_score</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.updated_lead_score"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"lead_score"</span><span class="p">:</span><span class="w"> </span><span class="mi">68</span><span class="p">,</span><span class="w">
      </span><span class="s2">"previous_lead_score"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber&#39;s lead score is updated. <strong>This event
only fires when lead scoring is enabled for your account.</strong></p>
<h2 id='subscriber-performed_custom_event'>subscriber.performed_custom_event</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.performed_custom_event"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Signed up for a trial"</span><span class="w">
      </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rock-star"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2999</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a custom event is tracked for a subscriber.</p>
<h2 id='subscriber-updated_alias'>subscriber.updated_alias</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscriber.updated_alias"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriber"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"previous_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"drip"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"occurred_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-06-21T10:31:58Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This event is triggered when a subscriber&#39;s aliases are updated. <code>user_id</code> is currently the only natively supported alias.</p>
<h1 id='shopper-activity-section'>Shopper Activity Section</h1><h1 id="shopper_activity_overview">Overview</h1>

<p>When selling online, there are many activities your customers (and potential customers) can take. Passing the details of these activities to Drip helps us make you money. We do that by enabling deeper content personalization and providing actionable insights that bring people closer to your brand.</p>
<h1 id='cart-activity'>Cart Activity</h1>
<p>Passing in all required fields for Cart Activity will enable Cart Abandonment Dynamic Content in your Drip account. Leverage that content in our Visual Email Builder to send Cart Abandonment emails containing item details.</p>

<p>Note that Cart Activity will show up on a person&#39;s activity timeline as either a &quot;Created a cart&quot; or &quot;Updated a cart&quot; event. For more information, see our Knowledge Base <a href="https://help.drip.com/hc/en-us/articles/360022922031">here</a>.</p>
<h2 id='create-or-update-a-cart'>Create or update a cart</h2>
<blockquote>
<p>To record a cart event:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v3/YOUR_ACCOUNT_ID/shopper_activity/cart"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "provider": "my_custom_platform",
    "email": "user@gmail.com",
    "action": "created",
    "cart_id": "456445746",
    "occurred_at": "2019-01-17T20:50:00Z",
    "cart_public_id": "#5",
    "grand_total": 16.99,
    "total_discounts": 5.34,
    "currency": "USD",
    "cart_url": "https://mysuperstore.com/cart/456445746",
    "items": [
      {
        "product_id": "B01J4SWO1G",
        "product_variant_id": "B01J4SWO1G-CW-BOTT",
        "sku": "XHB-1234",
        "name": "The Coolest Water Bottle",
        "brand": "Drip",
        "categories": [
          "Accessories"
        ],
        "price": 11.16,
        "quantity": 2,
        "discount": 5.34,
        "total": 16.99,
        "product_url": "https://mysuperstore.com/dp/B01J4SWO1G",
        "image_url": "https://www.getdrip.com/images/example_products/water_bottle.png",
        "product_tag": "Best Seller"
      }
    ]
  }
  EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">create_cart_activity_event</span><span class="p">(</span>
  <span class="ss">provider: </span><span class="s2">"my_custom_platform"</span><span class="p">,</span>
  <span class="ss">email: </span><span class="s2">"user@gmail.com"</span><span class="p">,</span> <span class="c1"># or person_id</span>
  <span class="ss">action: </span><span class="s2">"created"</span><span class="p">,</span>
  <span class="ss">cart_id: </span><span class="s2">"456445746"</span><span class="p">,</span>
  <span class="ss">occurred_at: </span><span class="s2">"2019-01-17T20:50:00Z"</span><span class="p">,</span>
  <span class="ss">cart_public_id: </span><span class="s2">"#5"</span><span class="p">,</span>
  <span class="ss">grand_total: </span><span class="mi">16</span><span class="o">.</span><span class="mi">99</span><span class="p">,</span>
  <span class="ss">total_discounts: </span><span class="mi">5</span><span class="o">.</span><span class="mi">34</span><span class="p">,</span>
  <span class="ss">currency: </span><span class="s2">"USD"</span><span class="p">,</span>
  <span class="ss">cart_url: </span><span class="s2">"https://mysuperstore.example.com/cart/456445746"</span><span class="p">,</span>
  <span class="ss">items: </span><span class="p">[</span>
    <span class="p">{</span>
      <span class="ss">product_id: </span><span class="s2">"B01J4SWO1G"</span><span class="p">,</span>
      <span class="ss">product_variant_id: </span><span class="s2">"B01J4SWO1G-CW-BOTT"</span><span class="p">,</span>
      <span class="ss">sku: </span><span class="s2">"XHB-1234"</span><span class="p">,</span>
      <span class="ss">name: </span><span class="s2">"The Coolest Water Bottle"</span><span class="p">,</span>
      <span class="ss">brand: </span><span class="s2">"Drip"</span><span class="p">,</span>
      <span class="ss">categories: </span><span class="p">[</span>
        <span class="s2">"Accessories"</span>
      <span class="p">],</span>
      <span class="ss">price: </span><span class="mi">11</span><span class="o">.</span><span class="mi">16</span><span class="p">,</span>
      <span class="ss">quantity: </span><span class="mi">2</span><span class="p">,</span>
      <span class="ss">discount: </span><span class="mi">5</span><span class="o">.</span><span class="mi">34</span><span class="p">,</span>
      <span class="ss">total: </span><span class="mi">16</span><span class="o">.</span><span class="mi">99</span><span class="p">,</span>
      <span class="ss">product_url: </span><span class="s2">"https://mysuperstore.com/dp/B01J4SWO1G"</span><span class="p">,</span>
      <span class="ss">image_url: </span><span class="s2">"https://www.getdrip.com/images/example_products/water_bottle.png"</span><span class="p">,</span>
      <span class="ss">product_tag: </span><span class="s2">"Best Seller"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="s2">"Request accepted"</span>
<span class="k">else</span>
  <span class="nb">puts</span> <span class="s2">"Error occurred"</span>
<span class="k">end</span>
</code></pre>
<blockquote>
<p>Responds with a <code>202 Accepted</code> if successful. That means the server accepted the request and queued it for processing. The response includes a unique request_id that can be used to check the status of the request later on:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"request_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"990c99a7-5cba-42e8-8f36-aec3419186ef"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>POST /v3/:account_id/shopper_activity/cart</code></p>
<h3 id='arguments'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>provider</code></td>
      <td>Required. The identifier for the provider from which the order data was received in lower snake cased form. For example, <code>shopify</code> or <code>my_custom_platform</code> or <code>my_store</code>.</td>
    </tr>
    <tr>
      <td><code>person_id</code></td>
      <td>Optional. The unique identifier of a person at Drip. Either <code>person_id</code> or <code>email</code> must be included. If both are included, <code>email</code> is ignored.</td>
    </tr>
    <tr>
      <td><code>email</code></td>
      <td>Optional. The person's email address. Either <code>person_id</code> or <code>email</code> must be included. If both are included, <code>email</code> is ignored.</td>
    </tr>
    <tr>
      <td><code>action</code></td>
      <td>Required. The event's action. For Cart Activity, this can be either <code>created</code> or <code>updated</code>. <code>created</code> will trigger a "Created a Cart" event on a person's timeline. <code>updated</code> will trigger an "Updated a Cart" event.</td>
    </tr>
    <tr>
      <td><code>cart_id</code></td>
      <td>Required. A unique, internal id for the cart (generally the primary key generated by the ecommerce platform).</td>
    </tr>
    <tr>
      <td><code>occurred_at</code></td>
      <td>Optional. The String time at which the order occurred in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> format. Defaults to the current time.</td>
    </tr>
    <tr>
      <td><code>cart_public_id</code></td>
      <td>Optional. A public, customer-facing identifier for the cart. This will be displayed in the Drip UI and should correspond to the identifier a customer might see in their own cart.</td>
    </tr>
    <tr>
      <td><code>grand_total</code></td>
      <td>Optional. The total amount of the cart. This should include any applicable discounts. Defaults to 0.</td>
    </tr>
    <tr>
      <td><code>total_discounts</code></td>
      <td>Optional. The discount on the entire order. Defaults to 0.</td>
    </tr>
    <tr>
      <td><code>currency</code></td>
      <td>Optional. The alphabetic <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217</a> code for the currency of the purchase.</td>
    </tr>
    <tr>
      <td><code>cart_url</code></td>
      <td>Required. A URL that links back to the shoppers cart on your ecommerce platform.</td>
    </tr>
    <tr>
      <td><code>items</code></td>
      <td>
        An Array of objects containing information about specific cart items.
        <br><br>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>product_id</code></td>
              <td>Required. A unique identifier for the product from the <code>provider</code>.</td>
            </tr>
            <tr>
              <td><code>product_variant_id</code></td>
              <td>Optional. If applicable, a unique identifier for the specific product variant from the provider. For example, a t-shirt may have one product_id, but several product_variant_ids for sizes and colors.</td>
            </tr>
            <tr>
              <td><code>sku</code></td>
              <td>Optional. The product SKU.</td>
            </tr>
            <tr>
              <td><code>name</code></td>
              <td>Required. The product name.</td>
            </tr>
            <tr>
              <td><code>brand</code></td>
              <td>Optional. The product's brand, vendor, or manufacturer.</td>
            </tr>
            <tr>
              <td><code>categories</code></td>
              <td>Optional. An array of categories associated with the product (e.g. shoes, vitamins, books, videos).</td>
            </tr>
            <tr>
              <td><code>price</code></td>
              <td>Required. The price of a single product.</td>
            </tr>
            <tr>
              <td><code>quantity</code></td>
              <td>Optional. The quantity of the item ordered. Defaults to 1.</td>
            </tr>
            <tr>
              <td><code>discount</code></td>
              <td>Optional. The discount on the items, taking quantity into account. For example, a $2.66 discount per item would be $5.34 if that item was of quantity 2. Defaults to 0.</td>
            </tr>
            <tr>
              <td><code>total</code></td>
              <td>Optional. The line item total after quantity and discount. Defaults to 0.</td>
            </tr>
            <tr>
              <td><code>product_url</code></td>
              <td>Optional. A URL to the site containing product details.</td>
            </tr>
            <tr>
              <td><code>image_url</code></td>
              <td>Optional. A direct URL to an image of the  product. We recommend using an image type that is supported by modern email clients (e.g. JPEG, GIF, PNG). For best display results, image size should be consistent across all products.</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>

<p>The API will also allow custom attributes to be passed in. These will be exposed within Drip just like <a href="https://help.drip.com/hc/en-us/articles/115003737312-Event-Properties">event properties</a>.</p>

<p>For example, if your platform includes the concept of product tags, you can include a product_tag attribute in the JSON that can be used in a Drip automation or email <a href="https://help.drip.com/hc/en-us/articles/115003737312-Event-Properties#access-properties">via Liquid</a>. You can attach custom attributes either to events or their items.</p>
<h1 id='order-activity'>Order Activity</h1>
<p>Order Activity will show up on a person&#39;s activity timeline as an event. The event is based on the <code>action</code> sent with the order payload. For example, sending <code>placed</code> will result in a &quot;Placed an order&quot; event and sending <code>updated</code> will result in an &quot;Updated an order&quot; event.</p>

<p>Drip will keep a persons Lifetime Value (LTV) up-to-date with their orders. For example, if a customer places an order with a <code>grand_total</code> of $100, their LTV will be incremented by $100. If the order is then updated, paid, or fulfilled with a <code>grand_total</code> value of $105, the customers LTV will increase by $5. If the order is then canceled or refunded with a <code>refund_amount</code> of $105, the customers LTV will decrease by $105.</p>
<h2 id='create-or-update-an-order'>Create or update an order</h2>
<p>To update an existing order, include the <code>provider</code> and <code>order_id</code> for that order in the payload.</p>

<blockquote>
<p>To record an order event:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v3/YOUR_ACCOUNT_ID/shopper_activity/order"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "provider": "my_custom_platform",
    "email": "user@gmail.com",
    "action": "placed",
    "occurred_at": "2019-01-17T20:50:00Z",
    "order_id": "456445746",
    "order_public_id": "#5",
    "grand_total": 22.99,
    "total_discounts": 5.34,
    "total_taxes": 1.00,
    "total_fees": 2.00,
    "total_shipping": 5.00,
    "currency": "USD",
    "order_url": "https://mysuperstore.com/order/456445746",
    "items": [
      {
        "product_id": "B01J4SWO1G",
        "product_variant_id": "B01J4SWO1G-CW-BOTT",
        "sku": "XHB-1234",
        "name": "The Coolest Water Bottle",
        "brand": "Drip",
        "categories": [
          "Accessories"
        ],
        "price": 11.16,
        "sale_price": 10.16,
        "quantity": 2,
        "discounts": 5.34,
        "taxes": 1.00,
        "fees": 0.50,
        "shipping": 5.00,
        "total": 23.99,
        "product_url": "https://mysuperstore.com/dp/B01J4SWO1G",
        "image_url": "https://www.getdrip.com/images/example_products/water_bottle.png",
        "product_tag": "Best Seller"
      }
    ],
    "billing_address": {
      "label": "Primary Billing",
      "first_name": "Bill",
      "last_name": "Billington",
      "company": "Bills R US",
      "address_1": "123 Bill St.",
      "address_2": "Apt. B",
      "city": "Billtown",
      "state": "CA",
      "postal_code": "01234",
      "country": "United States",
      "phone": "555-555-5555"
    },
    "shipping_address": {
      "label": "Downtown Office",
      "first_name": "Ship",
      "last_name": "Shipington",
      "company": "Shipping 4 Less",
      "address_1": "123 Ship St.",
      "city": "Shipville",
      "state": "CA",
      "postal_code": "01234",
      "country": "United States",
      "phone": "555-555-5555"
    }
  }
  EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">create_order_activity_event</span><span class="p">(</span>
  <span class="ss">provider: </span><span class="s2">"my_custom_platform"</span><span class="p">,</span>
  <span class="ss">email: </span><span class="s2">"user@gmail.com"</span><span class="p">,</span> <span class="c1"># or person_id</span>
  <span class="ss">action: </span><span class="s2">"placed"</span><span class="p">,</span>
  <span class="ss">occurred_at: </span><span class="s2">"2019-01-17T20:50:00Z"</span><span class="p">,</span>
  <span class="ss">order_id: </span><span class="s2">"456445746"</span><span class="p">,</span>
  <span class="ss">order_public_id: </span><span class="s2">"#5"</span><span class="p">,</span>
  <span class="ss">grand_total: </span><span class="mi">22</span><span class="o">.</span><span class="mi">99</span><span class="p">,</span>
  <span class="ss">total_discounts: </span><span class="mi">5</span><span class="o">.</span><span class="mi">34</span><span class="p">,</span>
  <span class="ss">total_taxes: </span><span class="mi">1</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
  <span class="ss">total_fees: </span><span class="mi">2</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
  <span class="ss">total_shipping: </span><span class="mi">5</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
  <span class="ss">currency: </span><span class="s2">"USD"</span><span class="p">,</span>
  <span class="ss">order_url: </span><span class="s2">"https://mysuperstore.com/order/456445746"</span><span class="p">,</span>
  <span class="ss">items: </span><span class="p">[</span>
    <span class="p">{</span>
      <span class="ss">product_id: </span><span class="s2">"B01J4SWO1G"</span><span class="p">,</span>
      <span class="ss">product_variant_id: </span><span class="s2">"B01J4SWO1G-CW-BOTT"</span><span class="p">,</span>
      <span class="ss">sku: </span><span class="s2">"XHB-1234"</span><span class="p">,</span>
      <span class="ss">name: </span><span class="s2">"The Coolest Water Bottle"</span><span class="p">,</span>
      <span class="ss">brand: </span><span class="s2">"Drip"</span><span class="p">,</span>
      <span class="ss">categories: </span><span class="p">[</span>
        <span class="s2">"Accessories"</span>
      <span class="p">],</span>
      <span class="ss">price: </span><span class="mi">11</span><span class="o">.</span><span class="mi">16</span><span class="p">,</span>
      <span class="ss">sale_price: </span><span class="mi">10</span><span class="o">.</span><span class="mi">16</span><span class="p">,</span>
      <span class="ss">quantity: </span><span class="mi">2</span><span class="p">,</span>
      <span class="ss">discounts: </span><span class="mi">5</span><span class="o">.</span><span class="mi">34</span><span class="p">,</span>
      <span class="ss">taxes: </span><span class="mi">1</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
      <span class="ss">fees: </span><span class="mi">0</span><span class="o">.</span><span class="mi">50</span><span class="p">,</span>
      <span class="ss">shipping: </span><span class="mi">5</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span>
      <span class="ss">total: </span><span class="mi">23</span><span class="o">.</span><span class="mi">99</span><span class="p">,</span>
      <span class="ss">product_url: </span><span class="s2">"https://mysuperstore.com/dp/B01J4SWO1G"</span><span class="p">,</span>
      <span class="ss">image_url: </span><span class="s2">"https://www.getdrip.com/images/example_products/water_bottle.png"</span><span class="p">,</span>
      <span class="ss">product_tag: </span><span class="s2">"Best Seller"</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="ss">billing_address: </span><span class="p">{</span>
    <span class="ss">label: </span><span class="s2">"Primary Billing"</span><span class="p">,</span>
    <span class="ss">first_name: </span><span class="s2">"Bill"</span><span class="p">,</span>
    <span class="ss">last_name: </span><span class="s2">"Billington"</span><span class="p">,</span>
    <span class="ss">company: </span><span class="s2">"Bills R US"</span><span class="p">,</span>
    <span class="ss">address_1: </span><span class="s2">"123 Bill St."</span><span class="p">,</span>
    <span class="ss">address_2: </span><span class="s2">"Apt. B"</span><span class="p">,</span>
    <span class="ss">city: </span><span class="s2">"Billtown"</span><span class="p">,</span>
    <span class="ss">state: </span><span class="s2">"CA"</span><span class="p">,</span>
    <span class="ss">postal_code: </span><span class="s2">"01234"</span><span class="p">,</span>
    <span class="ss">country: </span><span class="s2">"United States"</span><span class="p">,</span>
    <span class="ss">phone: </span><span class="s2">"555-555-5555"</span>
  <span class="p">},</span>
  <span class="ss">shipping_address: </span><span class="p">{</span>
    <span class="ss">label: </span><span class="s2">"Downtown Office"</span><span class="p">,</span>
    <span class="ss">first_name: </span><span class="s2">"Ship"</span><span class="p">,</span>
    <span class="ss">last_name: </span><span class="s2">"Shipington"</span><span class="p">,</span>
    <span class="ss">company: </span><span class="s2">"Shipping 4 Less"</span><span class="p">,</span>
    <span class="ss">address_1: </span><span class="s2">"123 Ship St."</span><span class="p">,</span>
    <span class="ss">city: </span><span class="s2">"Shipville"</span><span class="p">,</span>
    <span class="ss">state: </span><span class="s2">"CA"</span><span class="p">,</span>
    <span class="ss">postal_code: </span><span class="s2">"01234"</span><span class="p">,</span>
    <span class="ss">country: </span><span class="s2">"United States"</span><span class="p">,</span>
    <span class="ss">phone: </span><span class="s2">"555-555-5555"</span>
  <span class="p">}</span>
<span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="s2">"Request accepted"</span>
<span class="k">else</span>
  <span class="nb">puts</span> <span class="s2">"Error occurred"</span>
<span class="k">end</span>
</code></pre>
<blockquote>
<p>Responds with a <code>202 Accepted</code> if successful. That means the server accepted the request and queued it for processing. The response includes a unique request_id that can be used to check the status of the request later on:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"request_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"990c99a7-5cba-42e8-8f36-aec3419186ef"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>POST /v3/:account_id/shopper_activity/order</code></p>
<h3 id='arguments'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>provider</code></td>
      <td>Required. The identifier for the provider from which the order data was received in lower snake cased form. For example, <code>shopify</code> or <code>my_custom_platform</code> or <code>my_store</code>.</td>
    </tr>
    <tr>
      <td><code>person_id</code></td>
      <td>Optional. The unique identifier of a person at Drip. Either <code>person_id</code> or <code>email</code> must be included. If both are included, <code>email</code> is ignored.</td>
    </tr>
    <tr>
      <td><code>email</code></td>
      <td>Optional. The person's email address. Either <code>person_id</code> or <code>email</code> must be included. If both are included, <code>email</code> is ignored.</td>
    </tr>
    <tr>
      <td><code>action</code></td>
      <td>Required. The event's action. For Order Activity, this can be either <code>placed</code>, <code>updated</code>, <code>paid</code>, <code>fulfilled</code>, <code>refunded</code>, or <code>canceled</code>. These actions will result in "Placed an order", "Updated an order", "Paid an order", "Fulfilled an order", "Refunded an order", and "Canceled an order" events on the person's timeline, respectively.
    </tr>
    <tr>
      <td><code>occurred_at</code></td>
      <td>Optional. The String time at which the order occurred in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> format. Defaults to the current time.</td>
    </tr>
    <tr>
      <td><code>order_id</code></td>
      <td>Required. A unique, internal id for the order (generally the primary key generated by the ecommerce platform).</td>
    </tr>
    <tr>
      <td><code>order_public_id</code></td>
      <td>Optional. A public, customer-facing identifier for the order. This will be displayed in the Drip UI and should correspond to the identifier a customer might see in their own order.</td>
    </tr>
    <tr>
      <td><code>grand_total</code></td>
      <td>Optional. The total amount of the order. This should include any applicable discounts. Defaults to 0.</td>
    </tr>
    <tr>
      <td><code>total_discounts</code></td>
      <td>Optional. The discounts on the entire order. Defaults to 0.</td>
    </tr>
    <tr>
      <td><code>total_taxes</code></td>
      <td>Optional. The taxes on the entire order. Defaults to 0.</td>
    </tr>
    <tr>
      <td><code>total_fees</code></td>
      <td>Optional. The fees on the entire order. Defaults to 0.</td>
    </tr>
    <tr>
      <td><code>total_shipping</code></td>
      <td>Optional. The shipping on the entire order. Defaults to 0.</td>
    </tr>
    <tr>
      <td><code>refund_amount</code></td>
      <td>Optional. To adjust a persons lifetime value for a refund or cancelation, set <code>refund_amount</code> to the amount of the refund and leave <code>grand_total</code> unchanged. Defaults to 0.</td>
    </tr>
    <tr>
      <td><code>currency</code></td>
      <td>Optional. The alphabetic <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217</a> code for the currency of the purchase.</td>
    </tr>
    <tr>
      <td><code>order_url</code></td>
      <td>Optional. A URL that links back to the shoppers order on your ecommerce platform.</td>
    </tr>
    <tr>
      <td><code>items</code></td>
      <td>
        An Array of objects containing information about specific order items.
        <br><br>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>product_id</code></td>
              <td>Required. A unique identifier for the product from the <code>provider</code>.</td>
            </tr>
            <tr>
              <td><code>product_variant_id</code></td>
              <td>Optional. If applicable, a unique identifier for the specific product variant from the provider. For example, a t-shirt may have one product_id, but several product_variant_ids for sizes and colors.</td>
            </tr>
            <tr>
              <td><code>sku</code></td>
              <td>Optional. The product SKU.</td>
            </tr>
            <tr>
              <td><code>name</code></td>
              <td>Required. The product name.</td>
            </tr>
            <tr>
              <td><code>brand</code></td>
              <td>Optional. The product's brand, vendor, or manufacturer.</td>
            </tr>
            <tr>
              <td><code>categories</code></td>
              <td>Optional. An array of categories associated with the product (e.g. shoes, vitamins, books, videos).</td>
            </tr>
            <tr>
              <td><code>price</code></td>
              <td>Required. The price of a single product.</td>
            </tr>
            <tr>
              <td><code>quantity</code></td>
              <td>Optional. The quantity of the item ordered. Defaults to 1.</td>
            </tr>
            <tr>
              <td><code>discount</code></td>
              <td>Optional. The discount on the items, taking quantity into account. For example, a $2.66 discount per item would be $5.34 if that item was of quantity 2. Defaults to 0.</td>
            </tr>
            <tr>
              <td><code>taxes</code></td>
              <td>Optional. The taxes on the items, taking quantity into account. For example, a $0.50 taxes per item would be $1.00 if that item was of quantity 2. Defaults to 0.</td>
            </tr>
            <tr>
              <td><code>fees</code></td>
              <td>Optional. Any additional fees on the items, taking quantity into account. For example, a $0.25 fee per item would be $0.50 if that item was of quantity 2. Defaults to 0.</td>
            </tr>
            <tr>
              <td><code>shipping</code></td>
              <td>Optional. The shipping cost on the items, taking quantity into account. For example, $2.50 fee per item would be $5.00 if that item was of quantity 2. Defaults to 0.</td>
            </tr>
            <tr>
              <td><code>total</code></td>
              <td>Optional. The line item total after quantity, discount, taxes, fees, and shipping. Defaults to 0.</td>
            </tr>
            <tr>
              <td><code>product_url</code></td>
              <td>Optional. A URL to the site containing product details.</td>
            </tr>
            <tr>
              <td><code>image_url</code></td>
              <td>Optional. A direct URL to an image of the  product. We recommend using an image type that is supported by modern email clients (e.g. JPEG, GIF, PNG). For best display results, image size should be consistent across all products.</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <td><code>billing_address</code></td>
      <td>
        An object containing billing address information.
        <br><br>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>label</code></td>
              <td>Optional. The label describing the billing address.</td>
            </tr>
            <tr>
              <td><code>first_name</code></td>
              <td>Optional. The first name on the billing address.</td>
            </tr>
            <tr>
              <td><code>last_name</code></td>
              <td>Optional. The last name on the billing address.</td>
            </tr>
            <tr>
              <td><code>company</code></td>
              <td>Optional. The company on the billing address.</td>
            </tr>
            <tr>
              <td><code>address_1</code></td>
              <td>Optional. The billing street address.</td>
            </tr>
            <tr>
              <td><code>address_2</code></td>
              <td>Optional. Additional line of the billing street address.</td>
            </tr>
            <tr>
              <td><code>city</code></td>
              <td>Optional. The billing address city.</td>
            </tr>
            <tr>
              <td><code>state</code></td>
              <td>Optional. The billing address state.</td>
            </tr>
            <tr>
              <td><code>postal_code</code></td>
              <td>Optional. The billing address postal code.</td>
            </tr>
            <tr>
              <td><code>country</code></td>
              <td>Optional. The billing address country.</td>
            </tr>
            <tr>
              <td><code>phone</code></td>
              <td>Optional. The phone number associated with the billing address.</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
    <tr>
      <td><code>shipping_address</code></td>
      <td>
        An object containing shipping address information.
        <br><br>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>label</code></td>
              <td>Optional. The label describing the shipping address.</td>
            </tr>
            <tr>
              <td><code>first_name</code></td>
              <td>Optional. The first name on the shipping address.</td>
            </tr>
            <tr>
              <td><code>last_name</code></td>
              <td>Optional. The last name on the shipping address.</td>
            </tr>
            <tr>
              <td><code>company</code></td>
              <td>Optional. The company on the shipping address.</td>
            </tr>
            <tr>
              <td><code>address_1</code></td>
              <td>Optional. The shipping street address.</td>
            </tr>
            <tr>
              <td><code>address_2</code></td>
              <td>Optional. Additional line of the shipping street address.</td>
            </tr>
            <tr>
              <td><code>city</code></td>
              <td>Optional. The shipping address city.</td>
            </tr>
            <tr>
              <td><code>state</code></td>
              <td>Optional. The shipping address state.</td>
            </tr>
            <tr>
              <td><code>postal_code</code></td>
              <td>Optional. The shipping address postal code.</td>
            </tr>
            <tr>
              <td><code>country</code></td>
              <td>Optional. The shipping address country.</td>
            </tr>
            <tr>
              <td><code>phone</code></td>
              <td>Optional. The phone number associated with the shipping address.</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>

<p>The API will also allow custom attributes to be passed in. These will be exposed within Drip just like <a href="https://help.drip.com/hc/en-us/articles/115003737312-Event-Properties">event properties</a>.</p>

<p>For example, if your platform includes the concept of product tags, you can include a product_tag attribute in the JSON that can be used in a Drip automation or email <a href="https://help.drip.com/hc/en-us/articles/115003737312-Event-Properties#access-properties">via Liquid</a>. You can attach custom attributes either to events or their items.</p>
<h1 id='product-activity'>Product Activity</h1>
<p>Using the Product Activity endpoint will enable product-triggered automations in your Drip account. An example: price drop notifications. Send an email when a product in a customers cart drops in price, encouraging the customer to return and place an order.</p>
<h2 id='create-or-update-a-product'>Create or update a product</h2>
<p>To update an existing product, include the <code>provider</code> and <code>product_id</code> for that order in the payload.</p>

<blockquote>
<p>To record an order event:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.getdrip.com/v3/YOUR_ACCOUNT_ID/shopper_activity/product"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s1">'User-Agent: Your App Name (www.yourapp.com)'</span> <span class="se">\</span>
  -u YOUR_API_KEY: <span class="se">\</span>
  -d @- <span class="sh">&lt;&lt; EOF
  {
    "provider": "my_custom_platform",
    "action": "created",
    "occurred_at": "2019-01-28T12:15:23Z",
    "product_id": "B01J4SWO1G",
    "product_variant_id": "B01J4SWO1G-CW-BOTT",
    "sku": "XHB-1234",
    "name": "The Coolest Water Bottle",
    "brand": "Drip",
    "categories": [
      "Accessories"
    ],
    "price": 11.16,
    "inventory": 42,
    "product_url": "https://mysuperstore.com/dp/B01J4SWO1G",
    "image_url": "https://www.getdrip.com/images/example_products/water_bottle.png"
  }
  EOF
</span></code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'drip'</span>

<span class="n">client</span> <span class="o">=</span> <span class="no">Drip</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"YOUR API KEY"</span>
  <span class="n">c</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"YOUR_ACCOUNT_ID"</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">create_product_activity_event</span><span class="p">(</span>
  <span class="ss">provider: </span><span class="s2">"my_custom_platform"</span><span class="p">,</span>
  <span class="ss">action: </span><span class="s2">"created"</span><span class="p">,</span>
  <span class="ss">occurred_at: </span><span class="s2">"2019-01-28T12:15:23Z"</span><span class="p">,</span>
  <span class="ss">product_id: </span><span class="s2">"B01J4SWO1G"</span><span class="p">,</span>
  <span class="ss">product_variant_id: </span><span class="s2">"B01J4SWO1G-CW-BOTT"</span><span class="p">,</span>
  <span class="ss">sku: </span><span class="s2">"XHB-1234"</span><span class="p">,</span>
  <span class="ss">name: </span><span class="s2">"The Coolest Water Bottle"</span><span class="p">,</span>
  <span class="ss">brand: </span><span class="s2">"Drip"</span><span class="p">,</span>
  <span class="ss">categories: </span><span class="p">[</span>
    <span class="s2">"Accessories"</span>
  <span class="p">],</span>
  <span class="ss">price: </span><span class="mi">11</span><span class="o">.</span><span class="mi">16</span><span class="p">,</span>
  <span class="ss">inventory: </span><span class="mi">42</span><span class="p">,</span>
  <span class="ss">product_url: </span><span class="s2">"https://mysuperstore.example.com/dp/B01J4SWO1G"</span><span class="p">,</span>
  <span class="ss">image_url: </span><span class="s2">"https://www.getdrip.com/images/example_products/water_bottle.png"</span>
<span class="p">)</span>

<span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="nf">success?</span>
  <span class="nb">puts</span> <span class="s2">"Request accepted"</span>
<span class="k">else</span>
  <span class="nb">puts</span> <span class="s2">"Error occurred"</span>
<span class="k">end</span>
</code></pre>
<blockquote>
<p>Responds with a <code>202 Accepted</code> if successful. That means the server accepted the request and queued it for processing. The response includes a unique request_id that can be used to check the status of the request later on:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"request_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"990c99a7-5cba-42e8-8f36-aec3419186ef"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-endpoint'>HTTP Endpoint</h3>
<p><code>POST /v3/:account_id/shopper_activity/product</code></p>
<h3 id='arguments'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>provider</code></td>
      <td>Required. The identifier for the provider from which the product data was received in lower snake cased form. For example, <code>shopify</code> or <code>my_custom_platform</code> or <code>my_store</code>.</td>
    </tr>
    <tr>
      <td><code>action</code></td>
      <td>Required. The event's action. For Product Activity, this can be either <code>created</code>, <code>updated</code> or <code>deleted</code>.
    </tr>
    <tr>
      <td><code>occurred_at</code></td>
      <td>Optional. The String time at which the product activity occurred in <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> format. Defaults to the current time.</td>
    </tr>
    <tr>
      <td><code>product_id</code></td>
      <td>Required. A unique, internal id for the product (generally the primary key generated by the ecommerce platform).</td>
    </tr>
    <tr>
      <td><code>product_variant_id</code></td>
      <td>Optional. If applicable, a unique identifier for the specific product variant from the provider. For example, a t-shirt may have one product_id, but several product_variant_ids for sizes and colors.</td>
    </tr>
    <tr>
      <td><code>sku</code></td>
      <td>Optional. The product SKU.</td>
    </tr>
    <tr>
      <td><code>name</code></td>
      <td>Required. The product name.</td>
    </tr>
    <tr>
      <td><code>brand</code></td>
      <td>Optional. The product's brand, vendor, or manufacturer.</td>
    </tr>
    <tr>
      <td><code>categories</code></td>
      <td>Optional. An array of categories associated with the product (e.g. shoes, vitamins, books, videos).</td>
    </tr>
    <tr>
      <td><code>price</code></td>
      <td>Required. The price of a single product.</td>
    </tr>
    <tr>
      <td><code>inventory</code></td>
      <td>Optional. Integer. The currently available inventory of the product.</td>
    </tr>
    <tr>
      <td><code>product_url</code></td>
      <td>Optional. A URL to the site containing product details.</td>
    </tr>
    <tr>
      <td><code>image_url</code></td>
      <td>Optional. A direct URL to an image of the  product. We recommend using an image type that is supported by modern email clients (e.g. JPEG, GIF, PNG). For best display results, image size should be consistent across all products.</td>
    </tr>
  </tbody>
</table>
<h1 id='js-section'>JS Section</h1><h1 id='getting-started'>Getting Started</h1>
<p>The Drip client library has a number of API methods for performing tasks right from your website, such as manually subscribing users and tracking conversions. This document details everything you can do via our JavaScript API.</p>
<h2 id='installing-your-javascript-snippet'>Installing Your JavaScript Snippet</h2>
<blockquote>
<p>The snippet for your site generally looks something like this:</p>
</blockquote>
<pre class="highlight html tab-html"><code><span class="c">&lt;!-- Drip --&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
  <span class="kd">var</span> <span class="nx">_dcq</span> <span class="o">=</span> <span class="nx">_dcq</span> <span class="o">||</span> <span class="p">[];</span>
  <span class="kd">var</span> <span class="nx">_dcs</span> <span class="o">=</span> <span class="nx">_dcs</span> <span class="o">||</span> <span class="p">{};</span>
  <span class="nx">_dcs</span><span class="p">.</span><span class="nx">account</span> <span class="o">=</span> <span class="s2">`your account id`</span><span class="p">;</span>

  <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">dc</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'script'</span><span class="p">);</span>
    <span class="nx">dc</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">'text/javascript'</span><span class="p">;</span> <span class="nx">dc</span><span class="p">.</span><span class="nx">async</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">dc</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s1">'//tag.getdrip.com/`your account id`.js'</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">'script'</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nx">s</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">dc</span><span class="p">,</span> <span class="nx">s</span><span class="p">);</span>
  <span class="p">})();</span>
<span class="nt">&lt;/script&gt;</span>
<span class="c">&lt;!-- end Drip --&gt;</span>
</code></pre>
<p>To interact with the JavaScript API, you&#39;ll need to have your Drip snippet installed on your website. Each Drip account has a unique snippet that can be found under Settings  Account  Site Setup.</p>
<h2 id='how-to-send-a-js-api-request'>How to Send a JS API Request</h2><pre class="highlight javascript tab-javascript"><code><span class="nx">_dcq</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s2">"methodName"</span><span class="p">,</span> <span class="p">{</span> <span class="na">key</span><span class="p">:</span> <span class="s2">"value"</span><span class="p">,</span> <span class="p">...</span> <span class="p">}]);</span>
</code></pre>
<p>All requests follow the same conventions. If you&#39;ve ever worked with the Google Analytics API, the sematics should look familiar. This is the basis structure of an API request.</p>

<p>API requests are executed asynchronously, so you may safely place then anywhere on the page (even above the Drip snippet).</p>
<h1 id='identifying-visitors'>Identifying Visitors</h1><h2 id='attach-identifying-data-to-visitors'>Attach Identifying Data to Visitors</h2>
<blockquote>
<p>Example identify request with a success callback</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">_dcq</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s2">"identify"</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">email</span><span class="p">:</span> <span class="s2">"john@acme.com"</span><span class="p">,</span>
  <span class="na">first_name</span><span class="p">:</span> <span class="s2">"John"</span><span class="p">,</span>
  <span class="na">tags</span><span class="p">:</span> <span class="p">[</span><span class="s2">"Customer"</span><span class="p">],</span>
  <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Call a method with the response object</span>
    <span class="c1">// Success callback is optional</span>
  <span class="p">}</span>
<span class="p">}]);</span>
</code></pre>
<p>The <code>identify</code> method pushes subscriber data into Drip. If the subscriber is not yet in your account, we will create a new record for them; otherwise, we update their record with the information you pass in. To update a subscriber&#39;s email address, use the <code>new_email</code> property.</p>
<h3 id='properties'>Properties</h3>
<p>The following are treated as special properties. All other data passed in will be added to the subscriber&#39;s custom fields. Keys should be lowercase, with words separated by underscores.</p>

<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>email</code></td>
      <td>The subscriber's email address. Required when identifying new site visitors.</td>
    </tr>
    <tr>
      <td><code>new_email</code></td>
      <td>Optional. Use this to update an existing subscriber's email address</td>
    </tr>
    <tr>
      <td><code>user_id</code></td>
      <td>Optional. A unique identifier for the user in your database, such as a primary key.</td>
    </tr>
    <tr>
      <td><code>tags</code></td>
      <td>Optional. An Array of tags to apply.</td>
    </tr>
    <tr>
      <td><code>remove_tags</code></td>
      <td>Optional. An Array of tags to remove.</td>
    </tr>
    <tr>
      <td><code>prospect</code></td>
      <td>Optional. A Boolean specifying whether we should attach a lead score to the subscriber (when lead scoring is enabled). Defaults to <code>true</code>. <strong>Note</strong>: This flag used to be called <code>potential_lead</code>, which we will continue to accept for backwards compatibility.</td>
    </tr>
    <tr>
      <td><code>eu_consent</code></td>
      <td>Optional. A String specifying whether the subscriber <code>granted</code> or <code>denied</code> GDPR consent.</td>
    </tr>
    <tr>
      <td><code>eu_consent_message</code></td>
      <td>Optional. A String containing the message the subscriber granted or denied their consent to.</td>
    </tr>
    <tr>
      <td><code>success</code></td>
      <td>Optional. A callback function that is executed upon successful completion of the request.</td>
    </tr>
    <tr>
      <td><code>failure</code></td>
      <td>Optional. A callback function that is executed if the request fails.</td>
    </tr>
  </tbody>
</table>
<h3 id='response'>Response</h3>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">success</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="err">visitor_uuid</span><span class="p">:</span><span class="w"> </span><span class="s2">"f627ee608adb01315d1022000ab2058a"</span><span class="p">,</span><span class="w">
  </span><span class="err">anonymous</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The identify request will pass a response object to the <code>success</code> or <code>failure</code> callback functions (if provided) once the call completes.</p>

<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>success</code></td>
      <td>Boolean. True if the call to Drip succeeded.</td>
    </tr>
    <tr>
      <td><code>visitor_uuid</code></td>
      <td>The unique id for the visitor identified.</td>
    </tr>
    <tr>
      <td><code>anonymous</code></td>
      <td>Boolean. False if the visitor is associated with a subscriber.</td>
    </tr>
    <tr>
      <td><code>error</code></td>
      <td>String. Contains an error message if the request failed.</td>
    </tr>
  </tbody>
</table>
<h1 id='tracking-events'>Tracking Events</h1><h2 id='tracking-events-and-conversions-for-subscribers'>Tracking Events and Conversions for subscribers</h2>
<blockquote>
<p>Example track request</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">_dcq</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
  <span class="p">[</span>
    <span class="s2">"track"</span><span class="p">,</span> <span class="s2">"Signed up for a trial"</span><span class="p">,</span>
    <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="mi">2000</span> <span class="p">}</span>
  <span class="p">]</span>
<span class="p">);</span>
</code></pre>
<p>The <code>track</code> method is appropriate when you cannot trigger conversions by URL or you simply wish to record an particular action that the user has taken. The second argument is the name of the <code>action</code> to be recorded. If the <code>action</code> matches the name of a goal, then we will trigger a conversion.</p>
<h3 id='properties'>Properties</h3>
<p>The following are treated as special properties. All other data passed in will be saved as custom event properties.</p>

<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>value</code></td>
      <td>Optional. An Integer value (in cents). If the event triggers a conversion, this will be used as the conversion value. Must be within the range of 0 to 2,147,483,647.</td>
    </tr>
    <tr>
      <td><code>occurred_at</code></td>
      <td>Optional. The String time at which the event occurred in <a href="http://en.wikipedia.org/wiki/ISO_8601" target="_blank">ISO-8601</a> format. Defaults to the current time.</td>
    </tr>
    <tr>
      <td><code>success</code></td>
      <td>Optional. A callback function that is executed upon successful completion of the request.</td>
    </tr>
    <tr>
      <td><code>failure</code></td>
      <td>Optional. A callback function that is executed if the request fails.</td>
    </tr>
  </tbody>
</table>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">success</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="err">visitor_uuid</span><span class="p">:</span><span class="w"> </span><span class="s2">"f627ee608adb01315d1022000ab2058a"</span><span class="p">,</span><span class="w">
  </span><span class="err">anonymous</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='response'>Response</h3>
<p>The track request will return a response object that can be passed into the callback functions.</p>

<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>success</code></td>
      <td>Boolean. True if the call to Drip succeeded.</td>
    </tr>
    <tr>
      <td><code>visitor_uuid</code></td>
      <td>The unique id for the visitor identified.</td>
    </tr>
    <tr>
      <td><code>anonymous</code></td>
      <td>Boolean. False if the visitor is associated with a subscriber.</td>
    </tr>
    <tr>
      <td><code>error</code></td>
      <td>String. Contains an error message if the request failed.</td>
    </tr>
  </tbody>
</table>
<h1 id='tagging-via-query-string'>Tagging via Query String</h1>
<p>You can also tag visitors by appending a <code>dst</code> query string parameter to the URL of a page that has the Drip JavaScript installed. For example, the following URL will tag visitors with <code>Customer</code></p>

<p><code>http://www.mysite.com?dst=Customer</code></p>
<h1 id='campaign-subscriptions'>Campaign Subscriptions</h1><h2 id='subscribe-to-a-campaign'>Subscribe to a Campaign</h2>
<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">_dcq</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
  <span class="p">[</span>
    <span class="s2">"subscribe"</span><span class="p">,</span>
    <span class="p">{</span>
      <span class="na">campaign_id</span><span class="p">:</span> <span class="s2">"9999999"</span><span class="p">,</span>
      <span class="na">fields</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">email</span><span class="p">:</span> <span class="s2">"john@acme.com"</span>
      <span class="p">},</span>
      <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Call a method with the response object</span>
        <span class="c1">// Success callback is optional</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">);</span>
</code></pre>
<p>This method will add a subscriber directly to campaign. If you would like to add a subscriber to your account without subscribing them to a campaign, use an <a href="#identifying-visitors">identify call</a> instead.</p>
<h3 id='arguments'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>campaign_id</code></td>
      <td>Required. The String campaign ID, which can be found on the campaign settings page.</td>
    </tr>
    <tr>
      <td><code>fields</code></td>
      <td>Required. An Object containing the user's data. At minimum, this object must contain an <code>email</code> attribute. If there are any required custom fields, these attributes must also be present.</td>
    </tr>
    <tr>
      <td><code>double_optin</code></td>
      <td>Optional. If <code>true</code>, the double opt-in confirmation email is sent; if <code>false</code>, the confirmation email is skipped. Defaults to the value set on the campaign.</td>
    </tr>
    <tr>
      <td><code>success</code></td>
      <td>Optional. A callback function that is executed upon successful completion of the request.</td>
    </tr>
    <tr>
      <td><code>failure</code></td>
      <td>Optional. A callback function that is executed if the request fails.</td>
    </tr>
  </tbody>
</table>
<h2 id='unsubscribe-a-subscriber'>Unsubscribe a Subscriber</h2>
<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">_dcq</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
  <span class="p">[</span>
    <span class="s2">"unsubscribe"</span><span class="p">,</span>
    <span class="p">{</span>
      <span class="na">campaign_id</span><span class="p">:</span> <span class="s2">"9999999"</span><span class="p">,</span>
      <span class="na">email</span><span class="p">:</span> <span class="s2">"john@acme.com"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">);</span>
</code></pre>
<p>Use this method to unsubscribe a subscriber from one or all of your campaigns.</p>
<h3 id='arguments-2'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>email</code></td>
      <td>Required. The String email address of the subscriber you wish to unsubscribe.</td>
    </tr>
    <tr>
      <td><code>campaign_id</code></td>
      <td>Optional. The String campaign ID, which can be found on the campaign settings page. If not included, the subscriber will be unsubscribed from all campaigns.</td>
    </tr>
    <tr>
      <td><code>success</code></td>
      <td>Optional. A callback function that is executed upon successful completion of the request.</td>
    </tr>
    <tr>
      <td><code>failure</code></td>
      <td>Optional. A callback function that is executed if the request fails.</td>
    </tr>
  </tbody>
</table>
<h1 id='handling-forms'>Handling Forms</h1><h2 id='opening-and-closing-a-form'>Opening and closing a form</h2>
<blockquote>
<p>Example requests</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">_dcq</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s2">"showForm"</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="s2">"9999999"</span> <span class="p">}]);</span>
<span class="nx">_dcq</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s2">"hideForm"</span><span class="p">,</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="s2">"9999999"</span> <span class="p">}]);</span>
</code></pre>
<p>The native Drip form widget can be opened or closed via the JS API.</p>
<h3 id='arguments'>Arguments</h3>
<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>id</code></td>
      <td>Required. The String form ID, which can be found on the form settings page.</td>
    </tr>
    <tr>
      <td><code>showTab</code></td>
      <td>Optional. If <code>true</code>, the teaser tab will show when the form is closed. Defaults to <code>true</code>.</td>
    </tr>
  </tbody>
</table>
<h2 id='form-submission-events'>Form Submission Events</h2>
<blockquote>
<p>Example listener</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"submitted.drip"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ev</span><span class="p">,</span> <span class="nx">data</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>Example Event Data</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"999999"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fields[email]"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@acme.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fields[first_name]"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"form_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"999999"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"page_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Drip :: Email Marketing Automation for Visitors, Trials and Customers"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"submit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Let's do it!"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"time_zone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.getdrip.com/"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"visitor_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f627ee608adb01315d1022000ab2058a"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If jQuery is available on your page, the following events are triggered as the widget is submitted:</p>

<table>
  <thead>
    <tr>
      <th>Event</th>
      <th>Fired when...</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>submitting.drip </code></td>
      <td>a form submit button is clicked.</td>
    </tr>
    <tr>
      <td><code>submitFailed.drip   </code></td>
      <td>a form submission fails.</td>
    </tr>
    <tr>
      <td><code>submitted.drip  </code></td>
      <td>a form submission succeeds.</td>
    </tr>
  </tbody>
</table>

<p>By listening for these events, you can hook your own javascript onto the widget&#39;s actions. Each of the above events carries a data Object with the form&#39;s information.</p>
<h1 id='cdc-section'>CDC Section</h1><h1 id="cdc_overview">Overview</h1>

<p><em>To request this feature be enabled on your account, contact our <a href="mailto:support@drip.com">support team</a>.</em></p>

<p>Custom Dynamic Content allows you to pull data from your system into Drip emails. Your data is then available
via Liquid, allowing you to build super-rich personalized emails augmented with fresh data from your own systems.</p>

<p>Example use cases:</p>

<ul>
<li>Is it going to rain this weekend? Offer your customer an umbrella! Or maybe it&#39;ll be sunny? Show them a hat!</li>
<li>Show up-to-date prices for a flight or ticketed event for which a customer is interested! Drip can pass customer information to your endpoint, and pull in the latest prices.</li>
</ul>
<h2 id='how-it-works'>How it works</h2>
<ol>
<li>You provide a custom API endpoint</li>
<li>You choose the Liquid shortcode</li>
<li>When we render an email, we&#39;ll <code>GET</code> a JSON document from your endpoint</li>
<li>You&#39;ll then have access to that document in Liquid via your <code>my.</code> shortcode</li>
</ol>

<p>See <a href="https://github.com/DripEmail/drip-personalized-weather">Drip Weather</a> as an example endpoint.</p>
<h1 id='api-requirements'>API Requirements</h1><h2 id='endpoint'>Endpoint</h2>
<ul>
<li>Responds to an HTTP GET request</li>
<li>No additional authentication supported beyond the path and query params, e.g. you can set your base URL to something similar to one of:

<ul>
<li><code>https://api.example.com/?token=a7c43be</code></li>
<li><code>https://api.example.com/a7c43be/</code></li>
</ul></li>
</ul>
<h2 id='parameters'>Parameters</h2>
<ul>
<li>Parameters are scoped to an entity, e.g. <code>subscriber</code> or <code>event</code></li>
<li>You&#39;ll specify which fields of these objects you want sent to your endpoint

<ul>
<li>Let us know the <em>exact</em> Custom Field names and Event property names you want us to pass to you via the query string</li>
<li>This limitation (not sending all of them) exists because most HTTP servers enforce a URI length limit, and we&#39;re passing these fields to you via GET in order for them to be highly cacheable, as to optimize for delivery throughput</li>
</ul></li>
<li>Scoped parameters are then named the same as the custom field

<ul>
<li>e.g. A subscriber custom field of <code>first_name</code> would be passed through as <code>subscriber[first_name]</code></li>
<li>e.g. An event field of <code>product_id</code> would be passed through as <code>event[product_id]</code></li>
</ul></li>
<li>The <code>event</code> object is valid only within a Workflow</li>
<li>Parameters will all be passed via the URL query string (we only support <code>GET</code> requests)</li>
<li>There can be default parameters embedded in your endpoint URL

<ul>
<li>We will append our parameters to yours</li>
<li>This is useful for authentication, such as providing <code>?key=12345</code></li>
</ul></li>
<li>Parameters without a value will be sent through as a key with no value

<ul>
<li>e.g. A subscriber with a custom field assigned for country, but not for zip would have a URL query string of <code>?subscriber[country]=US&amp;subscriber[zip]</code></li>
</ul></li>
<li>A parameter value should not be unique per subscriber (e.g. we won&#39;t send <code>email</code>); this allows for greater cacheability of responses, as to optimize your delivery throughput</li>
</ul>

<h2 id="cdc-requirements-response">Response</h2>

<ul>
<li>Responses must have a <code>Content-Type</code> header of <code>application/json</code></li>
<li>A response with a <code>2xx</code> status will be considered successful

<ul>
<li>A successful response should contain a body that is a parseable JSON <em>document</em> (i.e. the top level must be either an object or an array)</li>
<li>The returned document should not exceed 350 KB in size</li>
</ul></li>
<li>A <code>3xx</code> response will be followed as redirects per the HTTP specification</li>
<li>A client error response (those in the <code>4xx</code> range) will be considered a permanent error</li>
<li>A server error response (those in the <code>5xx</code> range) will be considered a temporary error</li>
<li>No other response codes are supported</li>
</ul>

<p>When a <code>2xx</code> response is received, Drip will use whatever data is given, and will assume <code>null</code> values for any data not given. For example, response of <code>{}</code> would still be accessible in Liquid and would respond to any attribute with <code>nil</code>.</p>
<h2 id='general'>General</h2>
<ul>
<li>We will retry temporary error responses for a limited amount of time

<ul>
<li>If retries continue to fail, we will give up sending the individual email</li>
</ul></li>
<li>A permanent error response will cause the the email to not be sent</li>
<li>In order to optimize your sending throughput, we will time out any response or series of redirects after 3 seconds</li>
</ul>
<h1 id='preview-test-mode'>Preview/Test Mode</h1>
<blockquote>
<p>Example request from Drip to your endpoint during Preview/Test</p>
</blockquote>
<pre class="highlight shell"><code>https://api.you.com/api?subscriber[zipcode]&amp;preview<span class="o">=</span><span class="nb">true</span>
</code></pre>
<blockquote>
<p>Example request from Drip to your endpoint during Preview As</p>
</blockquote>
<pre class="highlight shell"><code>https://api.you.com/api?subscriber[zipcode]<span class="o">=</span>90210&amp;preview<span class="o">=</span><span class="nb">true</span>
</code></pre>
<p>When previewing or sending a test email within Drip, well make calls to your endpoint with an additional query parameter: <code>preview=true</code>.</p>

<p>When that happens, we suggest your endpoint send back mocked data. This allows preview and test emails to populate with sample content for a more accurate experience.</p>

<p>This is because in these contexts we won&#39;t have an Event to send to your endpoint. (And unless you&#39;re using Preview As, nor will we have a Person.)</p>
<h1 id='example'>Example</h1>
<blockquote>
<p>Example request from Drip to your endpoint</p>
</blockquote>
<pre class="highlight shell"><code>https://api.you.com/api?subscriber[zipcode]<span class="o">=</span>90210
</code></pre>
<blockquote>
<p>Example response from Drip&#39;s <a href="https://github.com/DripEmail/custom-dynamic-weather">weather service</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"apparentTemperature"</span><span class="p">:</span><span class="w"> </span><span class="mf">65.89</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cloudCover"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.09</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dewPoint"</span><span class="p">:</span><span class="w"> </span><span class="mf">22.55</span><span class="p">,</span><span class="w">
    </span><span class="s2">"humidity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.19</span><span class="p">,</span><span class="w">
    </span><span class="s2">"icon"</span><span class="p">:</span><span class="w"> </span><span class="s2">"clear-night"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nearestStormBearing"</span><span class="p">:</span><span class="w"> </span><span class="mi">131</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nearestStormDistance"</span><span class="p">:</span><span class="w"> </span><span class="mi">446</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ozone"</span><span class="p">:</span><span class="w"> </span><span class="mf">258.97</span><span class="p">,</span><span class="w">
    </span><span class="s2">"precipIntensity"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"precipProbability"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pressure"</span><span class="p">:</span><span class="w"> </span><span class="mf">1018.59</span><span class="p">,</span><span class="w">
    </span><span class="s2">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Clear"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"temperature"</span><span class="p">:</span><span class="w"> </span><span class="mf">65.89</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1541727521</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uvIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"visibility"</span><span class="p">:</span><span class="w"> </span><span class="mf">8.27</span><span class="p">,</span><span class="w">
    </span><span class="s2">"windBearing"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"windGust"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.09</span><span class="p">,</span><span class="w">
    </span><span class="s2">"windSpeed"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.39</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Imagine that you&#39;ve got a service that returns the weather for a given zipcode. As a canonical example, have a look at our <a href="https://github.com/DripEmail/custom-dynamic-weather">weather service</a>.</p>

<p>Now, consider some Custom Dynamic Content that looks like this:</p>

<p><code>Good morning {{ subscriber.first_name }}! Looks like it&#39;s {{ my.weather.summary | downcase }} in your neck of the woods!</code></p>

<p>At the point that we render this content, we&#39;ll make a request to your API. If you&#39;re using our <a href="https://github.com/DripEmail/custom-dynamic-weather">weather service</a>, the request and response will look something like what you see to the right.</p>

<p>In addition to having access to the <code>subscriber</code> object, all of your Custom Dynamic Content will be available in a <code>my</code> object. In this example, we&#39;re making the response above available as <code>my.weather</code>.</p>

<p>And so, when the Liquid is rendered, it might look like:</p>

<p><code>Good morning Mary! Looks like it&#39;s clear in your neck of the woods!</code></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="ruby">Ruby</a>
                <a href="#" data-language-name="javascript">JavaScript</a>
          </div>
      </div>
    </div>
  </body>
</html>
